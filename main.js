/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __getOwnPropSymbols = Object.getOwnPropertySymbols;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __propIsEnum = Object.prototype.propertyIsEnumerable;
var __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;
var __spreadValues = (a, b) => {
  for (var prop in b || (b = {}))
    if (__hasOwnProp.call(b, prop))
      __defNormalProp(a, prop, b[prop]);
  if (__getOwnPropSymbols)
    for (var prop of __getOwnPropSymbols(b)) {
      if (__propIsEnum.call(b, prop))
        __defNormalProp(a, prop, b[prop]);
    }
  return a;
};
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);
var __async = (__this, __arguments, generator) => {
  return new Promise((resolve, reject) => {
    var fulfilled = (value) => {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    };
    var rejected = (value) => {
      try {
        step(generator.throw(value));
      } catch (e) {
        reject(e);
      }
    };
    var step = (x) => x.done ? resolve(x.value) : Promise.resolve(x.value).then(fulfilled, rejected);
    step((generator = generator.apply(__this, __arguments)).next());
  });
};

// src/main.ts
var main_exports = {};
__export(main_exports, {
  default: () => MPPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian3 = require("obsidian");

// src/view.ts
var import_obsidian2 = require("obsidian");

// src/converter.ts
var MPConverter = class {
  static initialize(app) {
    this.app = app;
  }
  static formatContent(element) {
    const table = this.createWrapperTable(element);
    this.processElements(table.querySelector("td"));
  }
  static createWrapperTable(element) {
    const table = document.createElement("table");
    const tbody = document.createElement("tbody");
    const tr = document.createElement("tr");
    const td = document.createElement("td");
    table.style.width = "100%";
    table.style.borderCollapse = "collapse";
    td.style.wordBreak = "break-all";
    while (element.firstChild) {
      td.appendChild(element.firstChild);
    }
    tr.appendChild(td);
    tbody.appendChild(tr);
    table.appendChild(tbody);
    element.appendChild(table);
    return table;
  }
  static processElements(container) {
    if (!container) return;
    container.querySelectorAll("strong, em").forEach((el) => {
      el.style.display = "inline";
    });
    container.querySelectorAll("a").forEach((el) => {
      el.style.color = "#576b95";
      el.style.textDecoration = "none";
    });
    container.querySelectorAll("table").forEach((el) => {
      if (el === container.closest("table")) return;
      el.style.borderCollapse = "collapse";
      el.style.margin = "1em 0";
      el.style.width = "100%";
    });
    container.querySelectorAll("th, td").forEach((el) => {
      if (el === container.closest("td")) return;
      el.style.border = "1px solid #dfdfdf";
      el.style.padding = "8px";
    });
    container.querySelectorAll("hr").forEach((el) => {
      el.style.border = "none";
      el.style.borderTop = "1px solid #dfdfdf";
      el.style.margin = "20px 0";
    });
    container.querySelectorAll("del").forEach((el) => {
      el.style.textDecoration = "line-through";
    });
    container.querySelectorAll(".task-list-item").forEach((el) => {
      el.style.listStyle = "none";
      const checkbox = el.querySelector('input[type="checkbox"]');
      if (checkbox) {
        checkbox.style.marginRight = "6px";
      }
    });
    container.querySelectorAll(".footnote-ref, .footnote-backref").forEach((el) => {
      el.style.color = "#576b95";
      el.style.textDecoration = "none";
    });
    container.querySelectorAll("pre code").forEach((el) => {
      const pre = el.parentElement;
      if (pre) {
        const dots = document.createElement("div");
        dots.style.cssText = `
                    margin: 8px 0 12px 0;
                    display: flex;
                    gap: 6px;
                `;
        const colors = ["#ff5f56", "#ffbd2e", "#27c93f"];
        colors.forEach((color) => {
          const dot = document.createElement("span");
          dot.style.cssText = `
                        width: 12px;
                        height: 12px;
                        border-radius: 50%;
                        background-color: ${color};
                    `;
          dots.appendChild(dot);
        });
        pre.insertBefore(dots, pre.firstChild);
        pre.style.paddingTop = "32px";
        const copyButton = pre.querySelector(".copy-code-button");
        if (copyButton) {
          copyButton.remove();
        }
      }
    });
    container.querySelectorAll("span.internal-embed[alt][src]").forEach((el) => __async(this, null, function* () {
      var _a;
      const originalSpan = el;
      const src = originalSpan.getAttribute("src");
      const alt = originalSpan.getAttribute("alt");
      const parentP = originalSpan.closest("p");
      if (!src) return;
      try {
        const newImg = document.createElement("img");
        const file = this.app.vault.getAbstractFileByPath(src);
        if (file) {
          const absolutePath = this.app.vault.adapter.getResourcePath(src);
          newImg.src = absolutePath;
          if (alt) newImg.alt = alt;
          newImg.style.maxWidth = "100%";
          newImg.style.height = "auto";
          newImg.style.display = "block";
          newImg.style.margin = "1em auto";
          if (parentP) {
            parentP.innerHTML = "";
            parentP.appendChild(newImg);
          } else {
            (_a = originalSpan.parentNode) == null ? void 0 : _a.replaceChild(newImg, originalSpan);
          }
        }
      } catch (error) {
        console.error("\u56FE\u7247\u5904\u7406\u5931\u8D25:", error);
      }
    }));
    container.querySelectorAll("blockquote").forEach((el) => {
      el.querySelectorAll("p").forEach((p) => {
        p.style.margin = "0";
        p.style.padding = "0";
        p.style.lineHeight = "inherit";
      });
    });
  }
};

// src/copyManager.ts
var import_obsidian = require("obsidian");
var CopyManager = class {
  static cleanupHtml(html) {
    const tempDiv = document.createElement("div");
    tempDiv.innerHTML = html;
    tempDiv.querySelectorAll("*").forEach((el) => {
      Array.from(el.attributes).forEach((attr) => {
        if (attr.name.startsWith("data-")) {
          el.removeAttribute(attr.name);
        }
      });
    });
    tempDiv.querySelectorAll("*").forEach((el) => {
      el.removeAttribute("class");
    });
    tempDiv.querySelectorAll("*").forEach((el) => {
      el.removeAttribute("id");
    });
    return tempDiv.innerHTML;
  }
  static processImages(container) {
    return __async(this, null, function* () {
      const images = container.querySelectorAll("img");
      const imageArray = Array.from(images);
      for (const img of imageArray) {
        try {
          const response = yield fetch(img.src);
          const blob = yield response.blob();
          const reader = new FileReader();
          yield new Promise((resolve, reject) => {
            reader.onload = () => {
              img.src = reader.result;
              resolve(null);
            };
            reader.onerror = reject;
            reader.readAsDataURL(blob);
          });
        } catch (error) {
          console.error("\u56FE\u7247\u8F6C\u6362\u5931\u8D25:", error);
        }
      }
    });
  }
  static copyToClipboard(element) {
    return __async(this, null, function* () {
      try {
        const container = document.createElement("div");
        container.style.position = "absolute";
        container.style.left = "-9999px";
        container.innerHTML = element.innerHTML;
        document.body.appendChild(container);
        console.log(element.innerHTML);
        yield this.processImages(container);
        const cleanHtml = this.cleanupHtml(container.innerHTML);
        const clipData = new ClipboardItem({
          "text/html": new Blob([cleanHtml], { type: "text/html" }),
          "text/plain": new Blob([container.textContent || ""], { type: "text/plain" })
        });
        document.body.removeChild(container);
        yield navigator.clipboard.write([clipData]);
        new import_obsidian.Notice("\u5DF2\u590D\u5236\u5230\u526A\u8D34\u677F");
      } catch (error) {
        new import_obsidian.Notice("\u590D\u5236\u5931\u8D25");
      }
    });
  }
};

// src/donateManager.ts
var DonateManager = class {
  static showDonateModal(container) {
    this.overlay = container.createEl("div", {
      cls: "mp-donate-overlay"
    });
    this.modal = this.overlay.createEl("div", {
      cls: "mp-donate-modal"
    });
    const closeButton = this.modal.createEl("button", {
      cls: "mp-donate-close",
      text: "\xD7"
    });
    this.modal.createEl("h3", {
      text: "\u8BF7\u4F5C\u8005\u559D\u5496\u5561",
      cls: "mp-donate-title"
    });
    const content = this.modal.createEl("div", {
      cls: "mp-donate-content"
    });
    content.createEl("p", {
      text: "\u60A8\u7684\u652F\u6301\u662F\u6211\u6301\u7EED\u66F4\u65B0\u7684\u52A8\u529B \u2764\uFE0F",
      cls: "mp-donate-desc"
    });
    const paymentTabs = content.createEl("div", {
      cls: "mp-donate-tabs"
    });
    const wechatTab = paymentTabs.createEl("button", {
      text: "\u5FAE\u4FE1\u652F\u4ED8",
      cls: "mp-donate-tab active"
    });
    const alipayTab = paymentTabs.createEl("button", {
      text: "\u652F\u4ED8\u5B9D",
      cls: "mp-donate-tab"
    });
    const qrContainer = content.createEl("div", {
      cls: "mp-donate-qr-container"
    });
    const wechatQR = qrContainer.createEl("div", {
      cls: "mp-donate-qr active",
      attr: {
        "data-type": "wechat"
      }
    });
    wechatQR.createEl("img", {
      attr: {
        src: "./assets/images/wechat-qr.png",
        alt: "\u5FAE\u4FE1\u652F\u4ED8"
      }
    });
    const alipayQR = qrContainer.createEl("div", {
      cls: "mp-donate-qr",
      attr: {
        "data-type": "alipay"
      }
    });
    alipayQR.createEl("img", {
      attr: {
        src: "assets/images/alipay-qr.png",
        alt: "\u652F\u4ED8\u5B9D"
      }
    });
    wechatTab.addEventListener("click", () => this.switchTab("wechat", paymentTabs, qrContainer));
    alipayTab.addEventListener("click", () => this.switchTab("alipay", paymentTabs, qrContainer));
    closeButton.addEventListener("click", () => this.closeDonateModal());
    this.overlay.addEventListener("click", (e) => {
      if (e.target === this.overlay) {
        this.closeDonateModal();
      }
    });
  }
  static switchTab(type, tabsContainer, qrContainer) {
    tabsContainer.querySelectorAll(".mp-donate-tab").forEach((tab) => {
      var _a;
      tab.classList.remove("active");
      if ((_a = tab.textContent) == null ? void 0 : _a.includes(type === "wechat" ? "\u5FAE\u4FE1" : "\u652F\u4ED8\u5B9D")) {
        tab.classList.add("active");
      }
    });
    qrContainer.querySelectorAll(".mp-donate-qr").forEach((qr) => {
      qr.classList.remove("active");
      if (qr.getAttribute("data-type") === type) {
        qr.classList.add("active");
      }
    });
  }
  static closeDonateModal() {
    if (this.overlay) {
      this.overlay.remove();
    }
  }
};

// src/view.ts
var VIEW_TYPE_MP = "mp-preview";
var MPView = class extends import_obsidian2.ItemView {
  constructor(leaf, templateManager, settingsManager) {
    super(leaf);
    this.currentFile = null;
    this.updateTimer = null;
    this.isPreviewLocked = false;
    this.templateManager = templateManager;
    this.settingsManager = settingsManager;
  }
  getViewType() {
    return VIEW_TYPE_MP;
  }
  getDisplayText() {
    return "\u516C\u4F17\u53F7\u9884\u89C8";
  }
  getIcon() {
    return "eye";
  }
  // 在 onOpen 方法中更新底部锁定按钮的创建
  onOpen() {
    return __async(this, null, function* () {
      var _a, _b, _c, _d;
      const container = this.containerEl.children[1];
      container.empty();
      const toolbar = container.createEl("div", { cls: "mp-toolbar" });
      this.lockButton = toolbar.createEl("button", {
        cls: "mp-lock-button",
        attr: { "aria-label": "\u5173\u95ED\u5B9E\u65F6\u9884\u89C8\u72B6\u6001" }
      });
      this.lockButton.innerHTML = "\u{1F513}";
      this.lockButton.addEventListener("click", () => this.togglePreviewLock());
      const controlsGroup = toolbar.createEl("div", { cls: "mp-controls-group" });
      this.customTemplateSelect = this.createCustomSelect(
        controlsGroup,
        "mp-template-select",
        yield this.getTemplateOptions()
      );
      this.customTemplateSelect.id = "template-select";
      (_a = this.customTemplateSelect.querySelector(".custom-select")) == null ? void 0 : _a.addEventListener("change", (e) => __async(this, null, function* () {
        const value = e.detail.value;
        this.templateManager.setCurrentTemplate(value);
        yield this.settingsManager.updateSettings({
          templateId: value
        });
        this.updatePreview();
      }));
      this.customFontSelect = this.createCustomSelect(
        controlsGroup,
        "mp-font-select",
        this.getFontOptions()
      );
      (_b = this.customFontSelect.querySelector(".custom-select")) == null ? void 0 : _b.addEventListener("change", (e) => __async(this, null, function* () {
        const value = e.detail.value;
        this.templateManager.setFont(value);
        yield this.settingsManager.updateSettings({
          fontFamily: value
        });
        this.updatePreview();
      }));
      this.customFontSelect.id = "font-select";
      const fontSizeGroup = controlsGroup.createEl("div", { cls: "mp-font-size-group" });
      const decreaseButton = fontSizeGroup.createEl("button", {
        cls: "mp-font-size-btn",
        text: "-"
      });
      this.fontSizeSelect = fontSizeGroup.createEl("input", {
        cls: "mp-font-size-input",
        type: "text",
        value: "16",
        attr: {
          style: "border: none; outline: none; background: transparent;"
        }
      });
      const increaseButton = fontSizeGroup.createEl("button", {
        cls: "mp-font-size-btn",
        text: "+"
      });
      const settings = this.settingsManager.getSettings();
      if (settings.templateId) {
        const templateSelect = this.customTemplateSelect.querySelector(".selected-text");
        const templateDropdown = this.customTemplateSelect.querySelector(".select-dropdown");
        if (templateSelect && templateDropdown) {
          const option = yield this.getTemplateOptions();
          const selected = option.find((o) => o.value === settings.templateId);
          if (selected) {
            templateSelect.textContent = selected.label;
            (_c = this.customTemplateSelect.querySelector(".custom-select")) == null ? void 0 : _c.setAttribute("data-value", selected.value);
            templateDropdown.querySelectorAll(".select-item").forEach((el) => {
              if (el.getAttribute("data-value") === selected.value) {
                el.classList.add("selected");
              } else {
                el.classList.remove("selected");
              }
            });
          }
        }
        this.templateManager.setCurrentTemplate(settings.templateId);
      }
      if (settings.fontFamily) {
        const fontSelect = this.customFontSelect.querySelector(".selected-text");
        const fontDropdown = this.customFontSelect.querySelector(".select-dropdown");
        if (fontSelect && fontDropdown) {
          const option = this.getFontOptions();
          const selected = option.find((o) => o.value === settings.fontFamily);
          if (selected) {
            fontSelect.textContent = selected.label;
            (_d = this.customFontSelect.querySelector(".custom-select")) == null ? void 0 : _d.setAttribute("data-value", selected.value);
            fontDropdown.querySelectorAll(".select-item").forEach((el) => {
              if (el.getAttribute("data-value") === selected.value) {
                el.classList.add("selected");
              } else {
                el.classList.remove("selected");
              }
            });
          }
        }
        this.templateManager.setFont(settings.fontFamily);
      }
      if (settings.fontSize) {
        this.fontSizeSelect.value = settings.fontSize.toString();
        this.templateManager.setFontSize(settings.fontSize);
      }
      const updateFontSize = () => __async(this, null, function* () {
        const size = parseInt(this.fontSizeSelect.value);
        this.templateManager.setFontSize(size);
        yield this.settingsManager.updateSettings({
          fontSize: size
        });
        this.updatePreview();
      });
      decreaseButton.addEventListener("click", () => {
        const currentSize = parseInt(this.fontSizeSelect.value);
        if (currentSize > 12) {
          this.fontSizeSelect.value = (currentSize - 1).toString();
          updateFontSize();
        }
      });
      increaseButton.addEventListener("click", () => {
        const currentSize = parseInt(this.fontSizeSelect.value);
        if (currentSize < 30) {
          this.fontSizeSelect.value = (currentSize + 1).toString();
          updateFontSize();
        }
      });
      this.fontSizeSelect.addEventListener("change", updateFontSize);
      this.previewEl = container.createEl("div", { cls: "mp-preview-area" });
      const bottomBar = container.createEl("div", { cls: "mp-bottom-bar" });
      const helpButton = bottomBar.createEl("button", {
        cls: "mp-help-button",
        attr: { "aria-label": "\u4F7F\u7528\u6307\u5357" }
      });
      helpButton.innerHTML = "\u2753";
      const tooltip = bottomBar.createEl("div", {
        cls: "mp-help-tooltip",
        text: `\u4F7F\u7528\u6307\u5357\uFF1A
                1. \u9009\u62E9\u559C\u6B22\u7684\u4E3B\u9898\u6A21\u677F
                2. \u8C03\u6574\u5B57\u4F53\u548C\u5B57\u53F7
                3. \u5B9E\u65F6\u9884\u89C8\u6548\u679C
                4. \u70B9\u51FB\u3010\u590D\u5236\u6309\u94AE\u3011\u5373\u53EF\u7C98\u8D34\u5230\u516C\u4F17\u53F7
                5. \u7F16\u8F91\u5B9E\u65F6\u67E5\u770B\u6548\u679C\uFF0C\u70B9\u{1F513}\u5173\u95ED\u5B9E\u65F6\u5237\u65B0
                6. \u5982\u679C\u4F60\u559C\u6B22\u8FD9\u4E2A\u63D2\u4EF6\uFF0C\u6B22\u8FCE\u6253\u8D4F`
      });
      const bottomControlsGroup = bottomBar.createEl("div", { cls: "mp-bottom-controls-group" });
      const likeButton = bottomControlsGroup.createEl("button", {
        cls: "mp-like-button"
      });
      likeButton.innerHTML = '<span style="margin-right: 4px">\u2615\uFE0F</span>\u8BF7\u4F5C\u8005\u559D\u5496\u5561';
      likeButton.addEventListener("click", () => {
        DonateManager.showDonateModal(this.containerEl);
      });
      this.copyButton = bottomControlsGroup.createEl("button", {
        text: "\u590D\u5236\u4E3A\u516C\u4F17\u53F7\u683C\u5F0F",
        cls: "mp-copy-button"
      });
      const newButton = bottomControlsGroup.createEl("button", {
        text: "\u656C\u8BF7\u671F\u5F85",
        cls: "mp-new-button"
      });
      this.copyButton.addEventListener("click", () => __async(this, null, function* () {
        if (this.previewEl) {
          this.copyButton.disabled = true;
          this.copyButton.setText("\u590D\u5236\u4E2D...");
          try {
            yield CopyManager.copyToClipboard(this.previewEl);
            this.copyButton.setText("\u590D\u5236\u6210\u529F");
            setTimeout(() => {
              this.copyButton.disabled = false;
              this.copyButton.setText("\u590D\u5236\u4E3A\u516C\u4F17\u53F7\u683C\u5F0F");
            }, 2e3);
          } catch (error) {
            this.copyButton.setText("\u590D\u5236\u5931\u8D25");
            setTimeout(() => {
              this.copyButton.disabled = false;
              this.copyButton.setText("\u590D\u5236\u4E3A\u516C\u4F17\u53F7\u683C\u5F0F");
            }, 2e3);
          }
        }
      }));
      this.registerEvent(
        this.app.workspace.on("file-open", this.onFileOpen.bind(this))
      );
      this.registerEvent(
        this.app.vault.on("modify", this.onFileModify.bind(this))
      );
      const currentFile = this.app.workspace.getActiveFile();
      yield this.onFileOpen(currentFile);
    });
  }
  updateControlsState(enabled) {
    this.lockButton.disabled = !enabled;
    const templateSelect = this.customTemplateSelect.querySelector(".custom-select");
    const fontSelect = this.customFontSelect.querySelector(".custom-select");
    if (templateSelect) {
      templateSelect.classList.toggle("disabled", !enabled);
      templateSelect.setAttribute("style", `pointer-events: ${enabled ? "auto" : "none"}`);
    }
    if (fontSelect) {
      fontSelect.classList.toggle("disabled", !enabled);
      fontSelect.setAttribute("style", `pointer-events: ${enabled ? "auto" : "none"}`);
    }
    this.fontSizeSelect.disabled = !enabled;
    this.copyButton.disabled = !enabled;
    const fontSizeButtons = this.containerEl.querySelectorAll(".mp-font-size-btn");
    fontSizeButtons.forEach((button) => {
      button.disabled = !enabled;
    });
  }
  onFileOpen(file) {
    return __async(this, null, function* () {
      this.currentFile = file;
      if (!file || file.extension !== "md") {
        this.previewEl.empty();
        this.previewEl.createEl("div", {
          text: "\u53EA\u80FD\u9884\u89C8 Markdown \u6587\u672C\u6587\u6863",
          cls: "mp-empty-message"
        });
        this.updateControlsState(false);
        return;
      }
      this.updateControlsState(true);
      this.isPreviewLocked = false;
      this.lockButton.innerHTML = "\u{1F513}";
      yield this.updatePreview();
    });
  }
  togglePreviewLock() {
    return __async(this, null, function* () {
      this.isPreviewLocked = !this.isPreviewLocked;
      const lockIcon = this.isPreviewLocked ? "\u{1F512}" : "\u{1F513}";
      const lockStatus = this.isPreviewLocked ? "\u5F00\u542F\u5B9E\u65F6\u9884\u89C8\u72B6\u6001" : "\u5173\u95ED\u5B9E\u65F6\u9884\u89C8\u72B6\u6001";
      this.lockButton.innerHTML = lockIcon;
      this.lockButton.setAttribute("aria-label", lockStatus);
      if (!this.isPreviewLocked) {
        yield this.updatePreview();
      }
    });
  }
  onFileModify(file) {
    return __async(this, null, function* () {
      if (file === this.currentFile && !this.isPreviewLocked) {
        if (this.updateTimer) {
          clearTimeout(this.updateTimer);
        }
        this.updateTimer = setTimeout(() => {
          this.updatePreview();
        }, 500);
      }
    });
  }
  updatePreview() {
    return __async(this, null, function* () {
      if (!this.currentFile) return;
      this.previewEl.empty();
      const content = yield this.app.vault.read(this.currentFile);
      yield import_obsidian2.MarkdownRenderer.renderMarkdown(
        content,
        this.previewEl,
        this.currentFile.path,
        this
      );
      MPConverter.formatContent(this.previewEl);
      this.templateManager.applyTemplate(this.previewEl);
    });
  }
  // 添加自定义下拉选择器创建方法
  createCustomSelect(parent, className, options) {
    var _a;
    const container = parent.createEl("div", { cls: "custom-select-container" });
    const select = container.createEl("div", { cls: "custom-select" });
    const selectedText = select.createEl("span", { cls: "selected-text" });
    const arrow = select.createEl("span", { cls: "select-arrow", text: "\u25BE" });
    const dropdown = container.createEl("div", { cls: "select-dropdown" });
    options.forEach((option) => {
      const item = dropdown.createEl("div", {
        cls: "select-item",
        text: option.label
      });
      item.dataset.value = option.value;
      item.addEventListener("click", () => {
        dropdown.querySelectorAll(".select-item").forEach((el) => el.classList.remove("selected"));
        item.classList.add("selected");
        selectedText.textContent = option.label;
        select.dataset.value = option.value;
        dropdown.classList.remove("show");
        select.dispatchEvent(new CustomEvent("change", {
          detail: { value: option.value }
        }));
      });
    });
    if (options.length > 0) {
      selectedText.textContent = options[0].label;
      select.dataset.value = options[0].value;
      (_a = dropdown.querySelector(".select-item")) == null ? void 0 : _a.classList.add("selected");
    }
    select.addEventListener("click", (e) => {
      e.stopPropagation();
      dropdown.classList.toggle("show");
    });
    document.addEventListener("click", () => {
      dropdown.classList.remove("show");
    });
    return container;
  }
  // 获取模板选项
  getTemplateOptions() {
    return __async(this, null, function* () {
      yield this.templateManager.loadTemplates();
      const templates = this.templateManager.getAllTemplates();
      return templates.length > 0 ? templates.map((t) => ({ value: t.id, label: t.name })) : [{ value: "default", label: "\u9ED8\u8BA4\u6A21\u677F" }];
    });
  }
  // 获取字体选项
  getFontOptions() {
    return [
      {
        value: 'Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, "PingFang SC", Cambria, Cochin, Georgia, Times, "Times New Roman", serif',
        label: "\u9ED8\u8BA4\u5B57\u4F53"
      },
      {
        value: 'SimSun, "\u5B8B\u4F53", serif',
        label: "\u5B8B\u4F53"
      },
      {
        value: 'SimHei, "\u9ED1\u4F53", sans-serif',
        label: "\u9ED1\u4F53"
      },
      {
        value: 'KaiTi, "\u6977\u4F53", serif',
        label: "\u6977\u4F53"
      },
      {
        value: '"Microsoft YaHei", "\u5FAE\u8F6F\u96C5\u9ED1", sans-serif',
        label: "\u96C5\u9ED1"
      }
    ];
  }
};

// src/templateManager.ts
var TemplateManager = class {
  constructor(app) {
    this.templates = /* @__PURE__ */ new Map();
    this.currentFont = "-apple-system";
    this.currentFontSize = 16;
    this.app = app;
    this.loadTemplates();
  }
  loadTemplates() {
    return __async(this, null, function* () {
      try {
        const configDir = this.app.vault.configDir;
        const templatesPath = `${configDir}/plugins/obsidian-to-mp/templates`;
        const defaultTemplate = JSON.parse(
          yield this.app.vault.adapter.read(`${templatesPath}/default.json`)
        );
        this.templates.set(defaultTemplate.id, defaultTemplate);
        this.currentTemplate = defaultTemplate;
        const minimalTemplate = JSON.parse(
          yield this.app.vault.adapter.read(`${templatesPath}/minimal.json`)
        );
        this.templates.set(minimalTemplate.id, minimalTemplate);
        const elegantTemplate = JSON.parse(
          yield this.app.vault.adapter.read(`${templatesPath}/elegant.json`)
        );
        this.templates.set(elegantTemplate.id, elegantTemplate);
        const darkTemplate = JSON.parse(
          yield this.app.vault.adapter.read(`${templatesPath}/dark.json`)
        );
        this.templates.set(darkTemplate.id, darkTemplate);
        const academicTemplate = JSON.parse(
          yield this.app.vault.adapter.read(`${templatesPath}/academic.json`)
        );
        this.templates.set(academicTemplate.id, academicTemplate);
      } catch (error) {
        console.error("\u52A0\u8F7D\u6A21\u677F\u5931\u8D25:", error);
        throw new Error("\u65E0\u6CD5\u52A0\u8F7D\u6A21\u677F\u6587\u4EF6");
      }
    });
  }
  getTemplate(id) {
    return this.templates.get(id);
  }
  getCurrentTemplate() {
    return this.currentTemplate;
  }
  setCurrentTemplate(id) {
    const template = this.templates.get(id);
    if (template) {
      this.currentTemplate = template;
      return true;
    }
    return false;
  }
  getAllTemplates() {
    return Array.from(this.templates.values());
  }
  setFont(fontFamily) {
    this.currentFont = fontFamily;
  }
  setFontSize(size) {
    this.currentFontSize = size;
  }
  applyTemplate(element) {
    const styles = this.currentTemplate.styles;
    const table = element.querySelector("table");
    const td = element.querySelector("td");
    if (!table || !td) return;
    table.setAttribute("style", styles.container);
    table.setAttribute("cellpadding", "0");
    table.setAttribute("cellspacing", "0");
    td.style.cssText = `
            word-break: break-all;
            padding: 0;
            margin: 0;
            line-height: 1.7;
            overflow-wrap: break-word;
            white-space: normal;
            border: none;
            font-family: ${this.currentFont};
        `;
    td.querySelectorAll("h1").forEach((el) => {
      el.setAttribute("style", `${styles.title.h1}; font-family: ${this.currentFont};`);
    });
    td.querySelectorAll("h2").forEach((el) => {
      el.setAttribute("style", `${styles.title.h2}; font-family: ${this.currentFont};`);
    });
    td.querySelectorAll("h3").forEach((el) => {
      el.setAttribute("style", `${styles.title.h3}; font-family: ${this.currentFont};`);
    });
    td.querySelectorAll("h4, h5, h6").forEach((el) => {
      el.setAttribute("style", `${styles.title.base}; font-family: ${this.currentFont};`);
    });
    td.querySelectorAll("p").forEach((el) => {
      var _a, _b;
      if (!((_a = el.parentElement) == null ? void 0 : _a.closest("p")) && !((_b = el.parentElement) == null ? void 0 : _b.closest("blockquote"))) {
        el.setAttribute("style", `${styles.paragraph}; font-family: ${this.currentFont}; font-size: ${this.currentFontSize}px;`);
      }
    });
    td.querySelectorAll("ul, ol").forEach((el) => {
      el.setAttribute("style", styles.list.container);
    });
    td.querySelectorAll("li").forEach((el) => {
      el.setAttribute("style", `${styles.list.item}; font-family: ${this.currentFont}; font-size: ${this.currentFontSize}px;`);
    });
    td.querySelectorAll(".task-list-item").forEach((el) => {
      el.setAttribute("style", `${styles.list.taskList}; font-family: ${this.currentFont}; font-size: ${this.currentFontSize}px;`);
    });
    td.querySelectorAll("blockquote").forEach((el) => {
      el.setAttribute("style", `${styles.quote}; font-family: ${this.currentFont}; font-size: ${this.currentFontSize}px;`);
    });
    td.querySelectorAll("pre").forEach((el) => {
      el.setAttribute("style", `${styles.code.block}; font-size: ${this.currentFontSize}px;`);
    });
    td.querySelectorAll("code:not(pre code)").forEach((el) => {
      el.setAttribute("style", `${styles.code.inline}; font-size: ${this.currentFontSize}px;`);
    });
    td.querySelectorAll("a").forEach((el) => {
      el.setAttribute("style", styles.link);
    });
    td.querySelectorAll("strong").forEach((el) => {
      el.setAttribute("style", styles.emphasis.strong);
    });
    td.querySelectorAll("em").forEach((el) => {
      el.setAttribute("style", styles.emphasis.em);
    });
    td.querySelectorAll("del").forEach((el) => {
      el.setAttribute("style", styles.emphasis.del);
    });
    td.querySelectorAll("table").forEach((el) => {
      if (el === table) return;
      el.setAttribute("style", styles.table.container);
    });
    td.querySelectorAll("th").forEach((el) => {
      el.setAttribute("style", `${styles.table.header}; font-family: ${this.currentFont}; font-size: ${this.currentFontSize}px;`);
    });
    td.querySelectorAll("td").forEach((el) => {
      if (el === td) return;
      el.setAttribute("style", `${styles.table.cell}; font-family: ${this.currentFont}; font-size: ${this.currentFontSize}px;`);
    });
    td.querySelectorAll("hr").forEach((el) => {
      el.setAttribute("style", styles.hr);
    });
    td.querySelectorAll(".footnote-ref").forEach((el) => {
      el.setAttribute("style", styles.footnote.ref);
    });
    td.querySelectorAll(".footnote-backref").forEach((el) => {
      el.setAttribute("style", styles.footnote.backref);
    });
    td.querySelectorAll("img").forEach((el) => {
      const img = el;
      el.setAttribute("style", `${styles.image}; font-family: ${this.currentFont};`);
      const parent = img.parentElement;
      if (parent && parent.tagName.toLowerCase() === "p") {
        parent.style.textAlign = "center";
        parent.style.margin = "1em 0";
      }
    });
    td.querySelectorAll("pre").forEach((el) => {
      el.setAttribute("style", `${styles.code.block};`);
    });
    td.querySelectorAll("blockquote").forEach((el) => {
      el.setAttribute("style", `${styles.quote};`);
    });
    td.querySelectorAll("ul, ol").forEach((el) => {
      el.setAttribute("style", `${styles.list.container}; font-family: ${this.currentFont};`);
    });
    td.querySelectorAll("li").forEach((el) => {
      el.setAttribute("style", `${styles.list.item}; font-family: ${this.currentFont}; font-size: ${this.currentFontSize}px;`);
    });
  }
};

// src/settings.ts
var DEFAULT_SETTINGS = {
  templateId: "default",
  fontFamily: "-apple-system",
  fontSize: 16
};
var SettingsManager = class {
  constructor(plugin) {
    this.plugin = plugin;
    this.settings = DEFAULT_SETTINGS;
  }
  loadSettings() {
    return __async(this, null, function* () {
      this.settings = Object.assign({}, DEFAULT_SETTINGS, yield this.plugin.loadData());
    });
  }
  saveSettings() {
    return __async(this, null, function* () {
      yield this.plugin.saveData(this.settings);
    });
  }
  getSettings() {
    return this.settings;
  }
  updateSettings(settings) {
    return __async(this, null, function* () {
      this.settings = __spreadValues(__spreadValues({}, this.settings), settings);
      yield this.saveSettings();
    });
  }
};

// src/main.ts
var MPPlugin = class extends import_obsidian3.Plugin {
  onload() {
    return __async(this, null, function* () {
      this.settingsManager = new SettingsManager(this);
      yield this.settingsManager.loadSettings();
      const templateManager = new TemplateManager(this.app);
      MPConverter.initialize(this.app);
      this.registerView(
        VIEW_TYPE_MP,
        (leaf) => new MPView(leaf, templateManager, this.settingsManager)
      );
      this.addCommand({
        id: "open-mp-preview",
        name: "\u6253\u5F00\u516C\u4F17\u53F7\u9884\u89C8\u63D2\u4EF6",
        callback: () => __async(this, null, function* () {
          yield this.activateView();
        })
      });
      this.app.workspace.onLayoutReady(() => {
        this.activateView();
      });
      MPConverter.initialize(this.app);
    });
  }
  onunload() {
    return __async(this, null, function* () {
      this.app.workspace.detachLeavesOfType(VIEW_TYPE_MP);
    });
  }
  activateView() {
    return __async(this, null, function* () {
      const leaves = this.app.workspace.getLeavesOfType(VIEW_TYPE_MP);
      if (leaves.length > 0) {
        this.app.workspace.revealLeaf(leaves[0]);
        return;
      }
      const rightLeaf = this.app.workspace.getRightLeaf(false);
      if (rightLeaf) {
        yield rightLeaf.setViewState({
          type: VIEW_TYPE_MP,
          active: true
        });
      } else {
        new import_obsidian3.Notice("\u65E0\u6CD5\u521B\u5EFA\u89C6\u56FE\u9762\u677F");
      }
    });
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic3JjL21haW4udHMiLCAic3JjL3ZpZXcudHMiLCAic3JjL2NvbnZlcnRlci50cyIsICJzcmMvY29weU1hbmFnZXIudHMiLCAic3JjL2RvbmF0ZU1hbmFnZXIudHMiLCAic3JjL3RlbXBsYXRlTWFuYWdlci50cyIsICJzcmMvc2V0dGluZ3MudHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbImltcG9ydCB7IFBsdWdpbiwgTm90aWNlIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgTVBWaWV3LCBWSUVXX1RZUEVfTVAgfSBmcm9tICcuL3ZpZXcnO1xuaW1wb3J0IHsgVGVtcGxhdGVNYW5hZ2VyIH0gZnJvbSAnLi90ZW1wbGF0ZU1hbmFnZXInO1xuaW1wb3J0IHsgU2V0dGluZ3NNYW5hZ2VyIH0gZnJvbSAnLi9zZXR0aW5ncyc7XG5pbXBvcnQgeyBNUENvbnZlcnRlciB9IGZyb20gJy4vY29udmVydGVyJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTVBQbHVnaW4gZXh0ZW5kcyBQbHVnaW4ge1xuICAgIHByaXZhdGUgc2V0dGluZ3NNYW5hZ2VyOiBTZXR0aW5nc01hbmFnZXI7XG5cbiAgICBhc3luYyBvbmxvYWQoKSB7XG4gICAgICAgIC8vIFx1NTIxRFx1NTlDQlx1NTMxNlx1OEJCRVx1N0Y2RVx1N0JBMVx1NzQwNlx1NTY2OFxuICAgICAgICB0aGlzLnNldHRpbmdzTWFuYWdlciA9IG5ldyBTZXR0aW5nc01hbmFnZXIodGhpcyk7XG4gICAgICAgIGF3YWl0IHRoaXMuc2V0dGluZ3NNYW5hZ2VyLmxvYWRTZXR0aW5ncygpO1xuXG4gICAgICAgIC8vIFx1NTIxRFx1NTlDQlx1NTMxNlx1NkEyMVx1Njc3Rlx1N0JBMVx1NzQwNlx1NTY2OFxuICAgICAgICBjb25zdCB0ZW1wbGF0ZU1hbmFnZXIgPSBuZXcgVGVtcGxhdGVNYW5hZ2VyKHRoaXMuYXBwKTtcbiAgICAgICAgXG4gICAgICAgIC8vIFx1NTIxRFx1NTlDQlx1NTMxNlx1OEY2Q1x1NjM2Mlx1NTY2OFxuICAgICAgICBNUENvbnZlcnRlci5pbml0aWFsaXplKHRoaXMuYXBwKTtcblxuICAgICAgICAvLyBcdTZDRThcdTUxOENcdTg5QzZcdTU2RkVcbiAgICAgICAgdGhpcy5yZWdpc3RlclZpZXcoXG4gICAgICAgICAgICBWSUVXX1RZUEVfTVAsXG4gICAgICAgICAgICAobGVhZikgPT4gbmV3IE1QVmlldyhsZWFmLCB0ZW1wbGF0ZU1hbmFnZXIsIHRoaXMuc2V0dGluZ3NNYW5hZ2VyKVxuICAgICAgICApO1xuXG4gICAgICAgIC8vIFx1NkRGQlx1NTJBMFx1NTQ3RFx1NEVFNFx1NTIzMFx1NTQ3RFx1NEVFNFx1OTc2Mlx1Njc3RlxuICAgICAgICB0aGlzLmFkZENvbW1hbmQoe1xuICAgICAgICAgICAgaWQ6ICdvcGVuLW1wLXByZXZpZXcnLFxuICAgICAgICAgICAgbmFtZTogJ1x1NjI1M1x1NUYwMFx1NTE2Q1x1NEYxN1x1NTNGN1x1OTg4NFx1ODlDOFx1NjNEMlx1NEVGNicsXG4gICAgICAgICAgICBjYWxsYmFjazogYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuYWN0aXZhdGVWaWV3KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIFx1NjNEMlx1NEVGNlx1NTJBMFx1OEY3RFx1NjVGNlx1ODFFQVx1NTJBOFx1NkZDMFx1NkQzQlx1ODlDNlx1NTZGRVxuICAgICAgICB0aGlzLmFwcC53b3Jrc3BhY2Uub25MYXlvdXRSZWFkeSgoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmFjdGl2YXRlVmlldygpO1xuICAgICAgICB9KTtcbiAgICAgICAgTVBDb252ZXJ0ZXIuaW5pdGlhbGl6ZSh0aGlzLmFwcCk7XG4gICAgfVxuXG4gICAgYXN5bmMgb251bmxvYWQoKSB7XG4gICAgICAgIC8vIFx1NkUwNVx1NzQwNlx1ODlDNlx1NTZGRVxuICAgICAgICB0aGlzLmFwcC53b3Jrc3BhY2UuZGV0YWNoTGVhdmVzT2ZUeXBlKFZJRVdfVFlQRV9NUCk7XG4gICAgfVxuXG4gICAgYXN5bmMgYWN0aXZhdGVWaWV3KCkge1xuICAgICAgICAvLyBcdTU5ODJcdTY3OUNcdTg5QzZcdTU2RkVcdTVERjJcdTdFQ0ZcdTVCNThcdTU3MjhcdUZGMENcdTZGQzBcdTZEM0JcdTVCODNcbiAgICAgICAgY29uc3QgbGVhdmVzID0gdGhpcy5hcHAud29ya3NwYWNlLmdldExlYXZlc09mVHlwZShWSUVXX1RZUEVfTVApO1xuICAgICAgICBpZiAobGVhdmVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5yZXZlYWxMZWFmKGxlYXZlc1swXSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBcdTUyMUJcdTVFRkFcdTY1QjBcdTg5QzZcdTU2RkVcbiAgICAgICAgY29uc3QgcmlnaHRMZWFmID0gdGhpcy5hcHAud29ya3NwYWNlLmdldFJpZ2h0TGVhZihmYWxzZSk7XG4gICAgICAgIGlmIChyaWdodExlYWYpIHtcbiAgICAgICAgICAgIGF3YWl0IHJpZ2h0TGVhZi5zZXRWaWV3U3RhdGUoe1xuICAgICAgICAgICAgICAgIHR5cGU6IFZJRVdfVFlQRV9NUCxcbiAgICAgICAgICAgICAgICBhY3RpdmU6IHRydWUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIFx1NTk4Mlx1Njc5Q1x1NjVFMFx1NkNENVx1ODNCN1x1NTNENlx1NTNGM1x1NEZBN1x1OTc2Mlx1Njc3Rlx1RkYwQ1x1NjYzRVx1NzkzQVx1OTUxOVx1OEJFRlx1NjNEMFx1NzkzQVxuICAgICAgICAgICAgbmV3IE5vdGljZSgnXHU2NUUwXHU2Q0Q1XHU1MjFCXHU1RUZBXHU4OUM2XHU1NkZFXHU5NzYyXHU2NzdGJyk7XG4gICAgICAgIH1cbiAgICB9XG59IiwgImltcG9ydCB7IEl0ZW1WaWV3LCBXb3Jrc3BhY2VMZWFmLCBNYXJrZG93blJlbmRlcmVyLCBURmlsZSB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IE1QQ29udmVydGVyIH0gZnJvbSAnLi9jb252ZXJ0ZXInO1xuaW1wb3J0IHsgQ29weU1hbmFnZXIgfSBmcm9tICcuL2NvcHlNYW5hZ2VyJztcbmltcG9ydCB0eXBlIHsgVGVtcGxhdGVNYW5hZ2VyIH0gZnJvbSAnLi90ZW1wbGF0ZU1hbmFnZXInO1xuaW1wb3J0IHsgRG9uYXRlTWFuYWdlciB9IGZyb20gJy4vZG9uYXRlTWFuYWdlcic7XG5pbXBvcnQgdHlwZSB7IFNldHRpbmdzTWFuYWdlciB9IGZyb20gJy4vc2V0dGluZ3MnO1xuZXhwb3J0IGNvbnN0IFZJRVdfVFlQRV9NUCA9ICdtcC1wcmV2aWV3JztcblxuZXhwb3J0IGNsYXNzIE1QVmlldyBleHRlbmRzIEl0ZW1WaWV3IHtcbiAgICBwcml2YXRlIHByZXZpZXdFbDogSFRNTEVsZW1lbnQ7XG4gICAgcHJpdmF0ZSBjdXJyZW50RmlsZTogVEZpbGUgfCBudWxsID0gbnVsbDtcbiAgICBwcml2YXRlIHVwZGF0ZVRpbWVyOiBOb2RlSlMuVGltZW91dCB8IG51bGwgPSBudWxsO1xuICAgIHByaXZhdGUgaXNQcmV2aWV3TG9ja2VkOiBib29sZWFuID0gZmFsc2U7XG4gICAgcHJpdmF0ZSBsb2NrQnV0dG9uOiBIVE1MQnV0dG9uRWxlbWVudDtcbiAgICBwcml2YXRlIGNvcHlCdXR0b246IEhUTUxCdXR0b25FbGVtZW50O1xuICAgIHByaXZhdGUgdGVtcGxhdGVNYW5hZ2VyOiBUZW1wbGF0ZU1hbmFnZXI7XG4gICAgcHJpdmF0ZSBzZXR0aW5nc01hbmFnZXI6IFNldHRpbmdzTWFuYWdlcjtcbiAgICBwcml2YXRlIGN1c3RvbVRlbXBsYXRlU2VsZWN0OiBIVE1MRWxlbWVudDtcbiAgICBwcml2YXRlIGN1c3RvbUZvbnRTZWxlY3Q6IEhUTUxFbGVtZW50O1xuICAgIHByaXZhdGUgZm9udFNpemVTZWxlY3Q6IEhUTUxJbnB1dEVsZW1lbnQ7XG5cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgbGVhZjogV29ya3NwYWNlTGVhZiwgXG4gICAgICAgIHRlbXBsYXRlTWFuYWdlcjogVGVtcGxhdGVNYW5hZ2VyLFxuICAgICAgICBzZXR0aW5nc01hbmFnZXI6IFNldHRpbmdzTWFuYWdlclxuICAgICkge1xuICAgICAgICBzdXBlcihsZWFmKTtcbiAgICAgICAgdGhpcy50ZW1wbGF0ZU1hbmFnZXIgPSB0ZW1wbGF0ZU1hbmFnZXI7XG4gICAgICAgIHRoaXMuc2V0dGluZ3NNYW5hZ2VyID0gc2V0dGluZ3NNYW5hZ2VyO1xuICAgIH1cblxuICAgIGdldFZpZXdUeXBlKCkge1xuICAgICAgICByZXR1cm4gVklFV19UWVBFX01QO1xuICAgIH1cblxuICAgIGdldERpc3BsYXlUZXh0KCkge1xuICAgICAgICByZXR1cm4gJ1x1NTE2Q1x1NEYxN1x1NTNGN1x1OTg4NFx1ODlDOCc7XG4gICAgfVxuXG4gICAgZ2V0SWNvbigpIHtcbiAgICAgICByZXR1cm4gJ2V5ZSc7XG4gICAgfVxuXG4gICAgLy8gXHU1NzI4IG9uT3BlbiBcdTY1QjlcdTZDRDVcdTRFMkRcdTY2RjRcdTY1QjBcdTVFOTVcdTkwRThcdTk1MDFcdTVCOUFcdTYzMDlcdTk0QUVcdTc2ODRcdTUyMUJcdTVFRkFcbiAgICBhc3luYyBvbk9wZW4oKSB7XG4gICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IHRoaXMuY29udGFpbmVyRWwuY2hpbGRyZW5bMV07XG4gICAgICAgIGNvbnRhaW5lci5lbXB0eSgpO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgdG9vbGJhciA9IGNvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdtcC10b29sYmFyJyB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIFx1OTUwMVx1NUI5QVx1NjMwOVx1OTRBRVxuICAgICAgICB0aGlzLmxvY2tCdXR0b24gPSB0b29sYmFyLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICAgICAgICBjbHM6ICdtcC1sb2NrLWJ1dHRvbicsXG4gICAgICAgICAgICBhdHRyOiB7ICdhcmlhLWxhYmVsJzogJ1x1NTE3M1x1OTVFRFx1NUI5RVx1NjVGNlx1OTg4NFx1ODlDOFx1NzJCNlx1NjAwMScgfVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5sb2NrQnV0dG9uLmlubmVySFRNTCA9ICdcdUQ4M0RcdUREMTMnO1xuICAgICAgICB0aGlzLmxvY2tCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLnRvZ2dsZVByZXZpZXdMb2NrKCkpO1xuICAgIFxuICAgICAgICAvLyBcdTUyMUJcdTVFRkFcdTRFMkRcdTk1RjRcdTYzQTdcdTRFRjZcdTVCQjlcdTU2NjhcbiAgICAgICAgY29uc3QgY29udHJvbHNHcm91cCA9IHRvb2xiYXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnbXAtY29udHJvbHMtZ3JvdXAnIH0pO1xuICAgICAgICBcbiAgICAgICAgLy8gXHU1MjFCXHU1RUZBXHU4MUVBXHU1QjlBXHU0RTQ5XHU0RTBCXHU2MkM5XHU5MDA5XHU2MkU5XHU1NjY4XG4gICAgICAgIHRoaXMuY3VzdG9tVGVtcGxhdGVTZWxlY3QgPSB0aGlzLmNyZWF0ZUN1c3RvbVNlbGVjdChcbiAgICAgICAgICAgIGNvbnRyb2xzR3JvdXAsXG4gICAgICAgICAgICAnbXAtdGVtcGxhdGUtc2VsZWN0JyxcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuZ2V0VGVtcGxhdGVPcHRpb25zKClcbiAgICAgICAgKTtcbiAgICAgICAgdGhpcy5jdXN0b21UZW1wbGF0ZVNlbGVjdC5pZCA9ICd0ZW1wbGF0ZS1zZWxlY3QnO1xuICAgICAgICBcbiAgICAgICAgLy8gXHU2REZCXHU1MkEwXHU2QTIxXHU2NzdGXHU5MDA5XHU2MkU5XHU1NjY4XHU3Njg0IGNoYW5nZSBcdTRFOEJcdTRFRjZcdTc2RDFcdTU0MkNcbiAgICAgICAgdGhpcy5jdXN0b21UZW1wbGF0ZVNlbGVjdC5xdWVyeVNlbGVjdG9yKCcuY3VzdG9tLXNlbGVjdCcpPy5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBhc3luYyAoZTogYW55KSA9PiB7XG4gICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGUuZGV0YWlsLnZhbHVlO1xuICAgICAgICAgICAgdGhpcy50ZW1wbGF0ZU1hbmFnZXIuc2V0Q3VycmVudFRlbXBsYXRlKHZhbHVlKTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuc2V0dGluZ3NNYW5hZ2VyLnVwZGF0ZVNldHRpbmdzKHtcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZUlkOiB2YWx1ZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVByZXZpZXcoKTtcbiAgICAgICAgfSk7XG4gICAgXG4gICAgICAgIHRoaXMuY3VzdG9tRm9udFNlbGVjdCA9IHRoaXMuY3JlYXRlQ3VzdG9tU2VsZWN0KFxuICAgICAgICAgICAgY29udHJvbHNHcm91cCxcbiAgICAgICAgICAgICdtcC1mb250LXNlbGVjdCcsXG4gICAgICAgICAgICB0aGlzLmdldEZvbnRPcHRpb25zKClcbiAgICAgICAgKTtcblxuICAgICAgICAvLyBcdTZERkJcdTUyQTBcdTVCNTdcdTRGNTNcdTkwMDlcdTYyRTlcdTU2NjhcdTc2ODQgY2hhbmdlIFx1NEU4Qlx1NEVGNlx1NzZEMVx1NTQyQ1xuICAgICAgICB0aGlzLmN1c3RvbUZvbnRTZWxlY3QucXVlcnlTZWxlY3RvcignLmN1c3RvbS1zZWxlY3QnKT8uYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgYXN5bmMgKGU6IGFueSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBlLmRldGFpbC52YWx1ZTtcbiAgICAgICAgICAgIHRoaXMudGVtcGxhdGVNYW5hZ2VyLnNldEZvbnQodmFsdWUpO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5zZXR0aW5nc01hbmFnZXIudXBkYXRlU2V0dGluZ3Moe1xuICAgICAgICAgICAgICAgIGZvbnRGYW1pbHk6IHZhbHVlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlUHJldmlldygpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5jdXN0b21Gb250U2VsZWN0LmlkID0gJ2ZvbnQtc2VsZWN0JztcbiAgICAgICAgLy8gXHU1QjU3XHU1M0Y3XHU4QzAzXHU2NTc0XG4gICAgICAgIGNvbnN0IGZvbnRTaXplR3JvdXAgPSBjb250cm9sc0dyb3VwLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ21wLWZvbnQtc2l6ZS1ncm91cCcgfSk7XG4gICAgICAgIGNvbnN0IGRlY3JlYXNlQnV0dG9uID0gZm9udFNpemVHcm91cC5jcmVhdGVFbCgnYnV0dG9uJywgeyBcbiAgICAgICAgICAgIGNsczogJ21wLWZvbnQtc2l6ZS1idG4nLFxuICAgICAgICAgICAgdGV4dDogJy0nXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmZvbnRTaXplU2VsZWN0ID0gZm9udFNpemVHcm91cC5jcmVhdGVFbCgnaW5wdXQnLCB7IFxuICAgICAgICAgICAgY2xzOiAnbXAtZm9udC1zaXplLWlucHV0JyxcbiAgICAgICAgICAgIHR5cGU6ICd0ZXh0JyxcbiAgICAgICAgICAgIHZhbHVlOiAnMTYnLFxuICAgICAgICAgICAgYXR0cjoge1xuICAgICAgICAgICAgICAgIHN0eWxlOiAnYm9yZGVyOiBub25lOyBvdXRsaW5lOiBub25lOyBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDsnXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBpbmNyZWFzZUJ1dHRvbiA9IGZvbnRTaXplR3JvdXAuY3JlYXRlRWwoJ2J1dHRvbicsIHsgXG4gICAgICAgICAgICBjbHM6ICdtcC1mb250LXNpemUtYnRuJyxcbiAgICAgICAgICAgIHRleHQ6ICcrJ1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBcdTRFQ0VcdThCQkVcdTdGNkVcdTRFMkRcdTYwNjJcdTU5MERcdTRFMEFcdTZCMjFcdTc2ODRcdTkwMDlcdTYyRTlcbiAgICAgICAgY29uc3Qgc2V0dGluZ3MgPSB0aGlzLnNldHRpbmdzTWFuYWdlci5nZXRTZXR0aW5ncygpO1xuICAgICAgICBcbiAgICAgICAgLy8gXHU2MDYyXHU1OTBEXHU4QkJFXHU3RjZFXG4gICAgICAgIGlmIChzZXR0aW5ncy50ZW1wbGF0ZUlkKSB7XG4gICAgICAgICAgICBjb25zdCB0ZW1wbGF0ZVNlbGVjdCA9IHRoaXMuY3VzdG9tVGVtcGxhdGVTZWxlY3QucXVlcnlTZWxlY3RvcignLnNlbGVjdGVkLXRleHQnKTtcbiAgICAgICAgICAgIGNvbnN0IHRlbXBsYXRlRHJvcGRvd24gPSB0aGlzLmN1c3RvbVRlbXBsYXRlU2VsZWN0LnF1ZXJ5U2VsZWN0b3IoJy5zZWxlY3QtZHJvcGRvd24nKTtcbiAgICAgICAgICAgIGlmICh0ZW1wbGF0ZVNlbGVjdCAmJiB0ZW1wbGF0ZURyb3Bkb3duKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgb3B0aW9uID0gYXdhaXQgdGhpcy5nZXRUZW1wbGF0ZU9wdGlvbnMoKTtcbiAgICAgICAgICAgICAgICBjb25zdCBzZWxlY3RlZCA9IG9wdGlvbi5maW5kKG8gPT4gby52YWx1ZSA9PT0gc2V0dGluZ3MudGVtcGxhdGVJZCk7XG4gICAgICAgICAgICAgICAgaWYgKHNlbGVjdGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFx1NjZGNFx1NjVCMFx1OTAwOVx1NEUyRFx1NjU4N1x1NjcyQ1x1NTQ4Q1x1NTAzQ1xuICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZVNlbGVjdC50ZXh0Q29udGVudCA9IHNlbGVjdGVkLmxhYmVsO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmN1c3RvbVRlbXBsYXRlU2VsZWN0LnF1ZXJ5U2VsZWN0b3IoJy5jdXN0b20tc2VsZWN0Jyk/LnNldEF0dHJpYnV0ZSgnZGF0YS12YWx1ZScsIHNlbGVjdGVkLnZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gXHU2NkY0XHU2NUIwXHU0RTBCXHU2MkM5XHU1MjE3XHU4ODY4XHU0RTJEXHU3Njg0XHU5MDA5XHU0RTJEXHU3MkI2XHU2MDAxXG4gICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlRHJvcGRvd24ucXVlcnlTZWxlY3RvckFsbCgnLnNlbGVjdC1pdGVtJykuZm9yRWFjaChlbCA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZWwuZ2V0QXR0cmlidXRlKCdkYXRhLXZhbHVlJykgPT09IHNlbGVjdGVkLnZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWwuY2xhc3NMaXN0LmFkZCgnc2VsZWN0ZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWwuY2xhc3NMaXN0LnJlbW92ZSgnc2VsZWN0ZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy50ZW1wbGF0ZU1hbmFnZXIuc2V0Q3VycmVudFRlbXBsYXRlKHNldHRpbmdzLnRlbXBsYXRlSWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHNldHRpbmdzLmZvbnRGYW1pbHkpIHtcbiAgICAgICAgICAgIGNvbnN0IGZvbnRTZWxlY3QgPSB0aGlzLmN1c3RvbUZvbnRTZWxlY3QucXVlcnlTZWxlY3RvcignLnNlbGVjdGVkLXRleHQnKTtcbiAgICAgICAgICAgIGNvbnN0IGZvbnREcm9wZG93biA9IHRoaXMuY3VzdG9tRm9udFNlbGVjdC5xdWVyeVNlbGVjdG9yKCcuc2VsZWN0LWRyb3Bkb3duJyk7XG4gICAgICAgICAgICBpZiAoZm9udFNlbGVjdCAmJiBmb250RHJvcGRvd24pIHtcbiAgICAgICAgICAgICAgICBjb25zdCBvcHRpb24gPSB0aGlzLmdldEZvbnRPcHRpb25zKCk7XG4gICAgICAgICAgICAgICAgY29uc3Qgc2VsZWN0ZWQgPSBvcHRpb24uZmluZChvID0+IG8udmFsdWUgPT09IHNldHRpbmdzLmZvbnRGYW1pbHkpO1xuICAgICAgICAgICAgICAgIGlmIChzZWxlY3RlZCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBcdTY2RjRcdTY1QjBcdTkwMDlcdTRFMkRcdTY1ODdcdTY3MkNcdTU0OENcdTUwM0NcbiAgICAgICAgICAgICAgICAgICAgZm9udFNlbGVjdC50ZXh0Q29udGVudCA9IHNlbGVjdGVkLmxhYmVsO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmN1c3RvbUZvbnRTZWxlY3QucXVlcnlTZWxlY3RvcignLmN1c3RvbS1zZWxlY3QnKT8uc2V0QXR0cmlidXRlKCdkYXRhLXZhbHVlJywgc2VsZWN0ZWQudmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAvLyBcdTY2RjRcdTY1QjBcdTRFMEJcdTYyQzlcdTUyMTdcdTg4NjhcdTRFMkRcdTc2ODRcdTkwMDlcdTRFMkRcdTcyQjZcdTYwMDFcbiAgICAgICAgICAgICAgICAgICAgZm9udERyb3Bkb3duLnF1ZXJ5U2VsZWN0b3JBbGwoJy5zZWxlY3QtaXRlbScpLmZvckVhY2goZWwgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVsLmdldEF0dHJpYnV0ZSgnZGF0YS12YWx1ZScpID09PSBzZWxlY3RlZC52YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsLmNsYXNzTGlzdC5hZGQoJ3NlbGVjdGVkJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsLmNsYXNzTGlzdC5yZW1vdmUoJ3NlbGVjdGVkJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMudGVtcGxhdGVNYW5hZ2VyLnNldEZvbnQoc2V0dGluZ3MuZm9udEZhbWlseSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoc2V0dGluZ3MuZm9udFNpemUpIHtcbiAgICAgICAgICAgIHRoaXMuZm9udFNpemVTZWxlY3QudmFsdWUgPSBzZXR0aW5ncy5mb250U2l6ZS50b1N0cmluZygpO1xuICAgICAgICAgICAgdGhpcy50ZW1wbGF0ZU1hbmFnZXIuc2V0Rm9udFNpemUoc2V0dGluZ3MuZm9udFNpemUpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gXHU2NkY0XHU2NUIwXHU1QjU3XHU1M0Y3XHU4QzAzXHU2NTc0XHU0RThCXHU0RUY2XG4gICAgICAgIGNvbnN0IHVwZGF0ZUZvbnRTaXplID0gYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3Qgc2l6ZSA9IHBhcnNlSW50KHRoaXMuZm9udFNpemVTZWxlY3QudmFsdWUpO1xuICAgICAgICAgICAgdGhpcy50ZW1wbGF0ZU1hbmFnZXIuc2V0Rm9udFNpemUoc2l6ZSk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnNldHRpbmdzTWFuYWdlci51cGRhdGVTZXR0aW5ncyh7XG4gICAgICAgICAgICAgICAgZm9udFNpemU6IHNpemVcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVQcmV2aWV3KCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gXHU1QjU3XHU1M0Y3XHU4QzAzXHU2NTc0XHU2MzA5XHU5NEFFXHU0RThCXHU0RUY2XG4gICAgICAgIGRlY3JlYXNlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgY3VycmVudFNpemUgPSBwYXJzZUludCh0aGlzLmZvbnRTaXplU2VsZWN0LnZhbHVlKTtcbiAgICAgICAgICAgIGlmIChjdXJyZW50U2l6ZSA+IDEyKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5mb250U2l6ZVNlbGVjdC52YWx1ZSA9IChjdXJyZW50U2l6ZSAtIDEpLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgdXBkYXRlRm9udFNpemUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgaW5jcmVhc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBjdXJyZW50U2l6ZSA9IHBhcnNlSW50KHRoaXMuZm9udFNpemVTZWxlY3QudmFsdWUpO1xuICAgICAgICAgICAgaWYgKGN1cnJlbnRTaXplIDwgMzApIHtcbiAgICAgICAgICAgICAgICB0aGlzLmZvbnRTaXplU2VsZWN0LnZhbHVlID0gKGN1cnJlbnRTaXplICsgMSkudG9TdHJpbmcoKTtcbiAgICAgICAgICAgICAgICB1cGRhdGVGb250U2l6ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLmZvbnRTaXplU2VsZWN0LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIHVwZGF0ZUZvbnRTaXplKTtcblxuICAgICAgICAvLyBcdTk4ODRcdTg5QzhcdTUzM0FcdTU3REZcbiAgICAgICAgdGhpcy5wcmV2aWV3RWwgPSBjb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnbXAtcHJldmlldy1hcmVhJyB9KTtcblxuICAgICAgICAvLyBcdTVFOTVcdTkwRThcdTVERTVcdTUxNzdcdTY4MEZcbiAgICAgICAgY29uc3QgYm90dG9tQmFyID0gY29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ21wLWJvdHRvbS1iYXInIH0pO1xuXG4gICAgICAgIC8vIFx1NkRGQlx1NTJBMFx1NEY3Rlx1NzUyOFx1OEJGNFx1NjYwRVx1NjMwOVx1OTRBRVxuICAgICAgICBjb25zdCBoZWxwQnV0dG9uID0gYm90dG9tQmFyLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICAgICAgICBjbHM6ICdtcC1oZWxwLWJ1dHRvbicsXG4gICAgICAgICAgICBhdHRyOiB7ICdhcmlhLWxhYmVsJzogJ1x1NEY3Rlx1NzUyOFx1NjMwN1x1NTM1NycgfVxuICAgICAgICB9KTtcbiAgICAgICAgaGVscEJ1dHRvbi5pbm5lckhUTUwgPSAnXHUyNzUzJztcbiAgICAgICAgXG4gICAgICAgIC8vIFx1NTIxQlx1NUVGQVx1NjNEMFx1NzkzQVx1Njg0NlxuICAgICAgICBjb25zdCB0b29sdGlwID0gYm90dG9tQmFyLmNyZWF0ZUVsKCdkaXYnLCB7XG4gICAgICAgICAgICBjbHM6ICdtcC1oZWxwLXRvb2x0aXAnLFxuICAgICAgICAgICAgdGV4dDogYFx1NEY3Rlx1NzUyOFx1NjMwN1x1NTM1N1x1RkYxQVxuICAgICAgICAgICAgICAgIDEuIFx1OTAwOVx1NjJFOVx1NTU5Q1x1NkIyMlx1NzY4NFx1NEUzQlx1OTg5OFx1NkEyMVx1Njc3RlxuICAgICAgICAgICAgICAgIDIuIFx1OEMwM1x1NjU3NFx1NUI1N1x1NEY1M1x1NTQ4Q1x1NUI1N1x1NTNGN1xuICAgICAgICAgICAgICAgIDMuIFx1NUI5RVx1NjVGNlx1OTg4NFx1ODlDOFx1NjU0OFx1Njc5Q1xuICAgICAgICAgICAgICAgIDQuIFx1NzBCOVx1NTFGQlx1MzAxMFx1NTkwRFx1NTIzNlx1NjMwOVx1OTRBRVx1MzAxMVx1NTM3M1x1NTNFRlx1N0M5OFx1OEQzNFx1NTIzMFx1NTE2Q1x1NEYxN1x1NTNGN1xuICAgICAgICAgICAgICAgIDUuIFx1N0YxNlx1OEY5MVx1NUI5RVx1NjVGNlx1NjdFNVx1NzcwQlx1NjU0OFx1Njc5Q1x1RkYwQ1x1NzBCOVx1RDgzRFx1REQxM1x1NTE3M1x1OTVFRFx1NUI5RVx1NjVGNlx1NTIzN1x1NjVCMFxuICAgICAgICAgICAgICAgIDYuIFx1NTk4Mlx1Njc5Q1x1NEY2MFx1NTU5Q1x1NkIyMlx1OEZEOVx1NEUyQVx1NjNEMlx1NEVGNlx1RkYwQ1x1NkIyMlx1OEZDRVx1NjI1M1x1OEQ0RmBcbiAgICAgICAgfSk7XG4gICAgICAgIC8vIFx1NTIxQlx1NUVGQVx1NEUyRFx1OTVGNFx1NjNBN1x1NEVGNlx1NUJCOVx1NTY2OFxuICAgICAgICBjb25zdCBib3R0b21Db250cm9sc0dyb3VwID0gYm90dG9tQmFyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ21wLWJvdHRvbS1jb250cm9scy1ncm91cCcgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBcdThCRjdcdTRGNUNcdTgwMDVcdTU1OURcdTU0OTZcdTU1NjFcdTYzMDlcdTk0QUVcbiAgICAgICAgY29uc3QgbGlrZUJ1dHRvbiA9IGJvdHRvbUNvbnRyb2xzR3JvdXAuY3JlYXRlRWwoJ2J1dHRvbicsIHsgXG4gICAgICAgICAgICBjbHM6ICdtcC1saWtlLWJ1dHRvbidcbiAgICAgICAgfSk7XG4gICAgICAgIGxpa2VCdXR0b24uaW5uZXJIVE1MID0gJzxzcGFuIHN0eWxlPVwibWFyZ2luLXJpZ2h0OiA0cHhcIj5cdTI2MTVcdUZFMEY8L3NwYW4+XHU4QkY3XHU0RjVDXHU4MDA1XHU1NTlEXHU1NDk2XHU1NTYxJztcbiAgICAgICAgbGlrZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgIERvbmF0ZU1hbmFnZXIuc2hvd0RvbmF0ZU1vZGFsKHRoaXMuY29udGFpbmVyRWwpO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBcdTU3MjhcdTYzQTdcdTRFRjZcdTVCQjlcdTU2NjhcdTRFMkRcdTUyMUJcdTVFRkFcdTYzMDlcdTk0QUVcbiAgICAgICAgdGhpcy5jb3B5QnV0dG9uID0gYm90dG9tQ29udHJvbHNHcm91cC5jcmVhdGVFbCgnYnV0dG9uJywgeyBcbiAgICAgICAgICAgIHRleHQ6ICdcdTU5MERcdTUyMzZcdTRFM0FcdTUxNkNcdTRGMTdcdTUzRjdcdTY4M0NcdTVGMEYnLFxuICAgICAgICAgICAgY2xzOiAnbXAtY29weS1idXR0b24nXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IG5ld0J1dHRvbiA9IGJvdHRvbUNvbnRyb2xzR3JvdXAuY3JlYXRlRWwoJ2J1dHRvbicsIHsgXG4gICAgICAgICAgICB0ZXh0OiAnXHU2NTZDXHU4QkY3XHU2NzFGXHU1Rjg1JyxcbiAgICAgICAgICAgIGNsczogJ21wLW5ldy1idXR0b24nXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIFx1NkRGQlx1NTJBMFx1NTkwRFx1NTIzNlx1NjMwOVx1OTRBRVx1NzBCOVx1NTFGQlx1NEU4Qlx1NEVGNlxuICAgICAgICB0aGlzLmNvcHlCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5wcmV2aWV3RWwpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvcHlCdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHRoaXMuY29weUJ1dHRvbi5zZXRUZXh0KCdcdTU5MERcdTUyMzZcdTRFMkQuLi4nKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBDb3B5TWFuYWdlci5jb3B5VG9DbGlwYm9hcmQodGhpcy5wcmV2aWV3RWwpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvcHlCdXR0b24uc2V0VGV4dCgnXHU1OTBEXHU1MjM2XHU2MjEwXHU1MjlGJyk7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29weUJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb3B5QnV0dG9uLnNldFRleHQoJ1x1NTkwRFx1NTIzNlx1NEUzQVx1NTE2Q1x1NEYxN1x1NTNGN1x1NjgzQ1x1NUYwRicpO1xuICAgICAgICAgICAgICAgICAgICB9LCAyMDAwKTtcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvcHlCdXR0b24uc2V0VGV4dCgnXHU1OTBEXHU1MjM2XHU1OTMxXHU4RDI1Jyk7XG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb3B5QnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvcHlCdXR0b24uc2V0VGV4dCgnXHU1OTBEXHU1MjM2XHU0RTNBXHU1MTZDXHU0RjE3XHU1M0Y3XHU2ODNDXHU1RjBGJyk7XG4gICAgICAgICAgICAgICAgICAgIH0sIDIwMDApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gXHU3NkQxXHU1NDJDXHU2NTg3XHU2ODYzXHU1M0Q4XHU1MzE2XG4gICAgICAgIHRoaXMucmVnaXN0ZXJFdmVudChcbiAgICAgICAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5vbignZmlsZS1vcGVuJywgdGhpcy5vbkZpbGVPcGVuLmJpbmQodGhpcykpXG4gICAgICAgICk7XG5cbiAgICAgICAgLy8gXHU3NkQxXHU1NDJDXHU2NTg3XHU2ODYzXHU1MTg1XHU1QkI5XHU1M0Q4XHU1MzE2XG4gICAgICAgIHRoaXMucmVnaXN0ZXJFdmVudChcbiAgICAgICAgICAgIHRoaXMuYXBwLnZhdWx0Lm9uKCdtb2RpZnknLCB0aGlzLm9uRmlsZU1vZGlmeS5iaW5kKHRoaXMpKVxuICAgICAgICApO1xuXG4gICAgICAgIC8vIFx1NjhDMFx1NjdFNVx1NUY1M1x1NTI0RFx1NjI1M1x1NUYwMFx1NzY4NFx1NjU4N1x1NEVGNlxuICAgICAgICBjb25zdCBjdXJyZW50RmlsZSA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk7XG4gICAgICAgIGF3YWl0IHRoaXMub25GaWxlT3BlbihjdXJyZW50RmlsZSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSB1cGRhdGVDb250cm9sc1N0YXRlKGVuYWJsZWQ6IGJvb2xlYW4pIHtcbiAgICAgICAgdGhpcy5sb2NrQnV0dG9uLmRpc2FibGVkID0gIWVuYWJsZWQ7XG4gICAgICAgIC8vIFx1NjZGNFx1NjVCMFx1ODFFQVx1NUI5QVx1NEU0OVx1OTAwOVx1NjJFOVx1NTY2OFx1NzY4NFx1Nzk4MVx1NzUyOFx1NzJCNlx1NjAwMVxuICAgICAgICBjb25zdCB0ZW1wbGF0ZVNlbGVjdCA9IHRoaXMuY3VzdG9tVGVtcGxhdGVTZWxlY3QucXVlcnlTZWxlY3RvcignLmN1c3RvbS1zZWxlY3QnKTtcbiAgICAgICAgY29uc3QgZm9udFNlbGVjdCA9IHRoaXMuY3VzdG9tRm9udFNlbGVjdC5xdWVyeVNlbGVjdG9yKCcuY3VzdG9tLXNlbGVjdCcpO1xuICAgICAgICBpZiAodGVtcGxhdGVTZWxlY3QpIHtcbiAgICAgICAgICAgIHRlbXBsYXRlU2VsZWN0LmNsYXNzTGlzdC50b2dnbGUoJ2Rpc2FibGVkJywgIWVuYWJsZWQpO1xuICAgICAgICAgICAgLy8gXHU0RjdGXHU3NTI4c2V0QXR0cmlidXRlXHU2NzY1XHU4QkJFXHU3RjZFc3R5bGVcdTVDNUVcdTYwMjdcbiAgICAgICAgICAgIHRlbXBsYXRlU2VsZWN0LnNldEF0dHJpYnV0ZSgnc3R5bGUnLCBgcG9pbnRlci1ldmVudHM6ICR7ZW5hYmxlZCA/ICdhdXRvJyA6ICdub25lJ31gKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZm9udFNlbGVjdCkge1xuICAgICAgICAgICAgZm9udFNlbGVjdC5jbGFzc0xpc3QudG9nZ2xlKCdkaXNhYmxlZCcsICFlbmFibGVkKTtcbiAgICAgICAgICAgIC8vIFx1NEY3Rlx1NzUyOHNldEF0dHJpYnV0ZVx1Njc2NVx1OEJCRVx1N0Y2RXN0eWxlXHU1QzVFXHU2MDI3XG4gICAgICAgICAgICBmb250U2VsZWN0LnNldEF0dHJpYnV0ZSgnc3R5bGUnLCBgcG9pbnRlci1ldmVudHM6ICR7ZW5hYmxlZCA/ICdhdXRvJyA6ICdub25lJ31gKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmZvbnRTaXplU2VsZWN0LmRpc2FibGVkID0gIWVuYWJsZWQ7XG4gICAgICAgIHRoaXMuY29weUJ1dHRvbi5kaXNhYmxlZCA9ICFlbmFibGVkO1xuICAgICAgICBcbiAgICAgICAgLy8gXHU2REZCXHU1MkEwXHU1QjU3XHU1M0Y3XHU4QzAzXHU4MjgyXHU2MzA5XHU5NEFFXHU3Njg0XHU3MkI2XHU2MDAxXHU2M0E3XHU1MjM2XG4gICAgICAgIGNvbnN0IGZvbnRTaXplQnV0dG9ucyA9IHRoaXMuY29udGFpbmVyRWwucXVlcnlTZWxlY3RvckFsbCgnLm1wLWZvbnQtc2l6ZS1idG4nKTtcbiAgICAgICAgZm9udFNpemVCdXR0b25zLmZvckVhY2goYnV0dG9uID0+IHtcbiAgICAgICAgICAgIChidXR0b24gYXMgSFRNTEJ1dHRvbkVsZW1lbnQpLmRpc2FibGVkID0gIWVuYWJsZWQ7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGFzeW5jIG9uRmlsZU9wZW4oZmlsZTogVEZpbGUgfCBudWxsKSB7XG4gICAgICAgIHRoaXMuY3VycmVudEZpbGUgPSBmaWxlO1xuICAgICAgICBpZiAoIWZpbGUgfHwgZmlsZS5leHRlbnNpb24gIT09ICdtZCcpIHtcbiAgICAgICAgICAgIHRoaXMucHJldmlld0VsLmVtcHR5KCk7XG4gICAgICAgICAgICB0aGlzLnByZXZpZXdFbC5jcmVhdGVFbCgnZGl2Jywge1xuICAgICAgICAgICAgICAgIHRleHQ6ICdcdTUzRUFcdTgwRkRcdTk4ODRcdTg5QzggTWFya2Rvd24gXHU2NTg3XHU2NzJDXHU2NTg3XHU2ODYzJyxcbiAgICAgICAgICAgICAgICBjbHM6ICdtcC1lbXB0eS1tZXNzYWdlJ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUNvbnRyb2xzU3RhdGUoZmFsc2UpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy51cGRhdGVDb250cm9sc1N0YXRlKHRydWUpO1xuICAgICAgICB0aGlzLmlzUHJldmlld0xvY2tlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLmxvY2tCdXR0b24uaW5uZXJIVE1MID0gJ1x1RDgzRFx1REQxMyc7XG4gICAgICAgIGF3YWl0IHRoaXMudXBkYXRlUHJldmlldygpO1xuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgdG9nZ2xlUHJldmlld0xvY2soKSB7XG4gICAgICAgIHRoaXMuaXNQcmV2aWV3TG9ja2VkID0gIXRoaXMuaXNQcmV2aWV3TG9ja2VkO1xuICAgICAgICBjb25zdCBsb2NrSWNvbiA9IHRoaXMuaXNQcmV2aWV3TG9ja2VkID8gJ1x1RDgzRFx1REQxMicgOiAnXHVEODNEXHVERDEzJztcbiAgICAgICAgY29uc3QgbG9ja1N0YXR1cyA9IHRoaXMuaXNQcmV2aWV3TG9ja2VkID8gJ1x1NUYwMFx1NTQyRlx1NUI5RVx1NjVGNlx1OTg4NFx1ODlDOFx1NzJCNlx1NjAwMScgOiAnXHU1MTczXHU5NUVEXHU1QjlFXHU2NUY2XHU5ODg0XHU4OUM4XHU3MkI2XHU2MDAxJztcbiAgICAgICAgdGhpcy5sb2NrQnV0dG9uLmlubmVySFRNTCA9IGxvY2tJY29uO1xuICAgICAgICB0aGlzLmxvY2tCdXR0b24uc2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsJywgbG9ja1N0YXR1cyk7XG4gICAgICAgIFxuICAgICAgICBpZiAoIXRoaXMuaXNQcmV2aWV3TG9ja2VkKSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZVByZXZpZXcoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFzeW5jIG9uRmlsZU1vZGlmeShmaWxlOiBURmlsZSkge1xuICAgICAgICBpZiAoZmlsZSA9PT0gdGhpcy5jdXJyZW50RmlsZSAmJiAhdGhpcy5pc1ByZXZpZXdMb2NrZWQpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnVwZGF0ZVRpbWVyKSB7XG4gICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMudXBkYXRlVGltZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVQcmV2aWV3KCk7XG4gICAgICAgICAgICB9LCA1MDApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgYXN5bmMgdXBkYXRlUHJldmlldygpIHtcbiAgICAgICAgaWYgKCF0aGlzLmN1cnJlbnRGaWxlKSByZXR1cm47XG5cbiAgICAgICAgdGhpcy5wcmV2aWV3RWwuZW1wdHkoKTtcbiAgICAgICAgY29uc3QgY29udGVudCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LnJlYWQodGhpcy5jdXJyZW50RmlsZSk7XG4gICAgICAgIFxuICAgICAgICAvLyAxLiBcdTUxNDhcdThGNkNcdTYzNjIgTWFya2Rvd24gXHU0RTNBIEhUTUxcbiAgICAgICAgYXdhaXQgTWFya2Rvd25SZW5kZXJlci5yZW5kZXJNYXJrZG93bihcbiAgICAgICAgICAgIGNvbnRlbnQsXG4gICAgICAgICAgICB0aGlzLnByZXZpZXdFbCxcbiAgICAgICAgICAgIHRoaXMuY3VycmVudEZpbGUucGF0aCxcbiAgICAgICAgICAgIHRoaXNcbiAgICAgICAgKTtcblxuICAgICAgICAvLyAyLiBcdTY4M0NcdTVGMEZcdTUzMTZcdTUxODVcdTVCQjlcbiAgICAgICAgTVBDb252ZXJ0ZXIuZm9ybWF0Q29udGVudCh0aGlzLnByZXZpZXdFbCk7XG5cbiAgICAgICAgLy8gMy4gXHU1RTk0XHU3NTI4XHU2QTIxXHU2NzdGXHU2ODM3XHU1RjBGXG4gICAgICAgIHRoaXMudGVtcGxhdGVNYW5hZ2VyLmFwcGx5VGVtcGxhdGUodGhpcy5wcmV2aWV3RWwpO1xuICAgIH1cblxuICAgIC8vIFx1NkRGQlx1NTJBMFx1ODFFQVx1NUI5QVx1NEU0OVx1NEUwQlx1NjJDOVx1OTAwOVx1NjJFOVx1NTY2OFx1NTIxQlx1NUVGQVx1NjVCOVx1NkNENVxuICAgIHByaXZhdGUgY3JlYXRlQ3VzdG9tU2VsZWN0KFxuICAgICAgICBwYXJlbnQ6IEhUTUxFbGVtZW50LFxuICAgICAgICBjbGFzc05hbWU6IHN0cmluZyxcbiAgICAgICAgb3B0aW9uczogeyB2YWx1ZTogc3RyaW5nOyBsYWJlbDogc3RyaW5nIH1bXVxuICAgICkge1xuICAgICAgICBjb25zdCBjb250YWluZXIgPSBwYXJlbnQuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnY3VzdG9tLXNlbGVjdC1jb250YWluZXInIH0pO1xuICAgICAgICBjb25zdCBzZWxlY3QgPSBjb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnY3VzdG9tLXNlbGVjdCcgfSk7XG4gICAgICAgIGNvbnN0IHNlbGVjdGVkVGV4dCA9IHNlbGVjdC5jcmVhdGVFbCgnc3BhbicsIHsgY2xzOiAnc2VsZWN0ZWQtdGV4dCcgfSk7XG4gICAgICAgIGNvbnN0IGFycm93ID0gc2VsZWN0LmNyZWF0ZUVsKCdzcGFuJywgeyBjbHM6ICdzZWxlY3QtYXJyb3cnLCB0ZXh0OiAnXHUyNUJFJyB9KTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGRyb3Bkb3duID0gY29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ3NlbGVjdC1kcm9wZG93bicgfSk7XG4gICAgICAgIFxuICAgICAgICBvcHRpb25zLmZvckVhY2gob3B0aW9uID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGl0ZW0gPSBkcm9wZG93bi5jcmVhdGVFbCgnZGl2Jywge1xuICAgICAgICAgICAgICAgIGNsczogJ3NlbGVjdC1pdGVtJyxcbiAgICAgICAgICAgICAgICB0ZXh0OiBvcHRpb24ubGFiZWxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpdGVtLmRhdGFzZXQudmFsdWUgPSBvcHRpb24udmFsdWU7XG4gICAgICAgICAgICBpdGVtLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIC8vIFx1NzlGQlx1OTY2NFx1NTE3Nlx1NEVENlx1OTg3OVx1NzY4NFx1OTAwOVx1NEUyRFx1NzJCNlx1NjAwMVxuICAgICAgICAgICAgICAgIGRyb3Bkb3duLnF1ZXJ5U2VsZWN0b3JBbGwoJy5zZWxlY3QtaXRlbScpLmZvckVhY2goZWwgPT4gXG4gICAgICAgICAgICAgICAgICAgIGVsLmNsYXNzTGlzdC5yZW1vdmUoJ3NlbGVjdGVkJykpO1xuICAgICAgICAgICAgICAgIC8vIFx1NkRGQlx1NTJBMFx1NUY1M1x1NTI0RFx1OTg3OVx1NzY4NFx1OTAwOVx1NEUyRFx1NzJCNlx1NjAwMVxuICAgICAgICAgICAgICAgIGl0ZW0uY2xhc3NMaXN0LmFkZCgnc2VsZWN0ZWQnKTtcbiAgICAgICAgICAgICAgICBzZWxlY3RlZFRleHQudGV4dENvbnRlbnQgPSBvcHRpb24ubGFiZWw7XG4gICAgICAgICAgICAgICAgc2VsZWN0LmRhdGFzZXQudmFsdWUgPSBvcHRpb24udmFsdWU7XG4gICAgICAgICAgICAgICAgZHJvcGRvd24uY2xhc3NMaXN0LnJlbW92ZSgnc2hvdycpO1xuICAgICAgICAgICAgICAgIHNlbGVjdC5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudCgnY2hhbmdlJywge1xuICAgICAgICAgICAgICAgICAgICBkZXRhaWw6IHsgdmFsdWU6IG9wdGlvbi52YWx1ZSB9XG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgLy8gXHU4QkJFXHU3RjZFXHU5RUQ4XHU4QkE0XHU1MDNDXHU1NDhDXHU5MDA5XHU0RTJEXHU3MkI2XHU2MDAxXG4gICAgICAgIGlmIChvcHRpb25zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHNlbGVjdGVkVGV4dC50ZXh0Q29udGVudCA9IG9wdGlvbnNbMF0ubGFiZWw7XG4gICAgICAgICAgICBzZWxlY3QuZGF0YXNldC52YWx1ZSA9IG9wdGlvbnNbMF0udmFsdWU7XG4gICAgICAgICAgICBkcm9wZG93bi5xdWVyeVNlbGVjdG9yKCcuc2VsZWN0LWl0ZW0nKT8uY2xhc3NMaXN0LmFkZCgnc2VsZWN0ZWQnKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gXHU3MEI5XHU1MUZCXHU2NjNFXHU3OTNBL1x1OTY5MFx1ODVDRlx1NEUwQlx1NjJDOVx1NTIxN1x1ODg2OFxuICAgICAgICBzZWxlY3QuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgIGRyb3Bkb3duLmNsYXNzTGlzdC50b2dnbGUoJ3Nob3cnKTtcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBcdTcwQjlcdTUxRkJcdTUxNzZcdTRFRDZcdTU3MzBcdTY1QjlcdTUxNzNcdTk1RURcdTRFMEJcdTYyQzlcdTUyMTdcdTg4NjhcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICBkcm9wZG93bi5jbGFzc0xpc3QucmVtb3ZlKCdzaG93Jyk7XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIGNvbnRhaW5lcjtcbiAgICB9XG5cbiAgICAvLyBcdTgzQjdcdTUzRDZcdTZBMjFcdTY3N0ZcdTkwMDlcdTk4NzlcbiAgICBwcml2YXRlIGFzeW5jIGdldFRlbXBsYXRlT3B0aW9ucygpIHtcbiAgICAgICAgYXdhaXQgdGhpcy50ZW1wbGF0ZU1hbmFnZXIubG9hZFRlbXBsYXRlcygpO1xuICAgICAgICBjb25zdCB0ZW1wbGF0ZXMgPSB0aGlzLnRlbXBsYXRlTWFuYWdlci5nZXRBbGxUZW1wbGF0ZXMoKTtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiB0ZW1wbGF0ZXMubGVuZ3RoID4gMFxuICAgICAgICAgICAgPyB0ZW1wbGF0ZXMubWFwKHQgPT4gKHsgdmFsdWU6IHQuaWQsIGxhYmVsOiB0Lm5hbWUgfSkpXG4gICAgICAgICAgICA6IFt7IHZhbHVlOiAnZGVmYXVsdCcsIGxhYmVsOiAnXHU5RUQ4XHU4QkE0XHU2QTIxXHU2NzdGJyB9XTtcbiAgICB9XG5cbiAgICAvLyBcdTgzQjdcdTUzRDZcdTVCNTdcdTRGNTNcdTkwMDlcdTk4NzlcbiAgICBwcml2YXRlIGdldEZvbnRPcHRpb25zKCkge1xuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgeyBcbiAgICAgICAgICAgICAgICB2YWx1ZTogJ09wdGltYS1SZWd1bGFyLCBPcHRpbWEsIFBpbmdGYW5nU0MtbGlnaHQsIFBpbmdGYW5nVEMtbGlnaHQsIFwiUGluZ0ZhbmcgU0NcIiwgQ2FtYnJpYSwgQ29jaGluLCBHZW9yZ2lhLCBUaW1lcywgXCJUaW1lcyBOZXcgUm9tYW5cIiwgc2VyaWYnLFxuICAgICAgICAgICAgICAgIGxhYmVsOiAnXHU5RUQ4XHU4QkE0XHU1QjU3XHU0RjUzJ1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHsgXG4gICAgICAgICAgICAgICAgdmFsdWU6ICdTaW1TdW4sIFwiXHU1QjhCXHU0RjUzXCIsIHNlcmlmJyxcbiAgICAgICAgICAgICAgICBsYWJlbDogJ1x1NUI4Qlx1NEY1MydcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7IFxuICAgICAgICAgICAgICAgIHZhbHVlOiAnU2ltSGVpLCBcIlx1OUVEMVx1NEY1M1wiLCBzYW5zLXNlcmlmJyxcbiAgICAgICAgICAgICAgICBsYWJlbDogJ1x1OUVEMVx1NEY1MydcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7IFxuICAgICAgICAgICAgICAgIHZhbHVlOiAnS2FpVGksIFwiXHU2OTc3XHU0RjUzXCIsIHNlcmlmJyxcbiAgICAgICAgICAgICAgICBsYWJlbDogJ1x1Njk3N1x1NEY1MydcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7IFxuICAgICAgICAgICAgICAgIHZhbHVlOiAnXCJNaWNyb3NvZnQgWWFIZWlcIiwgXCJcdTVGQUVcdThGNkZcdTk2QzVcdTlFRDFcIiwgc2Fucy1zZXJpZicsXG4gICAgICAgICAgICAgICAgbGFiZWw6ICdcdTk2QzVcdTlFRDEnXG4gICAgICAgICAgICB9XG4gICAgICAgIF07XG4gICAgfVxufSIsICJpbXBvcnQgeyBBcHAgfSBmcm9tICdvYnNpZGlhbic7XG5cbmV4cG9ydCBjbGFzcyBNUENvbnZlcnRlciB7XG4gICAgcHJpdmF0ZSBzdGF0aWMgYXBwOiBBcHA7XG5cbiAgICBzdGF0aWMgaW5pdGlhbGl6ZShhcHA6IEFwcCkge1xuICAgICAgICB0aGlzLmFwcCA9IGFwcDtcbiAgICB9XG5cbiAgICBzdGF0aWMgZm9ybWF0Q29udGVudChlbGVtZW50OiBIVE1MRWxlbWVudCk6IHZvaWQge1xuICAgICAgICAvLyBcdTUyMUJcdTVFRkFcdTg4NjhcdTY4M0NcdTUzMDVcdTg4RjlcbiAgICAgICAgY29uc3QgdGFibGUgPSB0aGlzLmNyZWF0ZVdyYXBwZXJUYWJsZShlbGVtZW50KTtcbiAgICAgICAgXG4gICAgICAgIC8vIFx1NTkwNFx1NzQwNlx1NTQwNFx1NzlDRCBNYXJrZG93biBcdTUxNDNcdTdEMjBcbiAgICAgICAgdGhpcy5wcm9jZXNzRWxlbWVudHModGFibGUucXVlcnlTZWxlY3RvcigndGQnKSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzdGF0aWMgY3JlYXRlV3JhcHBlclRhYmxlKGVsZW1lbnQ6IEhUTUxFbGVtZW50KTogSFRNTFRhYmxlRWxlbWVudCB7XG4gICAgICAgIGNvbnN0IHRhYmxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGFibGUnKTtcbiAgICAgICAgY29uc3QgdGJvZHkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0Ym9keScpO1xuICAgICAgICBjb25zdCB0ciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RyJyk7XG4gICAgICAgIGNvbnN0IHRkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGQnKTtcblxuICAgICAgICB0YWJsZS5zdHlsZS53aWR0aCA9ICcxMDAlJztcbiAgICAgICAgdGFibGUuc3R5bGUuYm9yZGVyQ29sbGFwc2UgPSAnY29sbGFwc2UnO1xuICAgICAgICB0ZC5zdHlsZS53b3JkQnJlYWsgPSAnYnJlYWstYWxsJztcblxuICAgICAgICB3aGlsZSAoZWxlbWVudC5maXJzdENoaWxkKSB7XG4gICAgICAgICAgICB0ZC5hcHBlbmRDaGlsZChlbGVtZW50LmZpcnN0Q2hpbGQpO1xuICAgICAgICB9XG5cbiAgICAgICAgdHIuYXBwZW5kQ2hpbGQodGQpO1xuICAgICAgICB0Ym9keS5hcHBlbmRDaGlsZCh0cik7XG4gICAgICAgIHRhYmxlLmFwcGVuZENoaWxkKHRib2R5KTtcbiAgICAgICAgZWxlbWVudC5hcHBlbmRDaGlsZCh0YWJsZSk7XG5cbiAgICAgICAgcmV0dXJuIHRhYmxlO1xuICAgIH1cblxuICAgIHByaXZhdGUgc3RhdGljIHByb2Nlc3NFbGVtZW50cyhjb250YWluZXI6IEhUTUxFbGVtZW50IHwgbnVsbCk6IHZvaWQge1xuICAgICAgICBpZiAoIWNvbnRhaW5lcikgcmV0dXJuO1xuXG4gICAgICAgIC8vIFx1NTkwNFx1NzQwNlx1NUYzQVx1OEMwM1x1NjU4N1x1NjcyQ1xuICAgICAgICBjb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnc3Ryb25nLCBlbScpLmZvckVhY2goZWwgPT4ge1xuICAgICAgICAgICAgKGVsIGFzIEhUTUxFbGVtZW50KS5zdHlsZS5kaXNwbGF5ID0gJ2lubGluZSc7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIFx1NTkwNFx1NzQwNlx1OTRGRVx1NjNBNVxuICAgICAgICBjb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnYScpLmZvckVhY2goZWwgPT4ge1xuICAgICAgICAgICAgKGVsIGFzIEhUTUxFbGVtZW50KS5zdHlsZS5jb2xvciA9ICcjNTc2Yjk1JztcbiAgICAgICAgICAgIChlbCBhcyBIVE1MRWxlbWVudCkuc3R5bGUudGV4dERlY29yYXRpb24gPSAnbm9uZSc7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIFx1NTkwNFx1NzQwNlx1ODg2OFx1NjgzQ1xuICAgICAgICBjb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgndGFibGUnKS5mb3JFYWNoKGVsID0+IHtcbiAgICAgICAgICAgIGlmIChlbCA9PT0gY29udGFpbmVyLmNsb3Nlc3QoJ3RhYmxlJykpIHJldHVybjtcbiAgICAgICAgICAgIChlbCBhcyBIVE1MVGFibGVFbGVtZW50KS5zdHlsZS5ib3JkZXJDb2xsYXBzZSA9ICdjb2xsYXBzZSc7XG4gICAgICAgICAgICAoZWwgYXMgSFRNTFRhYmxlRWxlbWVudCkuc3R5bGUubWFyZ2luID0gJzFlbSAwJztcbiAgICAgICAgICAgIChlbCBhcyBIVE1MVGFibGVFbGVtZW50KS5zdHlsZS53aWR0aCA9ICcxMDAlJztcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gXHU1OTA0XHU3NDA2XHU4ODY4XHU2ODNDXHU1MzU1XHU1MTQzXHU2ODNDXG4gICAgICAgIGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCd0aCwgdGQnKS5mb3JFYWNoKGVsID0+IHtcbiAgICAgICAgICAgIGlmIChlbCA9PT0gY29udGFpbmVyLmNsb3Nlc3QoJ3RkJykpIHJldHVybjtcbiAgICAgICAgICAgIChlbCBhcyBIVE1MVGFibGVDZWxsRWxlbWVudCkuc3R5bGUuYm9yZGVyID0gJzFweCBzb2xpZCAjZGZkZmRmJztcbiAgICAgICAgICAgIChlbCBhcyBIVE1MVGFibGVDZWxsRWxlbWVudCkuc3R5bGUucGFkZGluZyA9ICc4cHgnO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBcdTU5MDRcdTc0MDZcdTUyMDZcdTUyNzJcdTdFQkZcbiAgICAgICAgY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJ2hyJykuZm9yRWFjaChlbCA9PiB7XG4gICAgICAgICAgICAoZWwgYXMgSFRNTEVsZW1lbnQpLnN0eWxlLmJvcmRlciA9ICdub25lJztcbiAgICAgICAgICAgIChlbCBhcyBIVE1MRWxlbWVudCkuc3R5bGUuYm9yZGVyVG9wID0gJzFweCBzb2xpZCAjZGZkZmRmJztcbiAgICAgICAgICAgIChlbCBhcyBIVE1MRWxlbWVudCkuc3R5bGUubWFyZ2luID0gJzIwcHggMCc7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIFx1NTkwNFx1NzQwNlx1NTIyMFx1OTY2NFx1N0VCRlxuICAgICAgICBjb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnZGVsJykuZm9yRWFjaChlbCA9PiB7XG4gICAgICAgICAgICAoZWwgYXMgSFRNTEVsZW1lbnQpLnN0eWxlLnRleHREZWNvcmF0aW9uID0gJ2xpbmUtdGhyb3VnaCc7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIFx1NTkwNFx1NzQwNlx1NEVGQlx1NTJBMVx1NTIxN1x1ODg2OFxuICAgICAgICBjb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnLnRhc2stbGlzdC1pdGVtJykuZm9yRWFjaChlbCA9PiB7XG4gICAgICAgICAgICAoZWwgYXMgSFRNTEVsZW1lbnQpLnN0eWxlLmxpc3RTdHlsZSA9ICdub25lJztcbiAgICAgICAgICAgIGNvbnN0IGNoZWNrYm94ID0gZWwucXVlcnlTZWxlY3RvcignaW5wdXRbdHlwZT1cImNoZWNrYm94XCJdJyk7XG4gICAgICAgICAgICBpZiAoY2hlY2tib3gpIHtcbiAgICAgICAgICAgICAgICAoY2hlY2tib3ggYXMgSFRNTEVsZW1lbnQpLnN0eWxlLm1hcmdpblJpZ2h0ID0gJzZweCc7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIFx1NTkwNFx1NzQwNlx1ODExQVx1NkNFOFxuICAgICAgICBjb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnLmZvb3Rub3RlLXJlZiwgLmZvb3Rub3RlLWJhY2tyZWYnKS5mb3JFYWNoKGVsID0+IHtcbiAgICAgICAgICAgIChlbCBhcyBIVE1MRWxlbWVudCkuc3R5bGUuY29sb3IgPSAnIzU3NmI5NSc7XG4gICAgICAgICAgICAoZWwgYXMgSFRNTEVsZW1lbnQpLnN0eWxlLnRleHREZWNvcmF0aW9uID0gJ25vbmUnO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBcdTU5MDRcdTc0MDZcdTRFRTNcdTc4MDFcdTU3NTdcbiAgICAgICAgY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJ3ByZSBjb2RlJykuZm9yRWFjaChlbCA9PiB7XG4gICAgICAgICAgICBjb25zdCBwcmUgPSBlbC5wYXJlbnRFbGVtZW50O1xuICAgICAgICAgICAgaWYgKHByZSkge1xuICAgICAgICAgICAgICAgIC8vIFx1NkRGQlx1NTJBMCBtYWNPUyBcdTk4Q0VcdTY4M0NcdTc2ODRcdTdBOTdcdTUzRTNcdTYzMDlcdTk0QUVcbiAgICAgICAgICAgICAgICBjb25zdCBkb3RzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICAgICAgZG90cy5zdHlsZS5jc3NUZXh0ID0gYFxuICAgICAgICAgICAgICAgICAgICBtYXJnaW46IDhweCAwIDEycHggMDtcbiAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICAgICAgICAgICAgZ2FwOiA2cHg7XG4gICAgICAgICAgICAgICAgYDtcblxuICAgICAgICAgICAgICAgIGNvbnN0IGNvbG9ycyA9IFsnI2ZmNWY1NicsICcjZmZiZDJlJywgJyMyN2M5M2YnXTtcbiAgICAgICAgICAgICAgICBjb2xvcnMuZm9yRWFjaChjb2xvciA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGRvdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcbiAgICAgICAgICAgICAgICAgICAgZG90LnN0eWxlLmNzc1RleHQgPSBgXG4gICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogMTJweDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogMTJweDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDUwJTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICR7Y29sb3J9O1xuICAgICAgICAgICAgICAgICAgICBgO1xuICAgICAgICAgICAgICAgICAgICBkb3RzLmFwcGVuZENoaWxkKGRvdCk7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAvLyBcdTVDMDZcdTdFQTJcdTdFRkZcdTcwNkZcdTYzRDJcdTUxNjVcdTUyMzBcdTRFRTNcdTc4MDFcdTU3NTdcdTc2ODRcdTY3MDBcdTUyNERcdTk3NjJcbiAgICAgICAgICAgICAgICBwcmUuaW5zZXJ0QmVmb3JlKGRvdHMsIHByZS5maXJzdENoaWxkKTtcbiAgICAgICAgICAgICAgICBwcmUuc3R5bGUucGFkZGluZ1RvcCA9ICczMnB4JztcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBcdTc5RkJcdTk2NjRcdTUzOUZcdTY3MDlcdTc2ODRcdTU5MERcdTUyMzZcdTYzMDlcdTk0QUVcbiAgICAgICAgICAgICAgICBjb25zdCBjb3B5QnV0dG9uID0gcHJlLnF1ZXJ5U2VsZWN0b3IoJy5jb3B5LWNvZGUtYnV0dG9uJyk7XG4gICAgICAgICAgICAgICAgaWYgKGNvcHlCdXR0b24pIHtcbiAgICAgICAgICAgICAgICAgICAgY29weUJ1dHRvbi5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIFx1NTkwNFx1NzQwNlx1NTZGRVx1NzI0N1xuICAgICAgICBjb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnc3Bhbi5pbnRlcm5hbC1lbWJlZFthbHRdW3NyY10nKS5mb3JFYWNoKGFzeW5jIGVsID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG9yaWdpbmFsU3BhbiA9IGVsIGFzIEhUTUxFbGVtZW50O1xuICAgICAgICAgICAgY29uc3Qgc3JjID0gb3JpZ2luYWxTcGFuLmdldEF0dHJpYnV0ZSgnc3JjJyk7XG4gICAgICAgICAgICBjb25zdCBhbHQgPSBvcmlnaW5hbFNwYW4uZ2V0QXR0cmlidXRlKCdhbHQnKTtcbiAgICAgICAgICAgIGNvbnN0IHBhcmVudFAgPSBvcmlnaW5hbFNwYW4uY2xvc2VzdCgncCcpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoIXNyYykgcmV0dXJuO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG5ld0ltZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xuICAgICAgICAgICAgICAgIC8vIFx1NEY3Rlx1NzUyOCBPYnNpZGlhbiBBUEkgXHU4M0I3XHU1M0Q2XHU1NkZFXHU3MjQ3XHU3Njg0XHU3RUREXHU1QkY5XHU4REVGXHU1Rjg0XG4gICAgICAgICAgICAgICAgY29uc3QgZmlsZSA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChzcmMpO1xuICAgICAgICAgICAgICAgIGlmIChmaWxlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGFic29sdXRlUGF0aCA9IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIuZ2V0UmVzb3VyY2VQYXRoKHNyYyk7XG4gICAgICAgICAgICAgICAgICAgIG5ld0ltZy5zcmMgPSBhYnNvbHV0ZVBhdGg7XG4gICAgICAgICAgICAgICAgICAgIGlmIChhbHQpIG5ld0ltZy5hbHQgPSBhbHQ7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAvLyBcdTVFOTRcdTc1MjhcdTY4MzdcdTVGMEZcbiAgICAgICAgICAgICAgICAgICAgbmV3SW1nLnN0eWxlLm1heFdpZHRoID0gJzEwMCUnO1xuICAgICAgICAgICAgICAgICAgICBuZXdJbWcuc3R5bGUuaGVpZ2h0ID0gJ2F1dG8nO1xuICAgICAgICAgICAgICAgICAgICBuZXdJbWcuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICAgICAgICAgICAgICAgIG5ld0ltZy5zdHlsZS5tYXJnaW4gPSAnMWVtIGF1dG8nO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBhcmVudFApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudFAuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnRQLmFwcGVuZENoaWxkKG5ld0ltZyk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvcmlnaW5hbFNwYW4ucGFyZW50Tm9kZT8ucmVwbGFjZUNoaWxkKG5ld0ltZywgb3JpZ2luYWxTcGFuKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignXHU1NkZFXHU3MjQ3XHU1OTA0XHU3NDA2XHU1OTMxXHU4RDI1OicsIGVycm9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gXHU1OTA0XHU3NDA2XHU1RjE1XHU3NTI4XHU1NzU3XG4gICAgICAgIGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCdibG9ja3F1b3RlJykuZm9yRWFjaChlbCA9PiB7XG4gICAgICAgICAgICAvLyBcdTZFMDVcdTc0MDZcdTVGMTVcdTc1MjhcdTU3NTdcdTUxODVcdTkwRThcdTZCQjVcdTg0M0RcdTc2ODRcdTY4MzdcdTVGMEZcbiAgICAgICAgICAgIGVsLnF1ZXJ5U2VsZWN0b3JBbGwoJ3AnKS5mb3JFYWNoKHAgPT4ge1xuICAgICAgICAgICAgICAgIHAuc3R5bGUubWFyZ2luID0gJzAnO1xuICAgICAgICAgICAgICAgIHAuc3R5bGUucGFkZGluZyA9ICcwJztcbiAgICAgICAgICAgICAgICBwLnN0eWxlLmxpbmVIZWlnaHQgPSAnaW5oZXJpdCc7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxufSIsICJpbXBvcnQgeyBOb3RpY2UgfSBmcm9tICdvYnNpZGlhbic7XG5cbmV4cG9ydCBjbGFzcyBDb3B5TWFuYWdlciB7XG4gICAgcHJpdmF0ZSBzdGF0aWMgY2xlYW51cEh0bWwoaHRtbDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAgICAgLy8gXHU1MjFCXHU1RUZBXHU0RTAwXHU0RTJBXHU0RTM0XHU2NUY2XHU3Njg0IGRpdiBcdTUxNDNcdTdEMjBcdTY3NjVcdTU5MDRcdTc0MDYgSFRNTFxuICAgICAgICBjb25zdCB0ZW1wRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIHRlbXBEaXYuaW5uZXJIVE1MID0gaHRtbDtcblxuICAgICAgICAvLyBcdTc5RkJcdTk2NjRcdTYyNDBcdTY3MDlcdTc2ODQgZGF0YS0qIFx1NUM1RVx1NjAyN1xuICAgICAgICB0ZW1wRGl2LnF1ZXJ5U2VsZWN0b3JBbGwoJyonKS5mb3JFYWNoKGVsID0+IHtcbiAgICAgICAgICAgIEFycmF5LmZyb20oZWwuYXR0cmlidXRlcykuZm9yRWFjaChhdHRyID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoYXR0ci5uYW1lLnN0YXJ0c1dpdGgoJ2RhdGEtJykpIHtcbiAgICAgICAgICAgICAgICAgICAgZWwucmVtb3ZlQXR0cmlidXRlKGF0dHIubmFtZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIFx1NzlGQlx1OTY2NFx1NjI0MFx1NjcwOVx1NzY4NCBjbGFzcyBcdTVDNUVcdTYwMjdcbiAgICAgICAgdGVtcERpdi5xdWVyeVNlbGVjdG9yQWxsKCcqJykuZm9yRWFjaChlbCA9PiB7XG4gICAgICAgICAgICBlbC5yZW1vdmVBdHRyaWJ1dGUoJ2NsYXNzJyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIFx1NzlGQlx1OTY2NFx1NjI0MFx1NjcwOVx1NzY4NCBpZCBcdTVDNUVcdTYwMjdcbiAgICAgICAgdGVtcERpdi5xdWVyeVNlbGVjdG9yQWxsKCcqJykuZm9yRWFjaChlbCA9PiB7XG4gICAgICAgICAgICBlbC5yZW1vdmVBdHRyaWJ1dGUoJ2lkJyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiB0ZW1wRGl2LmlubmVySFRNTDtcbiAgICB9XG5cbiAgICBwcml2YXRlIHN0YXRpYyBhc3luYyBwcm9jZXNzSW1hZ2VzKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgaW1hZ2VzID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJ2ltZycpO1xuICAgICAgICBjb25zdCBpbWFnZUFycmF5ID0gQXJyYXkuZnJvbShpbWFnZXMpO1xuICAgICAgICBcbiAgICAgICAgZm9yIChjb25zdCBpbWcgb2YgaW1hZ2VBcnJheSkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGltZy5zcmMpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGJsb2IgPSBhd2FpdCByZXNwb25zZS5ibG9iKCk7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcbiAgICAgICAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJlYWRlci5vbmxvYWQgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbWcuc3JjID0gcmVhZGVyLnJlc3VsdCBhcyBzdHJpbmc7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKG51bGwpO1xuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICByZWFkZXIub25lcnJvciA9IHJlamVjdDtcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVyLnJlYWRBc0RhdGFVUkwoYmxvYik7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1x1NTZGRVx1NzI0N1x1OEY2Q1x1NjM2Mlx1NTkzMVx1OEQyNTonLCBlcnJvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIGFzeW5jIGNvcHlUb0NsaXBib2FyZChlbGVtZW50OiBIVE1MRWxlbWVudCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICBjb250YWluZXIuc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuICAgICAgICAgICAgY29udGFpbmVyLnN0eWxlLmxlZnQgPSAnLTk5OTlweCc7XG4gICAgICAgICAgICBjb250YWluZXIuaW5uZXJIVE1MID0gZWxlbWVudC5pbm5lckhUTUw7XG4gICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGNvbnRhaW5lcik7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlbGVtZW50LmlubmVySFRNTCk7XG4gICAgICAgICAgICAvLyBcdTU5MDRcdTc0MDZcdTU2RkVcdTcyNDdcdThGNkNcdTYzNjJcdTRFM0EgYmFzZTY0XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnByb2Nlc3NJbWFnZXMoY29udGFpbmVyKTtcblxuICAgICAgICAgICAgLy8gXHU2RTA1XHU3NDA2IEhUTUxcbiAgICAgICAgICAgIGNvbnN0IGNsZWFuSHRtbCA9IHRoaXMuY2xlYW51cEh0bWwoY29udGFpbmVyLmlubmVySFRNTCk7XG5cbiAgICAgICAgICAgIC8vIFx1NTIxQlx1NUVGQVx1NTI2QVx1OEQzNFx1Njc3Rlx1NjU3MFx1NjM2RVxuICAgICAgICAgICAgY29uc3QgY2xpcERhdGEgPSBuZXcgQ2xpcGJvYXJkSXRlbSh7XG4gICAgICAgICAgICAgICAgJ3RleHQvaHRtbCc6IG5ldyBCbG9iKFtjbGVhbkh0bWxdLCB7IHR5cGU6ICd0ZXh0L2h0bWwnIH0pLFxuICAgICAgICAgICAgICAgICd0ZXh0L3BsYWluJzogbmV3IEJsb2IoW2NvbnRhaW5lci50ZXh0Q29udGVudCB8fCAnJ10sIHsgdHlwZTogJ3RleHQvcGxhaW4nIH0pXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChjb250YWluZXIpO1xuICAgICAgICAgICAgYXdhaXQgbmF2aWdhdG9yLmNsaXBib2FyZC53cml0ZShbY2xpcERhdGFdKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgbmV3IE5vdGljZSgnXHU1REYyXHU1OTBEXHU1MjM2XHU1MjMwXHU1MjZBXHU4RDM0XHU2NzdGJyk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBuZXcgTm90aWNlKCdcdTU5MERcdTUyMzZcdTU5MzFcdThEMjUnKTtcbiAgICAgICAgfVxuICAgIH1cbn0iLCAiZXhwb3J0IGNsYXNzIERvbmF0ZU1hbmFnZXIge1xuICAgIHByaXZhdGUgc3RhdGljIG92ZXJsYXk6IEhUTUxFbGVtZW50O1xuICAgIHByaXZhdGUgc3RhdGljIG1vZGFsOiBIVE1MRWxlbWVudDtcblxuICAgIHB1YmxpYyBzdGF0aWMgc2hvd0RvbmF0ZU1vZGFsKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpIHtcbiAgICAgICAgdGhpcy5vdmVybGF5ID0gY29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7XG4gICAgICAgICAgICBjbHM6ICdtcC1kb25hdGUtb3ZlcmxheSdcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5tb2RhbCA9IHRoaXMub3ZlcmxheS5jcmVhdGVFbCgnZGl2Jywge1xuICAgICAgICAgICAgY2xzOiAnbXAtZG9uYXRlLW1vZGFsJ1xuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCBjbG9zZUJ1dHRvbiA9IHRoaXMubW9kYWwuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgICAgICAgIGNsczogJ21wLWRvbmF0ZS1jbG9zZScsXG4gICAgICAgICAgICB0ZXh0OiAnXHUwMEQ3J1xuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLm1vZGFsLmNyZWF0ZUVsKCdoMycsIHtcbiAgICAgICAgICAgIHRleHQ6ICdcdThCRjdcdTRGNUNcdTgwMDVcdTU1OURcdTU0OTZcdTU1NjEnLFxuICAgICAgICAgICAgY2xzOiAnbXAtZG9uYXRlLXRpdGxlJ1xuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCBjb250ZW50ID0gdGhpcy5tb2RhbC5jcmVhdGVFbCgnZGl2Jywge1xuICAgICAgICAgICAgY2xzOiAnbXAtZG9uYXRlLWNvbnRlbnQnXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIFx1NkRGQlx1NTJBMFx1NkUyOVx1OTlBOFx1NjNEMFx1NzkzQVxuICAgICAgICBjb250ZW50LmNyZWF0ZUVsKCdwJywge1xuICAgICAgICAgICAgdGV4dDogJ1x1NjBBOFx1NzY4NFx1NjUyRlx1NjMwMVx1NjYyRlx1NjIxMVx1NjMwMVx1N0VFRFx1NjZGNFx1NjVCMFx1NzY4NFx1NTJBOFx1NTI5QiBcdTI3NjRcdUZFMEYnLFxuICAgICAgICAgICAgY2xzOiAnbXAtZG9uYXRlLWRlc2MnXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIFx1NTIxQlx1NUVGQVx1NjUyRlx1NEVEOFx1NjVCOVx1NUYwRlx1OTAwOVx1NjJFOVxuICAgICAgICBjb25zdCBwYXltZW50VGFicyA9IGNvbnRlbnQuY3JlYXRlRWwoJ2RpdicsIHtcbiAgICAgICAgICAgIGNsczogJ21wLWRvbmF0ZS10YWJzJ1xuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCB3ZWNoYXRUYWIgPSBwYXltZW50VGFicy5jcmVhdGVFbCgnYnV0dG9uJywge1xuICAgICAgICAgICAgdGV4dDogJ1x1NUZBRVx1NEZFMVx1NjUyRlx1NEVEOCcsXG4gICAgICAgICAgICBjbHM6ICdtcC1kb25hdGUtdGFiIGFjdGl2ZSdcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3QgYWxpcGF5VGFiID0gcGF5bWVudFRhYnMuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgICAgICAgIHRleHQ6ICdcdTY1MkZcdTRFRDhcdTVCOUQnLFxuICAgICAgICAgICAgY2xzOiAnbXAtZG9uYXRlLXRhYidcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gXHU1MjFCXHU1RUZBXHU0RThDXHU3RUY0XHU3ODAxXHU2NjNFXHU3OTNBXHU1MzNBXHU1N0RGXG4gICAgICAgIGNvbnN0IHFyQ29udGFpbmVyID0gY29udGVudC5jcmVhdGVFbCgnZGl2Jywge1xuICAgICAgICAgICAgY2xzOiAnbXAtZG9uYXRlLXFyLWNvbnRhaW5lcidcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3Qgd2VjaGF0UVIgPSBxckNvbnRhaW5lci5jcmVhdGVFbCgnZGl2Jywge1xuICAgICAgICAgICAgY2xzOiAnbXAtZG9uYXRlLXFyIGFjdGl2ZScsXG4gICAgICAgICAgICBhdHRyOiB7XG4gICAgICAgICAgICAgICAgJ2RhdGEtdHlwZSc6ICd3ZWNoYXQnXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB3ZWNoYXRRUi5jcmVhdGVFbCgnaW1nJywge1xuICAgICAgICAgICAgYXR0cjoge1xuICAgICAgICAgICAgICAgIHNyYzogJy4vYXNzZXRzL2ltYWdlcy93ZWNoYXQtcXIucG5nJyxcbiAgICAgICAgICAgICAgICBhbHQ6ICdcdTVGQUVcdTRGRTFcdTY1MkZcdTRFRDgnXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IGFsaXBheVFSID0gcXJDb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHtcbiAgICAgICAgICAgIGNsczogJ21wLWRvbmF0ZS1xcicsXG4gICAgICAgICAgICBhdHRyOiB7XG4gICAgICAgICAgICAgICAgJ2RhdGEtdHlwZSc6ICdhbGlwYXknXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBhbGlwYXlRUi5jcmVhdGVFbCgnaW1nJywge1xuICAgICAgICAgICAgYXR0cjoge1xuICAgICAgICAgICAgICAgIHNyYzogJ2Fzc2V0cy9pbWFnZXMvYWxpcGF5LXFyLnBuZycsXG4gICAgICAgICAgICAgICAgYWx0OiAnXHU2NTJGXHU0RUQ4XHU1QjlEJ1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBcdTZERkJcdTUyQTBcdTY4MDdcdTdCN0VcdTUyMDdcdTYzNjJcdTRFOEJcdTRFRjZcbiAgICAgICAgd2VjaGF0VGFiLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5zd2l0Y2hUYWIoJ3dlY2hhdCcsIHBheW1lbnRUYWJzLCBxckNvbnRhaW5lcikpO1xuICAgICAgICBhbGlwYXlUYWIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLnN3aXRjaFRhYignYWxpcGF5JywgcGF5bWVudFRhYnMsIHFyQ29udGFpbmVyKSk7XG5cbiAgICAgICAgLy8gXHU2REZCXHU1MkEwXHU1MTczXHU5NUVEXHU0RThCXHU0RUY2XG4gICAgICAgIGNsb3NlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5jbG9zZURvbmF0ZU1vZGFsKCkpO1xuICAgICAgICB0aGlzLm92ZXJsYXkuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgICAgICAgaWYgKGUudGFyZ2V0ID09PSB0aGlzLm92ZXJsYXkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlRG9uYXRlTW9kYWwoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzdGF0aWMgc3dpdGNoVGFiKHR5cGU6IHN0cmluZywgdGFic0NvbnRhaW5lcjogSFRNTEVsZW1lbnQsIHFyQ29udGFpbmVyOiBIVE1MRWxlbWVudCkge1xuICAgICAgICAvLyBcdTY2RjRcdTY1QjBcdTY4MDdcdTdCN0VcdTcyQjZcdTYwMDFcbiAgICAgICAgdGFic0NvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCcubXAtZG9uYXRlLXRhYicpLmZvckVhY2godGFiID0+IHtcbiAgICAgICAgICAgIHRhYi5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcbiAgICAgICAgICAgIGlmICh0YWIudGV4dENvbnRlbnQ/LmluY2x1ZGVzKHR5cGUgPT09ICd3ZWNoYXQnID8gJ1x1NUZBRVx1NEZFMScgOiAnXHU2NTJGXHU0RUQ4XHU1QjlEJykpIHtcbiAgICAgICAgICAgICAgICB0YWIuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIFx1NjZGNFx1NjVCMFx1NEU4Q1x1N0VGNFx1NzgwMVx1NjYzRVx1NzkzQVxuICAgICAgICBxckNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCcubXAtZG9uYXRlLXFyJykuZm9yRWFjaChxciA9PiB7XG4gICAgICAgICAgICBxci5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcbiAgICAgICAgICAgIGlmIChxci5nZXRBdHRyaWJ1dGUoJ2RhdGEtdHlwZScpID09PSB0eXBlKSB7XG4gICAgICAgICAgICAgICAgcXIuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHByaXZhdGUgc3RhdGljIGNsb3NlRG9uYXRlTW9kYWwoKSB7XG4gICAgICAgIGlmICh0aGlzLm92ZXJsYXkpIHtcbiAgICAgICAgICAgIHRoaXMub3ZlcmxheS5yZW1vdmUoKTtcbiAgICAgICAgfVxuICAgIH1cbn0iLCAiaW1wb3J0IHsgQXBwIH0gZnJvbSAnb2JzaWRpYW4nO1xuXG5pbnRlcmZhY2UgVGVtcGxhdGUge1xuICAgIGlkOiBzdHJpbmc7XG4gICAgbmFtZTogc3RyaW5nO1xuICAgIHN0eWxlczoge1xuICAgICAgICBjb250YWluZXI6IHN0cmluZztcbiAgICAgICAgdGl0bGU6IHtcbiAgICAgICAgICAgIGgxOiBzdHJpbmc7XG4gICAgICAgICAgICBoMjogc3RyaW5nO1xuICAgICAgICAgICAgaDM6IHN0cmluZztcbiAgICAgICAgICAgIGJhc2U6IHN0cmluZztcbiAgICAgICAgfTtcbiAgICAgICAgcGFyYWdyYXBoOiBzdHJpbmc7XG4gICAgICAgIGxpc3Q6IHtcbiAgICAgICAgICAgIGNvbnRhaW5lcjogc3RyaW5nO1xuICAgICAgICAgICAgaXRlbTogc3RyaW5nO1xuICAgICAgICAgICAgdGFza0xpc3Q6IHN0cmluZztcbiAgICAgICAgfTtcbiAgICAgICAgcXVvdGU6IHN0cmluZztcbiAgICAgICAgY29kZToge1xuICAgICAgICAgICAgYmxvY2s6IHN0cmluZztcbiAgICAgICAgICAgIGlubGluZTogc3RyaW5nO1xuICAgICAgICB9O1xuICAgICAgICBpbWFnZTogc3RyaW5nO1xuICAgICAgICBsaW5rOiBzdHJpbmc7XG4gICAgICAgIGVtcGhhc2lzOiB7XG4gICAgICAgICAgICBzdHJvbmc6IHN0cmluZztcbiAgICAgICAgICAgIGVtOiBzdHJpbmc7XG4gICAgICAgICAgICBkZWw6IHN0cmluZztcbiAgICAgICAgfTtcbiAgICAgICAgdGFibGU6IHtcbiAgICAgICAgICAgIGNvbnRhaW5lcjogc3RyaW5nO1xuICAgICAgICAgICAgaGVhZGVyOiBzdHJpbmc7XG4gICAgICAgICAgICBjZWxsOiBzdHJpbmc7XG4gICAgICAgIH07XG4gICAgICAgIGhyOiBzdHJpbmc7XG4gICAgICAgIGZvb3Rub3RlOiB7XG4gICAgICAgICAgICByZWY6IHN0cmluZztcbiAgICAgICAgICAgIGJhY2tyZWY6IHN0cmluZztcbiAgICAgICAgfTtcbiAgICB9O1xufVxuXG5leHBvcnQgY2xhc3MgVGVtcGxhdGVNYW5hZ2VyIHtcbiAgICBwcml2YXRlIHRlbXBsYXRlczogTWFwPHN0cmluZywgVGVtcGxhdGU+ID0gbmV3IE1hcCgpO1xuICAgIHByaXZhdGUgY3VycmVudFRlbXBsYXRlOiBUZW1wbGF0ZTtcbiAgICBwcml2YXRlIGN1cnJlbnRGb250OiBzdHJpbmcgPSAnLWFwcGxlLXN5c3RlbSc7XG4gICAgcHJpdmF0ZSBjdXJyZW50Rm9udFNpemU6IG51bWJlciA9IDE2O1xuICAgIHByaXZhdGUgYXBwOiBBcHA7XG5cbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCkge1xuICAgICAgICB0aGlzLmFwcCA9IGFwcDtcbiAgICAgICAgdGhpcy5sb2FkVGVtcGxhdGVzKCk7IC8vIFx1NTJBMFx1OEY3RFx1NkEyMVx1Njc3RlxuICAgIH1cblxuICAgIHB1YmxpYyBhc3luYyBsb2FkVGVtcGxhdGVzKCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgY29uZmlnRGlyID0gdGhpcy5hcHAudmF1bHQuY29uZmlnRGlyO1xuICAgICAgICAgICAgY29uc3QgdGVtcGxhdGVzUGF0aCA9IGAke2NvbmZpZ0Rpcn0vcGx1Z2lucy9vYnNpZGlhbi10by1tcC90ZW1wbGF0ZXNgO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBcdTUyQTBcdThGN0RcdTlFRDhcdThCQTRcdTZBMjFcdTY3N0ZcbiAgICAgICAgICAgIGNvbnN0IGRlZmF1bHRUZW1wbGF0ZSA9IEpTT04ucGFyc2UoXG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5yZWFkKGAke3RlbXBsYXRlc1BhdGh9L2RlZmF1bHQuanNvbmApXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgdGhpcy50ZW1wbGF0ZXMuc2V0KGRlZmF1bHRUZW1wbGF0ZS5pZCwgZGVmYXVsdFRlbXBsYXRlKTtcbiAgICAgICAgICAgIHRoaXMuY3VycmVudFRlbXBsYXRlID0gZGVmYXVsdFRlbXBsYXRlO1xuXG4gICAgICAgICAgICAvLyBcdTUyQTBcdThGN0RcdTY3ODFcdTdCODBcdTRFM0JcdTk4OThcbiAgICAgICAgICAgIGNvbnN0IG1pbmltYWxUZW1wbGF0ZSA9IEpTT04ucGFyc2UoXG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5yZWFkKGAke3RlbXBsYXRlc1BhdGh9L21pbmltYWwuanNvbmApXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgdGhpcy50ZW1wbGF0ZXMuc2V0KG1pbmltYWxUZW1wbGF0ZS5pZCwgbWluaW1hbFRlbXBsYXRlKTtcblxuICAgICAgICAgICAgLy8gXHU1MkEwXHU4RjdEXHU0RjE4XHU5NkM1XHU0RTNCXHU5ODk4XG4gICAgICAgICAgICBjb25zdCBlbGVnYW50VGVtcGxhdGUgPSBKU09OLnBhcnNlKFxuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIucmVhZChgJHt0ZW1wbGF0ZXNQYXRofS9lbGVnYW50Lmpzb25gKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIHRoaXMudGVtcGxhdGVzLnNldChlbGVnYW50VGVtcGxhdGUuaWQsIGVsZWdhbnRUZW1wbGF0ZSk7XG5cbiAgICAgICAgICAgIC8vIFx1NTJBMFx1OEY3RFx1NkRGMVx1ODI3Mlx1NEUzQlx1OTg5OFxuICAgICAgICAgICAgY29uc3QgZGFya1RlbXBsYXRlID0gSlNPTi5wYXJzZShcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLnJlYWQoYCR7dGVtcGxhdGVzUGF0aH0vZGFyay5qc29uYClcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICB0aGlzLnRlbXBsYXRlcy5zZXQoZGFya1RlbXBsYXRlLmlkLCBkYXJrVGVtcGxhdGUpO1xuXG4gICAgICAgICAgICAvLyBcdTUyQTBcdThGN0RcdTVCNjZcdTY3MkZcdTRFM0JcdTk4OThcbiAgICAgICAgICAgIGNvbnN0IGFjYWRlbWljVGVtcGxhdGUgPSBKU09OLnBhcnNlKFxuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIucmVhZChgJHt0ZW1wbGF0ZXNQYXRofS9hY2FkZW1pYy5qc29uYClcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICB0aGlzLnRlbXBsYXRlcy5zZXQoYWNhZGVtaWNUZW1wbGF0ZS5pZCwgYWNhZGVtaWNUZW1wbGF0ZSk7XG4gICAgICAgICAgICBcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1x1NTJBMFx1OEY3RFx1NkEyMVx1Njc3Rlx1NTkzMVx1OEQyNTonLCBlcnJvcik7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1x1NjVFMFx1NkNENVx1NTJBMFx1OEY3RFx1NkEyMVx1Njc3Rlx1NjU4N1x1NEVGNicpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIGdldFRlbXBsYXRlKGlkOiBzdHJpbmcpOiBUZW1wbGF0ZSB8IHVuZGVmaW5lZCB7XG4gICAgICAgIHJldHVybiB0aGlzLnRlbXBsYXRlcy5nZXQoaWQpO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRDdXJyZW50VGVtcGxhdGUoKTogVGVtcGxhdGUge1xuICAgICAgICByZXR1cm4gdGhpcy5jdXJyZW50VGVtcGxhdGU7XG4gICAgfVxuXG4gICAgcHVibGljIHNldEN1cnJlbnRUZW1wbGF0ZShpZDogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgICAgIGNvbnN0IHRlbXBsYXRlID0gdGhpcy50ZW1wbGF0ZXMuZ2V0KGlkKTtcbiAgICAgICAgaWYgKHRlbXBsYXRlKSB7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRUZW1wbGF0ZSA9IHRlbXBsYXRlO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRBbGxUZW1wbGF0ZXMoKTogVGVtcGxhdGVbXSB7XG4gICAgICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMudGVtcGxhdGVzLnZhbHVlcygpKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc2V0Rm9udChmb250RmFtaWx5OiBzdHJpbmcpIHtcbiAgICAgICAgdGhpcy5jdXJyZW50Rm9udCA9IGZvbnRGYW1pbHk7XG4gICAgfVxuXG4gICAgcHVibGljIHNldEZvbnRTaXplKHNpemU6IG51bWJlcikge1xuICAgICAgICB0aGlzLmN1cnJlbnRGb250U2l6ZSA9IHNpemU7XG4gICAgfVxuXG4gICAgcHVibGljIGFwcGx5VGVtcGxhdGUoZWxlbWVudDogSFRNTEVsZW1lbnQpOiB2b2lkIHtcbiAgICAgICAgY29uc3Qgc3R5bGVzID0gdGhpcy5jdXJyZW50VGVtcGxhdGUuc3R5bGVzO1xuICAgICAgICBjb25zdCB0YWJsZSA9IGVsZW1lbnQucXVlcnlTZWxlY3RvcigndGFibGUnKTtcbiAgICAgICAgY29uc3QgdGQgPSBlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJ3RkJyk7XG4gICAgICAgIFxuICAgICAgICBpZiAoIXRhYmxlIHx8ICF0ZCkgcmV0dXJuO1xuXG4gICAgICAgIC8vIFx1NUU5NFx1NzUyOFx1NUJCOVx1NTY2OFx1NjgzN1x1NUYwRlx1NTIzMFx1ODg2OFx1NjgzQ1xuICAgICAgICB0YWJsZS5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywgc3R5bGVzLmNvbnRhaW5lcik7XG4gICAgICAgIHRhYmxlLnNldEF0dHJpYnV0ZSgnY2VsbHBhZGRpbmcnLCAnMCcpO1xuICAgICAgICB0YWJsZS5zZXRBdHRyaWJ1dGUoJ2NlbGxzcGFjaW5nJywgJzAnKTtcbiAgICAgICAgXG4gICAgICAgIC8vIFx1NUU5NFx1NzUyOFx1NTdGQVx1Nzg0MFx1NjgzN1x1NUYwRlx1NTIzMFx1NTM1NVx1NTE0M1x1NjgzQ1xuICAgICAgICB0ZC5zdHlsZS5jc3NUZXh0ID0gYFxuICAgICAgICAgICAgd29yZC1icmVhazogYnJlYWstYWxsO1xuICAgICAgICAgICAgcGFkZGluZzogMDtcbiAgICAgICAgICAgIG1hcmdpbjogMDtcbiAgICAgICAgICAgIGxpbmUtaGVpZ2h0OiAxLjc7XG4gICAgICAgICAgICBvdmVyZmxvdy13cmFwOiBicmVhay13b3JkO1xuICAgICAgICAgICAgd2hpdGUtc3BhY2U6IG5vcm1hbDtcbiAgICAgICAgICAgIGJvcmRlcjogbm9uZTtcbiAgICAgICAgICAgIGZvbnQtZmFtaWx5OiAke3RoaXMuY3VycmVudEZvbnR9O1xuICAgICAgICBgO1xuICAgICAgICBcbiAgICAgICAgLy8gXHU1RTk0XHU3NTI4XHU2ODA3XHU5ODk4XHU2ODM3XHU1RjBGXG4gICAgICAgIHRkLnF1ZXJ5U2VsZWN0b3JBbGwoJ2gxJykuZm9yRWFjaChlbCA9PiB7XG4gICAgICAgICAgICBlbC5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywgYCR7c3R5bGVzLnRpdGxlLmgxfTsgZm9udC1mYW1pbHk6ICR7dGhpcy5jdXJyZW50Rm9udH07YCk7XG4gICAgICAgIH0pO1xuICAgICAgICB0ZC5xdWVyeVNlbGVjdG9yQWxsKCdoMicpLmZvckVhY2goZWwgPT4ge1xuICAgICAgICAgICAgZWwuc2V0QXR0cmlidXRlKCdzdHlsZScsIGAke3N0eWxlcy50aXRsZS5oMn07IGZvbnQtZmFtaWx5OiAke3RoaXMuY3VycmVudEZvbnR9O2ApO1xuICAgICAgICB9KTtcbiAgICAgICAgdGQucXVlcnlTZWxlY3RvckFsbCgnaDMnKS5mb3JFYWNoKGVsID0+IHtcbiAgICAgICAgICAgIGVsLnNldEF0dHJpYnV0ZSgnc3R5bGUnLCBgJHtzdHlsZXMudGl0bGUuaDN9OyBmb250LWZhbWlseTogJHt0aGlzLmN1cnJlbnRGb250fTtgKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRkLnF1ZXJ5U2VsZWN0b3JBbGwoJ2g0LCBoNSwgaDYnKS5mb3JFYWNoKGVsID0+IHtcbiAgICAgICAgICAgIGVsLnNldEF0dHJpYnV0ZSgnc3R5bGUnLCBgJHtzdHlsZXMudGl0bGUuYmFzZX07IGZvbnQtZmFtaWx5OiAke3RoaXMuY3VycmVudEZvbnR9O2ApO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBcdTVFOTRcdTc1MjhcdTZCQjVcdTg0M0RcdTY4MzdcdTVGMEZcbiAgICAgICAgdGQucXVlcnlTZWxlY3RvckFsbCgncCcpLmZvckVhY2goZWwgPT4ge1xuICAgICAgICAgICAgLy8gXHU2OEMwXHU2N0U1XHU2NjJGXHU1NDI2XHU0RTNBXHU2NzAwXHU1OTE2XHU1QzQyXHU2QkI1XHU4NDNEXG4gICAgICAgICAgICBpZiAoIWVsLnBhcmVudEVsZW1lbnQ/LmNsb3Nlc3QoJ3AnKSAmJiAhZWwucGFyZW50RWxlbWVudD8uY2xvc2VzdCgnYmxvY2txdW90ZScpKSB7XG4gICAgICAgICAgICAgICAgZWwuc2V0QXR0cmlidXRlKCdzdHlsZScsIGAke3N0eWxlcy5wYXJhZ3JhcGh9OyBmb250LWZhbWlseTogJHt0aGlzLmN1cnJlbnRGb250fTsgZm9udC1zaXplOiAke3RoaXMuY3VycmVudEZvbnRTaXplfXB4O2ApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBcdTVFOTRcdTc1MjhcdTUyMTdcdTg4NjhcdTY4MzdcdTVGMEZcbiAgICAgICAgdGQucXVlcnlTZWxlY3RvckFsbCgndWwsIG9sJykuZm9yRWFjaChlbCA9PiB7XG4gICAgICAgICAgICBlbC5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywgc3R5bGVzLmxpc3QuY29udGFpbmVyKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRkLnF1ZXJ5U2VsZWN0b3JBbGwoJ2xpJykuZm9yRWFjaChlbCA9PiB7XG4gICAgICAgICAgICBlbC5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywgYCR7c3R5bGVzLmxpc3QuaXRlbX07IGZvbnQtZmFtaWx5OiAke3RoaXMuY3VycmVudEZvbnR9OyBmb250LXNpemU6ICR7dGhpcy5jdXJyZW50Rm9udFNpemV9cHg7YCk7XG4gICAgICAgIH0pO1xuICAgICAgICB0ZC5xdWVyeVNlbGVjdG9yQWxsKCcudGFzay1saXN0LWl0ZW0nKS5mb3JFYWNoKGVsID0+IHtcbiAgICAgICAgICAgIGVsLnNldEF0dHJpYnV0ZSgnc3R5bGUnLCBgJHtzdHlsZXMubGlzdC50YXNrTGlzdH07IGZvbnQtZmFtaWx5OiAke3RoaXMuY3VycmVudEZvbnR9OyBmb250LXNpemU6ICR7dGhpcy5jdXJyZW50Rm9udFNpemV9cHg7YCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIFx1NUU5NFx1NzUyOFx1NUYxNVx1NzUyOFx1NjgzN1x1NUYwRlxuICAgICAgICB0ZC5xdWVyeVNlbGVjdG9yQWxsKCdibG9ja3F1b3RlJykuZm9yRWFjaChlbCA9PiB7XG4gICAgICAgICAgICBlbC5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywgYCR7c3R5bGVzLnF1b3RlfTsgZm9udC1mYW1pbHk6ICR7dGhpcy5jdXJyZW50Rm9udH07IGZvbnQtc2l6ZTogJHt0aGlzLmN1cnJlbnRGb250U2l6ZX1weDtgKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gXHU1RTk0XHU3NTI4XHU0RUUzXHU3ODAxXHU2ODM3XHU1RjBGXG4gICAgICAgIHRkLnF1ZXJ5U2VsZWN0b3JBbGwoJ3ByZScpLmZvckVhY2goZWwgPT4ge1xuICAgICAgICAgICAgZWwuc2V0QXR0cmlidXRlKCdzdHlsZScsIGAke3N0eWxlcy5jb2RlLmJsb2NrfTsgZm9udC1zaXplOiAke3RoaXMuY3VycmVudEZvbnRTaXplfXB4O2ApO1xuICAgICAgICB9KTtcbiAgICAgICAgdGQucXVlcnlTZWxlY3RvckFsbCgnY29kZTpub3QocHJlIGNvZGUpJykuZm9yRWFjaChlbCA9PiB7XG4gICAgICAgICAgICBlbC5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywgYCR7c3R5bGVzLmNvZGUuaW5saW5lfTsgZm9udC1zaXplOiAke3RoaXMuY3VycmVudEZvbnRTaXplfXB4O2ApO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBcdTVFOTRcdTc1MjhcdTk0RkVcdTYzQTVcdTY4MzdcdTVGMEZcbiAgICAgICAgdGQucXVlcnlTZWxlY3RvckFsbCgnYScpLmZvckVhY2goZWwgPT4ge1xuICAgICAgICAgICAgZWwuc2V0QXR0cmlidXRlKCdzdHlsZScsIHN0eWxlcy5saW5rKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gXHU1RTk0XHU3NTI4XHU1RjNBXHU4QzAzXHU2ODM3XHU1RjBGXG4gICAgICAgIHRkLnF1ZXJ5U2VsZWN0b3JBbGwoJ3N0cm9uZycpLmZvckVhY2goZWwgPT4ge1xuICAgICAgICAgICAgZWwuc2V0QXR0cmlidXRlKCdzdHlsZScsIHN0eWxlcy5lbXBoYXNpcy5zdHJvbmcpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGQucXVlcnlTZWxlY3RvckFsbCgnZW0nKS5mb3JFYWNoKGVsID0+IHtcbiAgICAgICAgICAgIGVsLnNldEF0dHJpYnV0ZSgnc3R5bGUnLCBzdHlsZXMuZW1waGFzaXMuZW0pO1xuICAgICAgICB9KTtcbiAgICAgICAgdGQucXVlcnlTZWxlY3RvckFsbCgnZGVsJykuZm9yRWFjaChlbCA9PiB7XG4gICAgICAgICAgICBlbC5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywgc3R5bGVzLmVtcGhhc2lzLmRlbCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIFx1NUU5NFx1NzUyOFx1ODg2OFx1NjgzQ1x1NjgzN1x1NUYwRlxuICAgICAgICB0ZC5xdWVyeVNlbGVjdG9yQWxsKCd0YWJsZScpLmZvckVhY2goZWwgPT4ge1xuICAgICAgICAgICAgaWYgKGVsID09PSB0YWJsZSkgcmV0dXJuOyAvLyBcdThERjNcdThGQzdcdTUzMDVcdTg4RjlcdTg4NjhcdTY4M0NcbiAgICAgICAgICAgIGVsLnNldEF0dHJpYnV0ZSgnc3R5bGUnLCBzdHlsZXMudGFibGUuY29udGFpbmVyKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRkLnF1ZXJ5U2VsZWN0b3JBbGwoJ3RoJykuZm9yRWFjaChlbCA9PiB7XG4gICAgICAgICAgICBlbC5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywgYCR7c3R5bGVzLnRhYmxlLmhlYWRlcn07IGZvbnQtZmFtaWx5OiAke3RoaXMuY3VycmVudEZvbnR9OyBmb250LXNpemU6ICR7dGhpcy5jdXJyZW50Rm9udFNpemV9cHg7YCk7XG4gICAgICAgIH0pO1xuICAgICAgICB0ZC5xdWVyeVNlbGVjdG9yQWxsKCd0ZCcpLmZvckVhY2goZWwgPT4ge1xuICAgICAgICAgICAgaWYgKGVsID09PSB0ZCkgcmV0dXJuOyAvLyBcdThERjNcdThGQzdcdTUzMDVcdTg4RjlcdTUzNTVcdTUxNDNcdTY4M0NcbiAgICAgICAgICAgIGVsLnNldEF0dHJpYnV0ZSgnc3R5bGUnLCBgJHtzdHlsZXMudGFibGUuY2VsbH07IGZvbnQtZmFtaWx5OiAke3RoaXMuY3VycmVudEZvbnR9OyBmb250LXNpemU6ICR7dGhpcy5jdXJyZW50Rm9udFNpemV9cHg7YCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIFx1NUU5NFx1NzUyOFx1NTIwNlx1NTI3Mlx1N0VCRlx1NjgzN1x1NUYwRlxuICAgICAgICB0ZC5xdWVyeVNlbGVjdG9yQWxsKCdocicpLmZvckVhY2goZWwgPT4ge1xuICAgICAgICAgICAgZWwuc2V0QXR0cmlidXRlKCdzdHlsZScsIHN0eWxlcy5ocik7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIFx1NUU5NFx1NzUyOFx1ODExQVx1NkNFOFx1NjgzN1x1NUYwRlxuICAgICAgICB0ZC5xdWVyeVNlbGVjdG9yQWxsKCcuZm9vdG5vdGUtcmVmJykuZm9yRWFjaChlbCA9PiB7XG4gICAgICAgICAgICBlbC5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywgc3R5bGVzLmZvb3Rub3RlLnJlZik7XG4gICAgICAgIH0pO1xuICAgICAgICB0ZC5xdWVyeVNlbGVjdG9yQWxsKCcuZm9vdG5vdGUtYmFja3JlZicpLmZvckVhY2goZWwgPT4ge1xuICAgICAgICAgICAgZWwuc2V0QXR0cmlidXRlKCdzdHlsZScsIHN0eWxlcy5mb290bm90ZS5iYWNrcmVmKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gXHU1RTk0XHU3NTI4XHU1NkZFXHU3MjQ3XHU2ODM3XHU1RjBGXG4gICAgICAgIHRkLnF1ZXJ5U2VsZWN0b3JBbGwoJ2ltZycpLmZvckVhY2goZWwgPT4ge1xuICAgICAgICAgICAgY29uc3QgaW1nID0gZWwgYXMgSFRNTEltYWdlRWxlbWVudDtcbiAgICAgICAgICAgIC8vIFx1NUU5NFx1NzUyOFx1NTdGQVx1Nzg0MFx1NjgzN1x1NUYwRlxuICAgICAgICAgICAgZWwuc2V0QXR0cmlidXRlKCdzdHlsZScsIGAke3N0eWxlcy5pbWFnZX07IGZvbnQtZmFtaWx5OiAke3RoaXMuY3VycmVudEZvbnR9O2ApO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBcdTc4NkVcdTRGRERcdTU2RkVcdTcyNDdcdTVCQjlcdTU2NjhcdTY4MzdcdTVGMEZcdTZCNjNcdTc4NkVcbiAgICAgICAgICAgIGNvbnN0IHBhcmVudCA9IGltZy5wYXJlbnRFbGVtZW50O1xuICAgICAgICAgICAgaWYgKHBhcmVudCAmJiBwYXJlbnQudGFnTmFtZS50b0xvd2VyQ2FzZSgpID09PSAncCcpIHtcbiAgICAgICAgICAgICAgICBwYXJlbnQuc3R5bGUudGV4dEFsaWduID0gJ2NlbnRlcic7XG4gICAgICAgICAgICAgICAgcGFyZW50LnN0eWxlLm1hcmdpbiA9ICcxZW0gMCc7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIFx1NjZGNFx1NjVCMFx1NEVFM1x1NzgwMVx1NTc1N1x1NjgzN1x1NUYwRlx1NUU5NFx1NzUyOFxuICAgICAgICB0ZC5xdWVyeVNlbGVjdG9yQWxsKCdwcmUnKS5mb3JFYWNoKGVsID0+IHtcbiAgICAgICAgICAgIGVsLnNldEF0dHJpYnV0ZSgnc3R5bGUnLCBgJHtzdHlsZXMuY29kZS5ibG9ja307YCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIFx1NjZGNFx1NjVCMFx1NUYxNVx1NzUyOFx1NTc1N1x1NjgzN1x1NUYwRlx1NUU5NFx1NzUyOFxuICAgICAgICB0ZC5xdWVyeVNlbGVjdG9yQWxsKCdibG9ja3F1b3RlJykuZm9yRWFjaChlbCA9PiB7XG4gICAgICAgICAgICBlbC5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywgYCR7c3R5bGVzLnF1b3RlfTtgKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gXHU2NkY0XHU2NUIwXHU1MjE3XHU4ODY4XHU2ODM3XHU1RjBGXHU1RTk0XHU3NTI4XG4gICAgICAgIHRkLnF1ZXJ5U2VsZWN0b3JBbGwoJ3VsLCBvbCcpLmZvckVhY2goZWwgPT4ge1xuICAgICAgICAgICAgZWwuc2V0QXR0cmlidXRlKCdzdHlsZScsIGAke3N0eWxlcy5saXN0LmNvbnRhaW5lcn07IGZvbnQtZmFtaWx5OiAke3RoaXMuY3VycmVudEZvbnR9O2ApO1xuICAgICAgICB9KTtcbiAgICAgICAgdGQucXVlcnlTZWxlY3RvckFsbCgnbGknKS5mb3JFYWNoKGVsID0+IHtcbiAgICAgICAgICAgIGVsLnNldEF0dHJpYnV0ZSgnc3R5bGUnLCBgJHtzdHlsZXMubGlzdC5pdGVtfTsgZm9udC1mYW1pbHk6ICR7dGhpcy5jdXJyZW50Rm9udH07IGZvbnQtc2l6ZTogJHt0aGlzLmN1cnJlbnRGb250U2l6ZX1weDtgKTtcbiAgICAgICAgfSk7XG4gICAgfVxufVxuXG5leHBvcnQgY29uc3QgdGVtcGxhdGVNYW5hZ2VyID0gKGFwcDogQXBwKSA9PiBuZXcgVGVtcGxhdGVNYW5hZ2VyKGFwcCk7XG4iLCAiaW50ZXJmYWNlIE1QU2V0dGluZ3Mge1xuICAgIHRlbXBsYXRlSWQ6IHN0cmluZztcbiAgICBmb250RmFtaWx5OiBzdHJpbmc7XG4gICAgZm9udFNpemU6IG51bWJlcjtcbn1cblxuY29uc3QgREVGQVVMVF9TRVRUSU5HUzogTVBTZXR0aW5ncyA9IHtcbiAgICB0ZW1wbGF0ZUlkOiAnZGVmYXVsdCcsXG4gICAgZm9udEZhbWlseTogJy1hcHBsZS1zeXN0ZW0nLFxuICAgIGZvbnRTaXplOiAxNlxufTtcblxuZXhwb3J0IGNsYXNzIFNldHRpbmdzTWFuYWdlciB7XG4gICAgcHJpdmF0ZSBwbHVnaW46IGFueTtcbiAgICBwcml2YXRlIHNldHRpbmdzOiBNUFNldHRpbmdzO1xuXG4gICAgY29uc3RydWN0b3IocGx1Z2luOiBhbnkpIHtcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gICAgICAgIHRoaXMuc2V0dGluZ3MgPSBERUZBVUxUX1NFVFRJTkdTO1xuICAgIH1cblxuICAgIGFzeW5jIGxvYWRTZXR0aW5ncygpIHtcbiAgICAgICAgdGhpcy5zZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfU0VUVElOR1MsIGF3YWl0IHRoaXMucGx1Z2luLmxvYWREYXRhKCkpO1xuICAgIH1cblxuICAgIGFzeW5jIHNhdmVTZXR0aW5ncygpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZURhdGEodGhpcy5zZXR0aW5ncyk7XG4gICAgfVxuXG4gICAgZ2V0U2V0dGluZ3MoKTogTVBTZXR0aW5ncyB7XG4gICAgICAgIHJldHVybiB0aGlzLnNldHRpbmdzO1xuICAgIH1cblxuICAgIGFzeW5jIHVwZGF0ZVNldHRpbmdzKHNldHRpbmdzOiBQYXJ0aWFsPE1QU2V0dGluZ3M+KSB7XG4gICAgICAgIHRoaXMuc2V0dGluZ3MgPSB7IC4uLnRoaXMuc2V0dGluZ3MsIC4uLnNldHRpbmdzIH07XG4gICAgICAgIGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XG4gICAgfVxufSJdLAogICJtYXBwaW5ncyI6ICI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsSUFBQUEsbUJBQStCOzs7QUNBL0IsSUFBQUMsbUJBQWlFOzs7QUNFMUQsSUFBTSxjQUFOLE1BQWtCO0FBQUEsRUFHckIsT0FBTyxXQUFXLEtBQVU7QUFDeEIsU0FBSyxNQUFNO0FBQUEsRUFDZjtBQUFBLEVBRUEsT0FBTyxjQUFjLFNBQTRCO0FBRTdDLFVBQU0sUUFBUSxLQUFLLG1CQUFtQixPQUFPO0FBRzdDLFNBQUssZ0JBQWdCLE1BQU0sY0FBYyxJQUFJLENBQUM7QUFBQSxFQUNsRDtBQUFBLEVBRUEsT0FBZSxtQkFBbUIsU0FBd0M7QUFDdEUsVUFBTSxRQUFRLFNBQVMsY0FBYyxPQUFPO0FBQzVDLFVBQU0sUUFBUSxTQUFTLGNBQWMsT0FBTztBQUM1QyxVQUFNLEtBQUssU0FBUyxjQUFjLElBQUk7QUFDdEMsVUFBTSxLQUFLLFNBQVMsY0FBYyxJQUFJO0FBRXRDLFVBQU0sTUFBTSxRQUFRO0FBQ3BCLFVBQU0sTUFBTSxpQkFBaUI7QUFDN0IsT0FBRyxNQUFNLFlBQVk7QUFFckIsV0FBTyxRQUFRLFlBQVk7QUFDdkIsU0FBRyxZQUFZLFFBQVEsVUFBVTtBQUFBLElBQ3JDO0FBRUEsT0FBRyxZQUFZLEVBQUU7QUFDakIsVUFBTSxZQUFZLEVBQUU7QUFDcEIsVUFBTSxZQUFZLEtBQUs7QUFDdkIsWUFBUSxZQUFZLEtBQUs7QUFFekIsV0FBTztBQUFBLEVBQ1g7QUFBQSxFQUVBLE9BQWUsZ0JBQWdCLFdBQXFDO0FBQ2hF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
