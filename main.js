/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __getOwnPropSymbols = Object.getOwnPropertySymbols;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __propIsEnum = Object.prototype.propertyIsEnumerable;
var __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;
var __spreadValues = (a, b) => {
  for (var prop in b || (b = {}))
    if (__hasOwnProp.call(b, prop))
      __defNormalProp(a, prop, b[prop]);
  if (__getOwnPropSymbols)
    for (var prop of __getOwnPropSymbols(b)) {
      if (__propIsEnum.call(b, prop))
        __defNormalProp(a, prop, b[prop]);
    }
  return a;
};
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);
var __async = (__this, __arguments, generator) => {
  return new Promise((resolve, reject) => {
    var fulfilled = (value) => {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    };
    var rejected = (value) => {
      try {
        step(generator.throw(value));
      } catch (e) {
        reject(e);
      }
    };
    var step = (x) => x.done ? resolve(x.value) : Promise.resolve(x.value).then(fulfilled, rejected);
    step((generator = generator.apply(__this, __arguments)).next());
  });
};

// src/main.ts
var main_exports = {};
__export(main_exports, {
  default: () => MPPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian3 = require("obsidian");

// src/view.ts
var import_obsidian2 = require("obsidian");

// src/converter.ts
var MPConverter = class {
  static initialize(app) {
    this.app = app;
  }
  static formatContent(element) {
    const table = this.createWrapperTable(element);
    this.processElements(table.querySelector("td"));
  }
  static createWrapperTable(element) {
    const table = document.createElement("table");
    const tbody = document.createElement("tbody");
    const tr = document.createElement("tr");
    const td = document.createElement("td");
    table.style.width = "100%";
    table.style.borderCollapse = "collapse";
    td.style.wordBreak = "break-all";
    while (element.firstChild) {
      td.appendChild(element.firstChild);
    }
    tr.appendChild(td);
    tbody.appendChild(tr);
    table.appendChild(tbody);
    element.appendChild(table);
    return table;
  }
  static processElements(container) {
    if (!container) return;
    container.querySelectorAll("strong, em").forEach((el) => {
      el.style.display = "inline";
    });
    container.querySelectorAll("a").forEach((el) => {
      el.style.color = "#576b95";
      el.style.textDecoration = "none";
    });
    container.querySelectorAll("table").forEach((el) => {
      if (el === container.closest("table")) return;
      el.style.borderCollapse = "collapse";
      el.style.margin = "1em 0";
      el.style.width = "100%";
    });
    container.querySelectorAll("th, td").forEach((el) => {
      if (el === container.closest("td")) return;
      el.style.border = "1px solid #dfdfdf";
      el.style.padding = "8px";
    });
    container.querySelectorAll("hr").forEach((el) => {
      el.style.border = "none";
      el.style.borderTop = "1px solid #dfdfdf";
      el.style.margin = "20px 0";
    });
    container.querySelectorAll("del").forEach((el) => {
      el.style.textDecoration = "line-through";
    });
    container.querySelectorAll(".task-list-item").forEach((el) => {
      el.style.listStyle = "none";
      const checkbox = el.querySelector('input[type="checkbox"]');
      if (checkbox) {
        checkbox.style.marginRight = "6px";
      }
    });
    container.querySelectorAll(".footnote-ref, .footnote-backref").forEach((el) => {
      el.style.color = "#576b95";
      el.style.textDecoration = "none";
    });
    container.querySelectorAll("pre code").forEach((el) => {
      const pre = el.parentElement;
      if (pre) {
        const dots = document.createElement("div");
        dots.style.cssText = `
                    margin: 8px 0 12px 0;
                    display: flex;
                    gap: 6px;
                `;
        const colors = ["#ff5f56", "#ffbd2e", "#27c93f"];
        colors.forEach((color) => {
          const dot = document.createElement("span");
          dot.style.cssText = `
                        width: 12px;
                        height: 12px;
                        border-radius: 50%;
                        background-color: ${color};
                    `;
          dots.appendChild(dot);
        });
        pre.insertBefore(dots, pre.firstChild);
        pre.style.paddingTop = "32px";
        const copyButton = pre.querySelector(".copy-code-button");
        if (copyButton) {
          copyButton.remove();
        }
      }
    });
    container.querySelectorAll("span.internal-embed[alt][src]").forEach((el) => __async(this, null, function* () {
      var _a;
      const originalSpan = el;
      const src = originalSpan.getAttribute("src");
      const alt = originalSpan.getAttribute("alt");
      const parentP = originalSpan.closest("p");
      if (!src) return;
      try {
        const newImg = document.createElement("img");
        const file = this.app.vault.getAbstractFileByPath(src);
        if (file) {
          const absolutePath = this.app.vault.adapter.getResourcePath(src);
          newImg.src = absolutePath;
          if (alt) newImg.alt = alt;
          newImg.style.maxWidth = "100%";
          newImg.style.height = "auto";
          newImg.style.display = "block";
          newImg.style.margin = "1em auto";
          (_a = originalSpan.parentNode) == null ? void 0 : _a.replaceChild(newImg, originalSpan);
        }
      } catch (error) {
        console.error("\u56FE\u7247\u5904\u7406\u5931\u8D25:", error);
      }
    }));
    container.querySelectorAll("blockquote").forEach((el) => {
      el.querySelectorAll("p").forEach((p) => {
        p.style.margin = "0";
        p.style.padding = "0";
        p.style.lineHeight = "inherit";
      });
    });
  }
};

// src/copyManager.ts
var import_obsidian = require("obsidian");
var CopyManager = class {
  static cleanupHtml(html) {
    const tempDiv = document.createElement("div");
    tempDiv.innerHTML = html;
    tempDiv.querySelectorAll("*").forEach((el) => {
      Array.from(el.attributes).forEach((attr) => {
        if (attr.name.startsWith("data-")) {
          el.removeAttribute(attr.name);
        }
      });
    });
    tempDiv.querySelectorAll("*").forEach((el) => {
      el.removeAttribute("class");
    });
    tempDiv.querySelectorAll("*").forEach((el) => {
      el.removeAttribute("id");
    });
    return tempDiv.innerHTML;
  }
  static processImages(container) {
    return __async(this, null, function* () {
      const images = container.querySelectorAll("img");
      const imageArray = Array.from(images);
      for (const img of imageArray) {
        try {
          const response = yield fetch(img.src);
          const blob = yield response.blob();
          const reader = new FileReader();
          yield new Promise((resolve, reject) => {
            reader.onload = () => {
              img.src = reader.result;
              resolve(null);
            };
            reader.onerror = reject;
            reader.readAsDataURL(blob);
          });
        } catch (error) {
          console.error("\u56FE\u7247\u8F6C\u6362\u5931\u8D25:", error);
        }
      }
    });
  }
  static copyToClipboard(element) {
    return __async(this, null, function* () {
      try {
        const container = document.createElement("div");
        container.style.position = "absolute";
        container.style.left = "-9999px";
        container.innerHTML = element.innerHTML;
        document.body.appendChild(container);
        console.log(element.innerHTML);
        yield this.processImages(container);
        const cleanHtml = this.cleanupHtml(container.innerHTML);
        const clipData = new ClipboardItem({
          "text/html": new Blob([cleanHtml], { type: "text/html" }),
          "text/plain": new Blob([container.textContent || ""], { type: "text/plain" })
        });
        document.body.removeChild(container);
        yield navigator.clipboard.write([clipData]);
        new import_obsidian.Notice("\u5DF2\u590D\u5236\u5230\u526A\u8D34\u677F");
      } catch (error) {
        new import_obsidian.Notice("\u590D\u5236\u5931\u8D25");
      }
    });
  }
};

// src/donateManager.ts
var DonateManager = class {
  static showDonateModal(container) {
    this.overlay = container.createEl("div", {
      cls: "mp-donate-overlay"
    });
    this.modal = this.overlay.createEl("div", {
      cls: "mp-donate-modal"
    });
    const closeButton = this.modal.createEl("button", {
      cls: "mp-donate-close",
      text: "\xD7"
    });
    this.modal.createEl("h3", {
      text: "\u8BF7\u4F5C\u8005\u559D\u5496\u5561",
      cls: "mp-donate-title"
    });
    const content = this.modal.createEl("div", {
      cls: "mp-donate-content"
    });
    content.createEl("p", {
      text: "\u60A8\u7684\u652F\u6301\u662F\u6211\u6301\u7EED\u66F4\u65B0\u7684\u52A8\u529B \u2764\uFE0F",
      cls: "mp-donate-desc"
    });
    const paymentTabs = content.createEl("div", {
      cls: "mp-donate-tabs"
    });
    const wechatTab = paymentTabs.createEl("button", {
      text: "\u5FAE\u4FE1\u652F\u4ED8",
      cls: "mp-donate-tab active"
    });
    const alipayTab = paymentTabs.createEl("button", {
      text: "\u652F\u4ED8\u5B9D",
      cls: "mp-donate-tab"
    });
    const qrContainer = content.createEl("div", {
      cls: "mp-donate-qr-container"
    });
    const wechatQR = qrContainer.createEl("div", {
      cls: "mp-donate-qr active",
      attr: {
        "data-type": "wechat"
      }
    });
    wechatQR.createEl("img", {
      attr: {
        src: "./assets/images/wechat-qr.png",
        alt: "\u5FAE\u4FE1\u652F\u4ED8"
      }
    });
    const alipayQR = qrContainer.createEl("div", {
      cls: "mp-donate-qr",
      attr: {
        "data-type": "alipay"
      }
    });
    alipayQR.createEl("img", {
      attr: {
        src: "assets/images/alipay-qr.png",
        alt: "\u652F\u4ED8\u5B9D"
      }
    });
    wechatTab.addEventListener("click", () => this.switchTab("wechat", paymentTabs, qrContainer));
    alipayTab.addEventListener("click", () => this.switchTab("alipay", paymentTabs, qrContainer));
    closeButton.addEventListener("click", () => this.closeDonateModal());
    this.overlay.addEventListener("click", (e) => {
      if (e.target === this.overlay) {
        this.closeDonateModal();
      }
    });
  }
  static switchTab(type, tabsContainer, qrContainer) {
    tabsContainer.querySelectorAll(".mp-donate-tab").forEach((tab) => {
      var _a;
      tab.classList.remove("active");
      if ((_a = tab.textContent) == null ? void 0 : _a.includes(type === "wechat" ? "\u5FAE\u4FE1" : "\u652F\u4ED8\u5B9D")) {
        tab.classList.add("active");
      }
    });
    qrContainer.querySelectorAll(".mp-donate-qr").forEach((qr) => {
      qr.classList.remove("active");
      if (qr.getAttribute("data-type") === type) {
        qr.classList.add("active");
      }
    });
  }
  static closeDonateModal() {
    if (this.overlay) {
      this.overlay.remove();
    }
  }
};

// src/view.ts
var VIEW_TYPE_MP = "mp-preview";
var MPView = class extends import_obsidian2.ItemView {
  constructor(leaf, templateManager, settingsManager) {
    super(leaf);
    this.currentFile = null;
    this.updateTimer = null;
    this.isPreviewLocked = false;
    this.templateManager = templateManager;
    this.settingsManager = settingsManager;
  }
  getViewType() {
    return VIEW_TYPE_MP;
  }
  getDisplayText() {
    return "\u516C\u4F17\u53F7\u9884\u89C8";
  }
  getIcon() {
    return "eye";
  }
  // 在 onOpen 方法中更新底部锁定按钮的创建
  onOpen() {
    return __async(this, null, function* () {
      var _a, _b, _c, _d;
      const container = this.containerEl.children[1];
      container.empty();
      const toolbar = container.createEl("div", { cls: "mp-toolbar" });
      this.lockButton = toolbar.createEl("button", {
        cls: "mp-lock-button",
        attr: { "aria-label": "\u5173\u95ED\u5B9E\u65F6\u9884\u89C8\u72B6\u6001" }
      });
      this.lockButton.innerHTML = "\u{1F513}";
      this.lockButton.addEventListener("click", () => this.togglePreviewLock());
      const controlsGroup = toolbar.createEl("div", { cls: "mp-controls-group" });
      this.customTemplateSelect = this.createCustomSelect(
        controlsGroup,
        "mp-template-select",
        yield this.getTemplateOptions()
      );
      this.customTemplateSelect.id = "template-select";
      (_a = this.customTemplateSelect.querySelector(".custom-select")) == null ? void 0 : _a.addEventListener("change", (e) => __async(this, null, function* () {
        const value = e.detail.value;
        this.templateManager.setCurrentTemplate(value);
        yield this.settingsManager.updateSettings({
          templateId: value
        });
        this.templateManager.applyTemplate(this.previewEl);
      }));
      this.customFontSelect = this.createCustomSelect(
        controlsGroup,
        "mp-font-select",
        this.getFontOptions()
      );
      (_b = this.customFontSelect.querySelector(".custom-select")) == null ? void 0 : _b.addEventListener("change", (e) => __async(this, null, function* () {
        const value = e.detail.value;
        this.templateManager.setFont(value);
        yield this.settingsManager.updateSettings({
          fontFamily: value
        });
        this.templateManager.applyTemplate(this.previewEl);
      }));
      this.customFontSelect.id = "font-select";
      const fontSizeGroup = controlsGroup.createEl("div", { cls: "mp-font-size-group" });
      const decreaseButton = fontSizeGroup.createEl("button", {
        cls: "mp-font-size-btn",
        text: "-"
      });
      this.fontSizeSelect = fontSizeGroup.createEl("input", {
        cls: "mp-font-size-input",
        type: "text",
        value: "16",
        attr: {
          style: "border: none; outline: none; background: transparent;"
        }
      });
      const increaseButton = fontSizeGroup.createEl("button", {
        cls: "mp-font-size-btn",
        text: "+"
      });
      const settings = this.settingsManager.getSettings();
      if (settings.templateId) {
        const templateSelect = this.customTemplateSelect.querySelector(".selected-text");
        const templateDropdown = this.customTemplateSelect.querySelector(".select-dropdown");
        if (templateSelect && templateDropdown) {
          const option = yield this.getTemplateOptions();
          const selected = option.find((o) => o.value === settings.templateId);
          if (selected) {
            templateSelect.textContent = selected.label;
            (_c = this.customTemplateSelect.querySelector(".custom-select")) == null ? void 0 : _c.setAttribute("data-value", selected.value);
            templateDropdown.querySelectorAll(".select-item").forEach((el) => {
              if (el.getAttribute("data-value") === selected.value) {
                el.classList.add("selected");
              } else {
                el.classList.remove("selected");
              }
            });
          }
        }
        this.templateManager.setCurrentTemplate(settings.templateId);
      }
      if (settings.fontFamily) {
        const fontSelect = this.customFontSelect.querySelector(".selected-text");
        const fontDropdown = this.customFontSelect.querySelector(".select-dropdown");
        if (fontSelect && fontDropdown) {
          const option = this.getFontOptions();
          const selected = option.find((o) => o.value === settings.fontFamily);
          if (selected) {
            fontSelect.textContent = selected.label;
            (_d = this.customFontSelect.querySelector(".custom-select")) == null ? void 0 : _d.setAttribute("data-value", selected.value);
            fontDropdown.querySelectorAll(".select-item").forEach((el) => {
              if (el.getAttribute("data-value") === selected.value) {
                el.classList.add("selected");
              } else {
                el.classList.remove("selected");
              }
            });
          }
        }
        this.templateManager.setFont(settings.fontFamily);
      }
      if (settings.fontSize) {
        this.fontSizeSelect.value = settings.fontSize.toString();
        this.templateManager.setFontSize(settings.fontSize);
      }
      const updateFontSize = () => __async(this, null, function* () {
        const size = parseInt(this.fontSizeSelect.value);
        this.templateManager.setFontSize(size);
        yield this.settingsManager.updateSettings({
          fontSize: size
        });
        this.templateManager.applyTemplate(this.previewEl);
      });
      decreaseButton.addEventListener("click", () => {
        const currentSize = parseInt(this.fontSizeSelect.value);
        if (currentSize > 12) {
          this.fontSizeSelect.value = (currentSize - 1).toString();
          updateFontSize();
        }
      });
      increaseButton.addEventListener("click", () => {
        const currentSize = parseInt(this.fontSizeSelect.value);
        if (currentSize < 30) {
          this.fontSizeSelect.value = (currentSize + 1).toString();
          updateFontSize();
        }
      });
      this.fontSizeSelect.addEventListener("change", updateFontSize);
      this.previewEl = container.createEl("div", { cls: "mp-preview-area" });
      const bottomBar = container.createEl("div", { cls: "mp-bottom-bar" });
      const helpButton = bottomBar.createEl("button", {
        cls: "mp-help-button",
        attr: { "aria-label": "\u4F7F\u7528\u6307\u5357" }
      });
      helpButton.innerHTML = "\u2753";
      const tooltip = bottomBar.createEl("div", {
        cls: "mp-help-tooltip",
        text: `\u4F7F\u7528\u6307\u5357\uFF1A
                1. \u9009\u62E9\u559C\u6B22\u7684\u4E3B\u9898\u6A21\u677F
                2. \u8C03\u6574\u5B57\u4F53\u548C\u5B57\u53F7
                3. \u5B9E\u65F6\u9884\u89C8\u6548\u679C
                4. \u70B9\u51FB\u3010\u590D\u5236\u6309\u94AE\u3011\u5373\u53EF\u7C98\u8D34\u5230\u516C\u4F17\u53F7
                5. \u7F16\u8F91\u5B9E\u65F6\u67E5\u770B\u6548\u679C\uFF0C\u70B9\u{1F513}\u5173\u95ED\u5B9E\u65F6\u5237\u65B0
                6. \u5982\u679C\u4F60\u559C\u6B22\u8FD9\u4E2A\u63D2\u4EF6\uFF0C\u6B22\u8FCE\u6253\u8D4F`
      });
      const bottomControlsGroup = bottomBar.createEl("div", { cls: "mp-bottom-controls-group" });
      const likeButton = bottomControlsGroup.createEl("button", {
        cls: "mp-like-button"
      });
      likeButton.innerHTML = '<span style="margin-right: 4px">\u2615\uFE0F</span>\u8BF7\u4F5C\u8005\u559D\u5496\u5561';
      likeButton.addEventListener("click", () => {
        DonateManager.showDonateModal(this.containerEl);
      });
      this.copyButton = bottomControlsGroup.createEl("button", {
        text: "\u590D\u5236\u4E3A\u516C\u4F17\u53F7\u683C\u5F0F",
        cls: "mp-copy-button"
      });
      const newButton = bottomControlsGroup.createEl("button", {
        text: "\u656C\u8BF7\u671F\u5F85",
        cls: "mp-new-button"
      });
      this.copyButton.addEventListener("click", () => __async(this, null, function* () {
        if (this.previewEl) {
          this.copyButton.disabled = true;
          this.copyButton.setText("\u590D\u5236\u4E2D...");
          try {
            yield CopyManager.copyToClipboard(this.previewEl);
            this.copyButton.setText("\u590D\u5236\u6210\u529F");
            setTimeout(() => {
              this.copyButton.disabled = false;
              this.copyButton.setText("\u590D\u5236\u4E3A\u516C\u4F17\u53F7\u683C\u5F0F");
            }, 2e3);
          } catch (error) {
            this.copyButton.setText("\u590D\u5236\u5931\u8D25");
            setTimeout(() => {
              this.copyButton.disabled = false;
              this.copyButton.setText("\u590D\u5236\u4E3A\u516C\u4F17\u53F7\u683C\u5F0F");
            }, 2e3);
          }
        }
      }));
      this.registerEvent(
        this.app.workspace.on("file-open", this.onFileOpen.bind(this))
      );
      this.registerEvent(
        this.app.vault.on("modify", this.onFileModify.bind(this))
      );
      const currentFile = this.app.workspace.getActiveFile();
      yield this.onFileOpen(currentFile);
    });
  }
  updateControlsState(enabled) {
    this.lockButton.disabled = !enabled;
    const templateSelect = this.customTemplateSelect.querySelector(".custom-select");
    const fontSelect = this.customFontSelect.querySelector(".custom-select");
    if (templateSelect) {
      templateSelect.classList.toggle("disabled", !enabled);
      templateSelect.setAttribute("style", `pointer-events: ${enabled ? "auto" : "none"}`);
    }
    if (fontSelect) {
      fontSelect.classList.toggle("disabled", !enabled);
      fontSelect.setAttribute("style", `pointer-events: ${enabled ? "auto" : "none"}`);
    }
    this.fontSizeSelect.disabled = !enabled;
    this.copyButton.disabled = !enabled;
    const fontSizeButtons = this.containerEl.querySelectorAll(".mp-font-size-btn");
    fontSizeButtons.forEach((button) => {
      button.disabled = !enabled;
    });
  }
  onFileOpen(file) {
    return __async(this, null, function* () {
      this.currentFile = file;
      if (!file || file.extension !== "md") {
        this.previewEl.empty();
        this.previewEl.createEl("div", {
          text: "\u53EA\u80FD\u9884\u89C8 Markdown \u6587\u672C\u6587\u6863",
          cls: "mp-empty-message"
        });
        this.updateControlsState(false);
        return;
      }
      this.updateControlsState(true);
      this.isPreviewLocked = false;
      this.lockButton.innerHTML = "\u{1F513}";
      yield this.updatePreview();
    });
  }
  togglePreviewLock() {
    return __async(this, null, function* () {
      this.isPreviewLocked = !this.isPreviewLocked;
      const lockIcon = this.isPreviewLocked ? "\u{1F512}" : "\u{1F513}";
      const lockStatus = this.isPreviewLocked ? "\u5F00\u542F\u5B9E\u65F6\u9884\u89C8\u72B6\u6001" : "\u5173\u95ED\u5B9E\u65F6\u9884\u89C8\u72B6\u6001";
      this.lockButton.innerHTML = lockIcon;
      this.lockButton.setAttribute("aria-label", lockStatus);
      if (!this.isPreviewLocked) {
        yield this.updatePreview();
      }
    });
  }
  onFileModify(file) {
    return __async(this, null, function* () {
      if (file === this.currentFile && !this.isPreviewLocked) {
        if (this.updateTimer) {
          clearTimeout(this.updateTimer);
        }
        this.updateTimer = setTimeout(() => {
          this.updatePreview();
        }, 500);
      }
    });
  }
  updatePreview() {
    return __async(this, null, function* () {
      if (!this.currentFile) return;
      this.previewEl.empty();
      const content = yield this.app.vault.read(this.currentFile);
      yield import_obsidian2.MarkdownRenderer.renderMarkdown(
        content,
        this.previewEl,
        this.currentFile.path,
        this
      );
      MPConverter.formatContent(this.previewEl);
      this.templateManager.applyTemplate(this.previewEl);
    });
  }
  // 添加自定义下拉选择器创建方法
  createCustomSelect(parent, className, options) {
    var _a;
    const container = parent.createEl("div", { cls: "custom-select-container" });
    const select = container.createEl("div", { cls: "custom-select" });
    const selectedText = select.createEl("span", { cls: "selected-text" });
    const arrow = select.createEl("span", { cls: "select-arrow", text: "\u25BE" });
    const dropdown = container.createEl("div", { cls: "select-dropdown" });
    options.forEach((option) => {
      const item = dropdown.createEl("div", {
        cls: "select-item",
        text: option.label
      });
      item.dataset.value = option.value;
      item.addEventListener("click", () => {
        dropdown.querySelectorAll(".select-item").forEach((el) => el.classList.remove("selected"));
        item.classList.add("selected");
        selectedText.textContent = option.label;
        select.dataset.value = option.value;
        dropdown.classList.remove("show");
        select.dispatchEvent(new CustomEvent("change", {
          detail: { value: option.value }
        }));
      });
    });
    if (options.length > 0) {
      selectedText.textContent = options[0].label;
      select.dataset.value = options[0].value;
      (_a = dropdown.querySelector(".select-item")) == null ? void 0 : _a.classList.add("selected");
    }
    select.addEventListener("click", (e) => {
      e.stopPropagation();
      dropdown.classList.toggle("show");
    });
    document.addEventListener("click", () => {
      dropdown.classList.remove("show");
    });
    return container;
  }
  // 获取模板选项
  getTemplateOptions() {
    return __async(this, null, function* () {
      yield this.templateManager.loadTemplates();
      const templates = this.templateManager.getAllTemplates();
      return templates.length > 0 ? templates.map((t) => ({ value: t.id, label: t.name })) : [{ value: "default", label: "\u9ED8\u8BA4\u6A21\u677F" }];
    });
  }
  // 获取字体选项
  getFontOptions() {
    return [
      {
        value: 'Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, "PingFang SC", Cambria, Cochin, Georgia, Times, "Times New Roman", serif',
        label: "\u9ED8\u8BA4\u5B57\u4F53"
      },
      {
        value: 'SimSun, "\u5B8B\u4F53", serif',
        label: "\u5B8B\u4F53"
      },
      {
        value: 'SimHei, "\u9ED1\u4F53", sans-serif',
        label: "\u9ED1\u4F53"
      },
      {
        value: 'KaiTi, "\u6977\u4F53", serif',
        label: "\u6977\u4F53"
      },
      {
        value: '"Microsoft YaHei", "\u5FAE\u8F6F\u96C5\u9ED1", sans-serif',
        label: "\u96C5\u9ED1"
      }
    ];
  }
};

// src/templateManager.ts
var TemplateManager = class {
  constructor(app) {
    this.templates = /* @__PURE__ */ new Map();
    this.currentFont = "-apple-system";
    this.currentFontSize = 16;
    this.app = app;
    this.loadTemplates();
  }
  loadTemplates() {
    return __async(this, null, function* () {
      try {
        const configDir = this.app.vault.configDir;
        const templatesPath = `${configDir}/plugins/obsidian-to-mp/templates`;
        const defaultTemplate = JSON.parse(
          yield this.app.vault.adapter.read(`${templatesPath}/default.json`)
        );
        this.templates.set(defaultTemplate.id, defaultTemplate);
        this.currentTemplate = defaultTemplate;
        const minimalTemplate = JSON.parse(
          yield this.app.vault.adapter.read(`${templatesPath}/minimal.json`)
        );
        this.templates.set(minimalTemplate.id, minimalTemplate);
        const elegantTemplate = JSON.parse(
          yield this.app.vault.adapter.read(`${templatesPath}/elegant.json`)
        );
        this.templates.set(elegantTemplate.id, elegantTemplate);
        const darkTemplate = JSON.parse(
          yield this.app.vault.adapter.read(`${templatesPath}/dark.json`)
        );
        this.templates.set(darkTemplate.id, darkTemplate);
        const academicTemplate = JSON.parse(
          yield this.app.vault.adapter.read(`${templatesPath}/academic.json`)
        );
        this.templates.set(academicTemplate.id, academicTemplate);
      } catch (error) {
        console.error("\u52A0\u8F7D\u6A21\u677F\u5931\u8D25:", error);
        throw new Error("\u65E0\u6CD5\u52A0\u8F7D\u6A21\u677F\u6587\u4EF6");
      }
    });
  }
  getTemplate(id) {
    return this.templates.get(id);
  }
  getCurrentTemplate() {
    return this.currentTemplate;
  }
  setCurrentTemplate(id) {
    const template = this.templates.get(id);
    if (template) {
      this.currentTemplate = template;
      return true;
    }
    return false;
  }
  getAllTemplates() {
    return Array.from(this.templates.values());
  }
  setFont(fontFamily) {
    this.currentFont = fontFamily;
  }
  setFontSize(size) {
    this.currentFontSize = size;
  }
  applyTemplate(element) {
    const styles = this.currentTemplate.styles;
    const table = element.querySelector("table");
    const td = element.querySelector("td");
    if (!table || !td) return;
    table.setAttribute("style", styles.container);
    table.setAttribute("cellpadding", "0");
    table.setAttribute("cellspacing", "0");
    td.style.cssText = `
            word-break: break-all;
            padding: 0;
            margin: 0;
            line-height: 1.7;
            overflow-wrap: break-word;
            white-space: normal;
            border: none;
            font-family: ${this.currentFont};
        `;
    td.querySelectorAll("h1").forEach((el) => {
      el.setAttribute("style", `${styles.title.h1}; font-family: ${this.currentFont};`);
    });
    td.querySelectorAll("h2").forEach((el) => {
      el.setAttribute("style", `${styles.title.h2}; font-family: ${this.currentFont};`);
    });
    td.querySelectorAll("h3").forEach((el) => {
      el.setAttribute("style", `${styles.title.h3}; font-family: ${this.currentFont};`);
    });
    td.querySelectorAll("h4, h5, h6").forEach((el) => {
      el.setAttribute("style", `${styles.title.base}; font-family: ${this.currentFont};`);
    });
    td.querySelectorAll("p").forEach((el) => {
      var _a, _b;
      if (!((_a = el.parentElement) == null ? void 0 : _a.closest("p")) && !((_b = el.parentElement) == null ? void 0 : _b.closest("blockquote"))) {
        el.setAttribute("style", `${styles.paragraph}; font-family: ${this.currentFont}; font-size: ${this.currentFontSize}px;`);
      }
    });
    td.querySelectorAll("ul, ol").forEach((el) => {
      el.setAttribute("style", styles.list.container);
    });
    td.querySelectorAll("li").forEach((el) => {
      el.setAttribute("style", `${styles.list.item}; font-family: ${this.currentFont}; font-size: ${this.currentFontSize}px;`);
    });
    td.querySelectorAll(".task-list-item").forEach((el) => {
      el.setAttribute("style", `${styles.list.taskList}; font-family: ${this.currentFont}; font-size: ${this.currentFontSize}px;`);
    });
    td.querySelectorAll("blockquote").forEach((el) => {
      el.setAttribute("style", `${styles.quote}; font-family: ${this.currentFont}; font-size: ${this.currentFontSize}px;`);
    });
    td.querySelectorAll("pre").forEach((el) => {
      el.setAttribute("style", `${styles.code.block}; font-size: ${this.currentFontSize}px;`);
    });
    td.querySelectorAll("code:not(pre code)").forEach((el) => {
      el.setAttribute("style", `${styles.code.inline}; font-size: ${this.currentFontSize}px;`);
    });
    td.querySelectorAll("a").forEach((el) => {
      el.setAttribute("style", styles.link);
    });
    td.querySelectorAll("strong").forEach((el) => {
      el.setAttribute("style", styles.emphasis.strong);
    });
    td.querySelectorAll("em").forEach((el) => {
      el.setAttribute("style", styles.emphasis.em);
    });
    td.querySelectorAll("del").forEach((el) => {
      el.setAttribute("style", styles.emphasis.del);
    });
    td.querySelectorAll("table").forEach((el) => {
      if (el === table) return;
      el.setAttribute("style", styles.table.container);
    });
    td.querySelectorAll("th").forEach((el) => {
      el.setAttribute("style", `${styles.table.header}; font-family: ${this.currentFont}; font-size: ${this.currentFontSize}px;`);
    });
    td.querySelectorAll("td").forEach((el) => {
      if (el === td) return;
      el.setAttribute("style", `${styles.table.cell}; font-family: ${this.currentFont}; font-size: ${this.currentFontSize}px;`);
    });
    td.querySelectorAll("hr").forEach((el) => {
      el.setAttribute("style", styles.hr);
    });
    td.querySelectorAll(".footnote-ref").forEach((el) => {
      el.setAttribute("style", styles.footnote.ref);
    });
    td.querySelectorAll(".footnote-backref").forEach((el) => {
      el.setAttribute("style", styles.footnote.backref);
    });
    td.querySelectorAll("img").forEach((el) => {
      const img = el;
      el.setAttribute("style", `${styles.image}; font-family: ${this.currentFont};`);
      const parent = img.parentElement;
      if (parent && parent.tagName.toLowerCase() === "p") {
        if (parent.childNodes.length === 1) {
          parent.style.textAlign = "center";
          parent.style.margin = "1em 0";
        }
      }
    });
    td.querySelectorAll("pre").forEach((el) => {
      el.setAttribute("style", `${styles.code.block};`);
    });
    td.querySelectorAll("blockquote").forEach((el) => {
      el.setAttribute("style", `${styles.quote};`);
    });
    td.querySelectorAll("ul, ol").forEach((el) => {
      el.setAttribute("style", `${styles.list.container}; font-family: ${this.currentFont};`);
    });
    td.querySelectorAll("li").forEach((el) => {
      el.setAttribute("style", `${styles.list.item}; font-family: ${this.currentFont}; font-size: ${this.currentFontSize}px;`);
    });
  }
};

// src/settings.ts
var DEFAULT_SETTINGS = {
  templateId: "default",
  fontFamily: "-apple-system",
  fontSize: 16
};
var SettingsManager = class {
  constructor(plugin) {
    this.plugin = plugin;
    this.settings = DEFAULT_SETTINGS;
  }
  loadSettings() {
    return __async(this, null, function* () {
      this.settings = Object.assign({}, DEFAULT_SETTINGS, yield this.plugin.loadData());
    });
  }
  saveSettings() {
    return __async(this, null, function* () {
      yield this.plugin.saveData(this.settings);
    });
  }
  getSettings() {
    return this.settings;
  }
  updateSettings(settings) {
    return __async(this, null, function* () {
      this.settings = __spreadValues(__spreadValues({}, this.settings), settings);
      yield this.saveSettings();
    });
  }
};

// src/main.ts
var MPPlugin = class extends import_obsidian3.Plugin {
  onload() {
    return __async(this, null, function* () {
      this.settingsManager = new SettingsManager(this);
      yield this.settingsManager.loadSettings();
      const templateManager = new TemplateManager(this.app);
      MPConverter.initialize(this.app);
      this.registerView(
        VIEW_TYPE_MP,
        (leaf) => new MPView(leaf, templateManager, this.settingsManager)
      );
      this.addCommand({
        id: "open-mp-preview",
        name: "\u6253\u5F00\u516C\u4F17\u53F7\u9884\u89C8\u63D2\u4EF6",
        callback: () => __async(this, null, function* () {
          yield this.activateView();
        })
      });
      this.app.workspace.onLayoutReady(() => {
        this.activateView();
      });
      MPConverter.initialize(this.app);
    });
  }
  onunload() {
    return __async(this, null, function* () {
      this.app.workspace.detachLeavesOfType(VIEW_TYPE_MP);
    });
  }
  activateView() {
    return __async(this, null, function* () {
      const leaves = this.app.workspace.getLeavesOfType(VIEW_TYPE_MP);
      if (leaves.length > 0) {
        this.app.workspace.revealLeaf(leaves[0]);
        return;
      }
      const rightLeaf = this.app.workspace.getRightLeaf(false);
      if (rightLeaf) {
        yield rightLeaf.setViewState({
          type: VIEW_TYPE_MP,
          active: true
        });
      } else {
        new import_obsidian3.Notice("\u65E0\u6CD5\u521B\u5EFA\u89C6\u56FE\u9762\u677F");
      }
    });
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic3JjL21haW4udHMiLCAic3JjL3ZpZXcudHMiLCAic3JjL2NvbnZlcnRlci50cyIsICJzcmMvY29weU1hbmFnZXIudHMiLCAic3JjL2RvbmF0ZU1hbmFnZXIudHMiLCAic3JjL3RlbXBsYXRlTWFuYWdlci50cyIsICJzcmMvc2V0dGluZ3MudHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbImltcG9ydCB7IFBsdWdpbiwgTm90aWNlIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgTVBWaWV3LCBWSUVXX1RZUEVfTVAgfSBmcm9tICcuL3ZpZXcnO1xuaW1wb3J0IHsgVGVtcGxhdGVNYW5hZ2VyIH0gZnJvbSAnLi90ZW1wbGF0ZU1hbmFnZXInO1xuaW1wb3J0IHsgU2V0dGluZ3NNYW5hZ2VyIH0gZnJvbSAnLi9zZXR0aW5ncyc7XG5pbXBvcnQgeyBNUENvbnZlcnRlciB9IGZyb20gJy4vY29udmVydGVyJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTVBQbHVnaW4gZXh0ZW5kcyBQbHVnaW4ge1xuICAgIHByaXZhdGUgc2V0dGluZ3NNYW5hZ2VyOiBTZXR0aW5nc01hbmFnZXI7XG5cbiAgICBhc3luYyBvbmxvYWQoKSB7XG4gICAgICAgIC8vIFx1NTIxRFx1NTlDQlx1NTMxNlx1OEJCRVx1N0Y2RVx1N0JBMVx1NzQwNlx1NTY2OFxuICAgICAgICB0aGlzLnNldHRpbmdzTWFuYWdlciA9IG5ldyBTZXR0aW5nc01hbmFnZXIodGhpcyk7XG4gICAgICAgIGF3YWl0IHRoaXMuc2V0dGluZ3NNYW5hZ2VyLmxvYWRTZXR0aW5ncygpO1xuXG4gICAgICAgIC8vIFx1NTIxRFx1NTlDQlx1NTMxNlx1NkEyMVx1Njc3Rlx1N0JBMVx1NzQwNlx1NTY2OFxuICAgICAgICBjb25zdCB0ZW1wbGF0ZU1hbmFnZXIgPSBuZXcgVGVtcGxhdGVNYW5hZ2VyKHRoaXMuYXBwKTtcbiAgICAgICAgXG4gICAgICAgIC8vIFx1NTIxRFx1NTlDQlx1NTMxNlx1OEY2Q1x1NjM2Mlx1NTY2OFxuICAgICAgICBNUENvbnZlcnRlci5pbml0aWFsaXplKHRoaXMuYXBwKTtcblxuICAgICAgICAvLyBcdTZDRThcdTUxOENcdTg5QzZcdTU2RkVcbiAgICAgICAgdGhpcy5yZWdpc3RlclZpZXcoXG4gICAgICAgICAgICBWSUVXX1RZUEVfTVAsXG4gICAgICAgICAgICAobGVhZikgPT4gbmV3IE1QVmlldyhsZWFmLCB0ZW1wbGF0ZU1hbmFnZXIsIHRoaXMuc2V0dGluZ3NNYW5hZ2VyKVxuICAgICAgICApO1xuXG4gICAgICAgIC8vIFx1NkRGQlx1NTJBMFx1NTQ3RFx1NEVFNFx1NTIzMFx1NTQ3RFx1NEVFNFx1OTc2Mlx1Njc3RlxuICAgICAgICB0aGlzLmFkZENvbW1hbmQoe1xuICAgICAgICAgICAgaWQ6ICdvcGVuLW1wLXByZXZpZXcnLFxuICAgICAgICAgICAgbmFtZTogJ1x1NjI1M1x1NUYwMFx1NTE2Q1x1NEYxN1x1NTNGN1x1OTg4NFx1ODlDOFx1NjNEMlx1NEVGNicsXG4gICAgICAgICAgICBjYWxsYmFjazogYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuYWN0aXZhdGVWaWV3KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIFx1NjNEMlx1NEVGNlx1NTJBMFx1OEY3RFx1NjVGNlx1ODFFQVx1NTJBOFx1NkZDMFx1NkQzQlx1ODlDNlx1NTZGRVxuICAgICAgICB0aGlzLmFwcC53b3Jrc3BhY2Uub25MYXlvdXRSZWFkeSgoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmFjdGl2YXRlVmlldygpO1xuICAgICAgICB9KTtcbiAgICAgICAgTVBDb252ZXJ0ZXIuaW5pdGlhbGl6ZSh0aGlzLmFwcCk7XG4gICAgfVxuXG4gICAgYXN5bmMgb251bmxvYWQoKSB7XG4gICAgICAgIC8vIFx1NkUwNVx1NzQwNlx1ODlDNlx1NTZGRVxuICAgICAgICB0aGlzLmFwcC53b3Jrc3BhY2UuZGV0YWNoTGVhdmVzT2ZUeXBlKFZJRVdfVFlQRV9NUCk7XG4gICAgfVxuICAgIFxuICAgIGFzeW5jIGFjdGl2YXRlVmlldygpIHtcbiAgICAgICAgLy8gXHU1OTgyXHU2NzlDXHU4OUM2XHU1NkZFXHU1REYyXHU3RUNGXHU1QjU4XHU1NzI4XHVGRjBDXHU2RkMwXHU2RDNCXHU1QjgzXG4gICAgICAgIGNvbnN0IGxlYXZlcyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoVklFV19UWVBFX01QKTtcbiAgICAgICAgaWYgKGxlYXZlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICB0aGlzLmFwcC53b3Jrc3BhY2UucmV2ZWFsTGVhZihsZWF2ZXNbMF0pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gXHU1MjFCXHU1RUZBXHU2NUIwXHU4OUM2XHU1NkZFXG4gICAgICAgIGNvbnN0IHJpZ2h0TGVhZiA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRSaWdodExlYWYoZmFsc2UpO1xuICAgICAgICBpZiAocmlnaHRMZWFmKSB7XG4gICAgICAgICAgICBhd2FpdCByaWdodExlYWYuc2V0Vmlld1N0YXRlKHtcbiAgICAgICAgICAgICAgICB0eXBlOiBWSUVXX1RZUEVfTVAsXG4gICAgICAgICAgICAgICAgYWN0aXZlOiB0cnVlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBcdTU5ODJcdTY3OUNcdTY1RTBcdTZDRDVcdTgzQjdcdTUzRDZcdTUzRjNcdTRGQTdcdTk3NjJcdTY3N0ZcdUZGMENcdTY2M0VcdTc5M0FcdTk1MTlcdThCRUZcdTYzRDBcdTc5M0FcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1NjVFMFx1NkNENVx1NTIxQlx1NUVGQVx1ODlDNlx1NTZGRVx1OTc2Mlx1Njc3RicpO1xuICAgICAgICB9XG4gICAgfVxufSIsICJpbXBvcnQgeyBJdGVtVmlldywgV29ya3NwYWNlTGVhZiwgTWFya2Rvd25SZW5kZXJlciwgVEZpbGUgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBNUENvbnZlcnRlciB9IGZyb20gJy4vY29udmVydGVyJztcbmltcG9ydCB7IENvcHlNYW5hZ2VyIH0gZnJvbSAnLi9jb3B5TWFuYWdlcic7XG5pbXBvcnQgdHlwZSB7IFRlbXBsYXRlTWFuYWdlciB9IGZyb20gJy4vdGVtcGxhdGVNYW5hZ2VyJztcbmltcG9ydCB7IERvbmF0ZU1hbmFnZXIgfSBmcm9tICcuL2RvbmF0ZU1hbmFnZXInO1xuaW1wb3J0IHR5cGUgeyBTZXR0aW5nc01hbmFnZXIgfSBmcm9tICcuL3NldHRpbmdzJztcbmV4cG9ydCBjb25zdCBWSUVXX1RZUEVfTVAgPSAnbXAtcHJldmlldyc7XG5cbmV4cG9ydCBjbGFzcyBNUFZpZXcgZXh0ZW5kcyBJdGVtVmlldyB7XG4gICAgcHJpdmF0ZSBwcmV2aWV3RWw6IEhUTUxFbGVtZW50O1xuICAgIHByaXZhdGUgY3VycmVudEZpbGU6IFRGaWxlIHwgbnVsbCA9IG51bGw7XG4gICAgcHJpdmF0ZSB1cGRhdGVUaW1lcjogTm9kZUpTLlRpbWVvdXQgfCBudWxsID0gbnVsbDtcbiAgICBwcml2YXRlIGlzUHJldmlld0xvY2tlZDogYm9vbGVhbiA9IGZhbHNlO1xuICAgIHByaXZhdGUgbG9ja0J1dHRvbjogSFRNTEJ1dHRvbkVsZW1lbnQ7XG4gICAgcHJpdmF0ZSBjb3B5QnV0dG9uOiBIVE1MQnV0dG9uRWxlbWVudDtcbiAgICBwcml2YXRlIHRlbXBsYXRlTWFuYWdlcjogVGVtcGxhdGVNYW5hZ2VyO1xuICAgIHByaXZhdGUgc2V0dGluZ3NNYW5hZ2VyOiBTZXR0aW5nc01hbmFnZXI7XG4gICAgcHJpdmF0ZSBjdXN0b21UZW1wbGF0ZVNlbGVjdDogSFRNTEVsZW1lbnQ7XG4gICAgcHJpdmF0ZSBjdXN0b21Gb250U2VsZWN0OiBIVE1MRWxlbWVudDtcbiAgICBwcml2YXRlIGZvbnRTaXplU2VsZWN0OiBIVE1MSW5wdXRFbGVtZW50O1xuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIGxlYWY6IFdvcmtzcGFjZUxlYWYsIFxuICAgICAgICB0ZW1wbGF0ZU1hbmFnZXI6IFRlbXBsYXRlTWFuYWdlcixcbiAgICAgICAgc2V0dGluZ3NNYW5hZ2VyOiBTZXR0aW5nc01hbmFnZXJcbiAgICApIHtcbiAgICAgICAgc3VwZXIobGVhZik7XG4gICAgICAgIHRoaXMudGVtcGxhdGVNYW5hZ2VyID0gdGVtcGxhdGVNYW5hZ2VyO1xuICAgICAgICB0aGlzLnNldHRpbmdzTWFuYWdlciA9IHNldHRpbmdzTWFuYWdlcjtcbiAgICB9XG5cbiAgICBnZXRWaWV3VHlwZSgpIHtcbiAgICAgICAgcmV0dXJuIFZJRVdfVFlQRV9NUDtcbiAgICB9XG5cbiAgICBnZXREaXNwbGF5VGV4dCgpIHtcbiAgICAgICAgcmV0dXJuICdcdTUxNkNcdTRGMTdcdTUzRjdcdTk4ODRcdTg5QzgnO1xuICAgIH1cblxuICAgIGdldEljb24oKSB7XG4gICAgICAgcmV0dXJuICdleWUnO1xuICAgIH1cblxuICAgIC8vIFx1NTcyOCBvbk9wZW4gXHU2NUI5XHU2Q0Q1XHU0RTJEXHU2NkY0XHU2NUIwXHU1RTk1XHU5MEU4XHU5NTAxXHU1QjlBXHU2MzA5XHU5NEFFXHU3Njg0XHU1MjFCXHU1RUZBXG4gICAgYXN5bmMgb25PcGVuKCkge1xuICAgICAgICBjb25zdCBjb250YWluZXIgPSB0aGlzLmNvbnRhaW5lckVsLmNoaWxkcmVuWzFdO1xuICAgICAgICBjb250YWluZXIuZW1wdHkoKTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHRvb2xiYXIgPSBjb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnbXAtdG9vbGJhcicgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBcdTk1MDFcdTVCOUFcdTYzMDlcdTk0QUVcbiAgICAgICAgdGhpcy5sb2NrQnV0dG9uID0gdG9vbGJhci5jcmVhdGVFbCgnYnV0dG9uJywge1xuICAgICAgICAgICAgY2xzOiAnbXAtbG9jay1idXR0b24nLFxuICAgICAgICAgICAgYXR0cjogeyAnYXJpYS1sYWJlbCc6ICdcdTUxNzNcdTk1RURcdTVCOUVcdTY1RjZcdTk4ODRcdTg5QzhcdTcyQjZcdTYwMDEnIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMubG9ja0J1dHRvbi5pbm5lckhUTUwgPSAnXHVEODNEXHVERDEzJztcbiAgICAgICAgdGhpcy5sb2NrQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy50b2dnbGVQcmV2aWV3TG9jaygpKTtcbiAgICBcbiAgICAgICAgLy8gXHU1MjFCXHU1RUZBXHU0RTJEXHU5NUY0XHU2M0E3XHU0RUY2XHU1QkI5XHU1NjY4XG4gICAgICAgIGNvbnN0IGNvbnRyb2xzR3JvdXAgPSB0b29sYmFyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ21wLWNvbnRyb2xzLWdyb3VwJyB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIFx1NTIxQlx1NUVGQVx1ODFFQVx1NUI5QVx1NEU0OVx1NEUwQlx1NjJDOVx1OTAwOVx1NjJFOVx1NTY2OFxuICAgICAgICB0aGlzLmN1c3RvbVRlbXBsYXRlU2VsZWN0ID0gdGhpcy5jcmVhdGVDdXN0b21TZWxlY3QoXG4gICAgICAgICAgICBjb250cm9sc0dyb3VwLFxuICAgICAgICAgICAgJ21wLXRlbXBsYXRlLXNlbGVjdCcsXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmdldFRlbXBsYXRlT3B0aW9ucygpXG4gICAgICAgICk7XG4gICAgICAgIHRoaXMuY3VzdG9tVGVtcGxhdGVTZWxlY3QuaWQgPSAndGVtcGxhdGUtc2VsZWN0JztcbiAgICAgICAgXG4gICAgICAgIC8vIFx1NkRGQlx1NTJBMFx1NkEyMVx1Njc3Rlx1OTAwOVx1NjJFOVx1NTY2OFx1NzY4NCBjaGFuZ2UgXHU0RThCXHU0RUY2XHU3NkQxXHU1NDJDXG4gICAgICAgIHRoaXMuY3VzdG9tVGVtcGxhdGVTZWxlY3QucXVlcnlTZWxlY3RvcignLmN1c3RvbS1zZWxlY3QnKT8uYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgYXN5bmMgKGU6IGFueSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBlLmRldGFpbC52YWx1ZTtcbiAgICAgICAgICAgIHRoaXMudGVtcGxhdGVNYW5hZ2VyLnNldEN1cnJlbnRUZW1wbGF0ZSh2YWx1ZSk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnNldHRpbmdzTWFuYWdlci51cGRhdGVTZXR0aW5ncyh7XG4gICAgICAgICAgICAgICAgdGVtcGxhdGVJZDogdmFsdWVcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy50ZW1wbGF0ZU1hbmFnZXIuYXBwbHlUZW1wbGF0ZSh0aGlzLnByZXZpZXdFbCk7XG4gICAgICAgIH0pO1xuICAgIFxuICAgICAgICB0aGlzLmN1c3RvbUZvbnRTZWxlY3QgPSB0aGlzLmNyZWF0ZUN1c3RvbVNlbGVjdChcbiAgICAgICAgICAgIGNvbnRyb2xzR3JvdXAsXG4gICAgICAgICAgICAnbXAtZm9udC1zZWxlY3QnLFxuICAgICAgICAgICAgdGhpcy5nZXRGb250T3B0aW9ucygpXG4gICAgICAgICk7XG5cbiAgICAgICAgLy8gXHU2REZCXHU1MkEwXHU1QjU3XHU0RjUzXHU5MDA5XHU2MkU5XHU1NjY4XHU3Njg0IGNoYW5nZSBcdTRFOEJcdTRFRjZcdTc2RDFcdTU0MkNcbiAgICAgICAgdGhpcy5jdXN0b21Gb250U2VsZWN0LnF1ZXJ5U2VsZWN0b3IoJy5jdXN0b20tc2VsZWN0Jyk/LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGFzeW5jIChlOiBhbnkpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gZS5kZXRhaWwudmFsdWU7XG4gICAgICAgICAgICB0aGlzLnRlbXBsYXRlTWFuYWdlci5zZXRGb250KHZhbHVlKTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuc2V0dGluZ3NNYW5hZ2VyLnVwZGF0ZVNldHRpbmdzKHtcbiAgICAgICAgICAgICAgICBmb250RmFtaWx5OiB2YWx1ZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLnRlbXBsYXRlTWFuYWdlci5hcHBseVRlbXBsYXRlKHRoaXMucHJldmlld0VsKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuY3VzdG9tRm9udFNlbGVjdC5pZCA9ICdmb250LXNlbGVjdCc7XG4gICAgICAgIC8vIFx1NUI1N1x1NTNGN1x1OEMwM1x1NjU3NFxuICAgICAgICBjb25zdCBmb250U2l6ZUdyb3VwID0gY29udHJvbHNHcm91cC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdtcC1mb250LXNpemUtZ3JvdXAnIH0pO1xuICAgICAgICBjb25zdCBkZWNyZWFzZUJ1dHRvbiA9IGZvbnRTaXplR3JvdXAuY3JlYXRlRWwoJ2J1dHRvbicsIHsgXG4gICAgICAgICAgICBjbHM6ICdtcC1mb250LXNpemUtYnRuJyxcbiAgICAgICAgICAgIHRleHQ6ICctJ1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5mb250U2l6ZVNlbGVjdCA9IGZvbnRTaXplR3JvdXAuY3JlYXRlRWwoJ2lucHV0JywgeyBcbiAgICAgICAgICAgIGNsczogJ21wLWZvbnQtc2l6ZS1pbnB1dCcsXG4gICAgICAgICAgICB0eXBlOiAndGV4dCcsXG4gICAgICAgICAgICB2YWx1ZTogJzE2JyxcbiAgICAgICAgICAgIGF0dHI6IHtcbiAgICAgICAgICAgICAgICBzdHlsZTogJ2JvcmRlcjogbm9uZTsgb3V0bGluZTogbm9uZTsgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7J1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgaW5jcmVhc2VCdXR0b24gPSBmb250U2l6ZUdyb3VwLmNyZWF0ZUVsKCdidXR0b24nLCB7IFxuICAgICAgICAgICAgY2xzOiAnbXAtZm9udC1zaXplLWJ0bicsXG4gICAgICAgICAgICB0ZXh0OiAnKydcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gXHU0RUNFXHU4QkJFXHU3RjZFXHU0RTJEXHU2MDYyXHU1OTBEXHU0RTBBXHU2QjIxXHU3Njg0XHU5MDA5XHU2MkU5XG4gICAgICAgIGNvbnN0IHNldHRpbmdzID0gdGhpcy5zZXR0aW5nc01hbmFnZXIuZ2V0U2V0dGluZ3MoKTtcbiAgICAgICAgXG4gICAgICAgIC8vIFx1NjA2Mlx1NTkwRFx1OEJCRVx1N0Y2RVxuICAgICAgICBpZiAoc2V0dGluZ3MudGVtcGxhdGVJZCkge1xuICAgICAgICAgICAgY29uc3QgdGVtcGxhdGVTZWxlY3QgPSB0aGlzLmN1c3RvbVRlbXBsYXRlU2VsZWN0LnF1ZXJ5U2VsZWN0b3IoJy5zZWxlY3RlZC10ZXh0Jyk7XG4gICAgICAgICAgICBjb25zdCB0ZW1wbGF0ZURyb3Bkb3duID0gdGhpcy5jdXN0b21UZW1wbGF0ZVNlbGVjdC5xdWVyeVNlbGVjdG9yKCcuc2VsZWN0LWRyb3Bkb3duJyk7XG4gICAgICAgICAgICBpZiAodGVtcGxhdGVTZWxlY3QgJiYgdGVtcGxhdGVEcm9wZG93bikge1xuICAgICAgICAgICAgICAgIGNvbnN0IG9wdGlvbiA9IGF3YWl0IHRoaXMuZ2V0VGVtcGxhdGVPcHRpb25zKCk7XG4gICAgICAgICAgICAgICAgY29uc3Qgc2VsZWN0ZWQgPSBvcHRpb24uZmluZChvID0+IG8udmFsdWUgPT09IHNldHRpbmdzLnRlbXBsYXRlSWQpO1xuICAgICAgICAgICAgICAgIGlmIChzZWxlY3RlZCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBcdTY2RjRcdTY1QjBcdTkwMDlcdTRFMkRcdTY1ODdcdTY3MkNcdTU0OENcdTUwM0NcbiAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGVTZWxlY3QudGV4dENvbnRlbnQgPSBzZWxlY3RlZC5sYWJlbDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXN0b21UZW1wbGF0ZVNlbGVjdC5xdWVyeVNlbGVjdG9yKCcuY3VzdG9tLXNlbGVjdCcpPy5zZXRBdHRyaWJ1dGUoJ2RhdGEtdmFsdWUnLCBzZWxlY3RlZC52YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIC8vIFx1NjZGNFx1NjVCMFx1NEUwQlx1NjJDOVx1NTIxN1x1ODg2OFx1NEUyRFx1NzY4NFx1OTAwOVx1NEUyRFx1NzJCNlx1NjAwMVxuICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZURyb3Bkb3duLnF1ZXJ5U2VsZWN0b3JBbGwoJy5zZWxlY3QtaXRlbScpLmZvckVhY2goZWwgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVsLmdldEF0dHJpYnV0ZSgnZGF0YS12YWx1ZScpID09PSBzZWxlY3RlZC52YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsLmNsYXNzTGlzdC5hZGQoJ3NlbGVjdGVkJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsLmNsYXNzTGlzdC5yZW1vdmUoJ3NlbGVjdGVkJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMudGVtcGxhdGVNYW5hZ2VyLnNldEN1cnJlbnRUZW1wbGF0ZShzZXR0aW5ncy50ZW1wbGF0ZUlkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChzZXR0aW5ncy5mb250RmFtaWx5KSB7XG4gICAgICAgICAgICBjb25zdCBmb250U2VsZWN0ID0gdGhpcy5jdXN0b21Gb250U2VsZWN0LnF1ZXJ5U2VsZWN0b3IoJy5zZWxlY3RlZC10ZXh0Jyk7XG4gICAgICAgICAgICBjb25zdCBmb250RHJvcGRvd24gPSB0aGlzLmN1c3RvbUZvbnRTZWxlY3QucXVlcnlTZWxlY3RvcignLnNlbGVjdC1kcm9wZG93bicpO1xuICAgICAgICAgICAgaWYgKGZvbnRTZWxlY3QgJiYgZm9udERyb3Bkb3duKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgb3B0aW9uID0gdGhpcy5nZXRGb250T3B0aW9ucygpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHNlbGVjdGVkID0gb3B0aW9uLmZpbmQobyA9PiBvLnZhbHVlID09PSBzZXR0aW5ncy5mb250RmFtaWx5KTtcbiAgICAgICAgICAgICAgICBpZiAoc2VsZWN0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gXHU2NkY0XHU2NUIwXHU5MDA5XHU0RTJEXHU2NTg3XHU2NzJDXHU1NDhDXHU1MDNDXG4gICAgICAgICAgICAgICAgICAgIGZvbnRTZWxlY3QudGV4dENvbnRlbnQgPSBzZWxlY3RlZC5sYWJlbDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXN0b21Gb250U2VsZWN0LnF1ZXJ5U2VsZWN0b3IoJy5jdXN0b20tc2VsZWN0Jyk/LnNldEF0dHJpYnV0ZSgnZGF0YS12YWx1ZScsIHNlbGVjdGVkLnZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gXHU2NkY0XHU2NUIwXHU0RTBCXHU2MkM5XHU1MjE3XHU4ODY4XHU0RTJEXHU3Njg0XHU5MDA5XHU0RTJEXHU3MkI2XHU2MDAxXG4gICAgICAgICAgICAgICAgICAgIGZvbnREcm9wZG93bi5xdWVyeVNlbGVjdG9yQWxsKCcuc2VsZWN0LWl0ZW0nKS5mb3JFYWNoKGVsID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlbC5nZXRBdHRyaWJ1dGUoJ2RhdGEtdmFsdWUnKSA9PT0gc2VsZWN0ZWQudmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbC5jbGFzc0xpc3QuYWRkKCdzZWxlY3RlZCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbC5jbGFzc0xpc3QucmVtb3ZlKCdzZWxlY3RlZCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnRlbXBsYXRlTWFuYWdlci5zZXRGb250KHNldHRpbmdzLmZvbnRGYW1pbHkpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHNldHRpbmdzLmZvbnRTaXplKSB7XG4gICAgICAgICAgICB0aGlzLmZvbnRTaXplU2VsZWN0LnZhbHVlID0gc2V0dGluZ3MuZm9udFNpemUudG9TdHJpbmcoKTtcbiAgICAgICAgICAgIHRoaXMudGVtcGxhdGVNYW5hZ2VyLnNldEZvbnRTaXplKHNldHRpbmdzLmZvbnRTaXplKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFx1NjZGNFx1NjVCMFx1NUI1N1x1NTNGN1x1OEMwM1x1NjU3NFx1NEU4Qlx1NEVGNlxuICAgICAgICBjb25zdCB1cGRhdGVGb250U2l6ZSA9IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHNpemUgPSBwYXJzZUludCh0aGlzLmZvbnRTaXplU2VsZWN0LnZhbHVlKTtcbiAgICAgICAgICAgIHRoaXMudGVtcGxhdGVNYW5hZ2VyLnNldEZvbnRTaXplKHNpemUpO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5zZXR0aW5nc01hbmFnZXIudXBkYXRlU2V0dGluZ3Moe1xuICAgICAgICAgICAgICAgIGZvbnRTaXplOiBzaXplXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMudGVtcGxhdGVNYW5hZ2VyLmFwcGx5VGVtcGxhdGUodGhpcy5wcmV2aWV3RWwpO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8vIFx1NUI1N1x1NTNGN1x1OEMwM1x1NjU3NFx1NjMwOVx1OTRBRVx1NEU4Qlx1NEVGNlxuICAgICAgICBkZWNyZWFzZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRTaXplID0gcGFyc2VJbnQodGhpcy5mb250U2l6ZVNlbGVjdC52YWx1ZSk7XG4gICAgICAgICAgICBpZiAoY3VycmVudFNpemUgPiAxMikge1xuICAgICAgICAgICAgICAgIHRoaXMuZm9udFNpemVTZWxlY3QudmFsdWUgPSAoY3VycmVudFNpemUgLSAxKS50b1N0cmluZygpO1xuICAgICAgICAgICAgICAgIHVwZGF0ZUZvbnRTaXplKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGluY3JlYXNlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgY3VycmVudFNpemUgPSBwYXJzZUludCh0aGlzLmZvbnRTaXplU2VsZWN0LnZhbHVlKTtcbiAgICAgICAgICAgIGlmIChjdXJyZW50U2l6ZSA8IDMwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5mb250U2l6ZVNlbGVjdC52YWx1ZSA9IChjdXJyZW50U2l6ZSArIDEpLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgdXBkYXRlRm9udFNpemUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5mb250U2l6ZVNlbGVjdC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCB1cGRhdGVGb250U2l6ZSk7XG5cbiAgICAgICAgLy8gXHU5ODg0XHU4OUM4XHU1MzNBXHU1N0RGXG4gICAgICAgIHRoaXMucHJldmlld0VsID0gY29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ21wLXByZXZpZXctYXJlYScgfSk7XG5cbiAgICAgICAgLy8gXHU1RTk1XHU5MEU4XHU1REU1XHU1MTc3XHU2ODBGXG4gICAgICAgIGNvbnN0IGJvdHRvbUJhciA9IGNvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdtcC1ib3R0b20tYmFyJyB9KTtcblxuICAgICAgICAvLyBcdTZERkJcdTUyQTBcdTRGN0ZcdTc1MjhcdThCRjRcdTY2MEVcdTYzMDlcdTk0QUVcbiAgICAgICAgY29uc3QgaGVscEJ1dHRvbiA9IGJvdHRvbUJhci5jcmVhdGVFbCgnYnV0dG9uJywge1xuICAgICAgICAgICAgY2xzOiAnbXAtaGVscC1idXR0b24nLFxuICAgICAgICAgICAgYXR0cjogeyAnYXJpYS1sYWJlbCc6ICdcdTRGN0ZcdTc1MjhcdTYzMDdcdTUzNTcnIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGhlbHBCdXR0b24uaW5uZXJIVE1MID0gJ1x1Mjc1Myc7XG4gICAgICAgIFxuICAgICAgICAvLyBcdTUyMUJcdTVFRkFcdTYzRDBcdTc5M0FcdTY4NDZcbiAgICAgICAgY29uc3QgdG9vbHRpcCA9IGJvdHRvbUJhci5jcmVhdGVFbCgnZGl2Jywge1xuICAgICAgICAgICAgY2xzOiAnbXAtaGVscC10b29sdGlwJyxcbiAgICAgICAgICAgIHRleHQ6IGBcdTRGN0ZcdTc1MjhcdTYzMDdcdTUzNTdcdUZGMUFcbiAgICAgICAgICAgICAgICAxLiBcdTkwMDlcdTYyRTlcdTU1OUNcdTZCMjJcdTc2ODRcdTRFM0JcdTk4OThcdTZBMjFcdTY3N0ZcbiAgICAgICAgICAgICAgICAyLiBcdThDMDNcdTY1NzRcdTVCNTdcdTRGNTNcdTU0OENcdTVCNTdcdTUzRjdcbiAgICAgICAgICAgICAgICAzLiBcdTVCOUVcdTY1RjZcdTk4ODRcdTg5QzhcdTY1NDhcdTY3OUNcbiAgICAgICAgICAgICAgICA0LiBcdTcwQjlcdTUxRkJcdTMwMTBcdTU5MERcdTUyMzZcdTYzMDlcdTk0QUVcdTMwMTFcdTUzNzNcdTUzRUZcdTdDOThcdThEMzRcdTUyMzBcdTUxNkNcdTRGMTdcdTUzRjdcbiAgICAgICAgICAgICAgICA1LiBcdTdGMTZcdThGOTFcdTVCOUVcdTY1RjZcdTY3RTVcdTc3MEJcdTY1NDhcdTY3OUNcdUZGMENcdTcwQjlcdUQ4M0RcdUREMTNcdTUxNzNcdTk1RURcdTVCOUVcdTY1RjZcdTUyMzdcdTY1QjBcbiAgICAgICAgICAgICAgICA2LiBcdTU5ODJcdTY3OUNcdTRGNjBcdTU1OUNcdTZCMjJcdThGRDlcdTRFMkFcdTYzRDJcdTRFRjZcdUZGMENcdTZCMjJcdThGQ0VcdTYyNTNcdThENEZgXG4gICAgICAgIH0pO1xuICAgICAgICAvLyBcdTUyMUJcdTVFRkFcdTRFMkRcdTk1RjRcdTYzQTdcdTRFRjZcdTVCQjlcdTU2NjhcbiAgICAgICAgY29uc3QgYm90dG9tQ29udHJvbHNHcm91cCA9IGJvdHRvbUJhci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdtcC1ib3R0b20tY29udHJvbHMtZ3JvdXAnIH0pO1xuICAgICAgICBcbiAgICAgICAgLy8gXHU4QkY3XHU0RjVDXHU4MDA1XHU1NTlEXHU1NDk2XHU1NTYxXHU2MzA5XHU5NEFFXG4gICAgICAgIGNvbnN0IGxpa2VCdXR0b24gPSBib3R0b21Db250cm9sc0dyb3VwLmNyZWF0ZUVsKCdidXR0b24nLCB7IFxuICAgICAgICAgICAgY2xzOiAnbXAtbGlrZS1idXR0b24nXG4gICAgICAgIH0pO1xuICAgICAgICBsaWtlQnV0dG9uLmlubmVySFRNTCA9ICc8c3BhbiBzdHlsZT1cIm1hcmdpbi1yaWdodDogNHB4XCI+XHUyNjE1XHVGRTBGPC9zcGFuPlx1OEJGN1x1NEY1Q1x1ODAwNVx1NTU5RFx1NTQ5Nlx1NTU2MSc7XG4gICAgICAgIGxpa2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICBEb25hdGVNYW5hZ2VyLnNob3dEb25hdGVNb2RhbCh0aGlzLmNvbnRhaW5lckVsKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gXHU1NzI4XHU2M0E3XHU0RUY2XHU1QkI5XHU1NjY4XHU0RTJEXHU1MjFCXHU1RUZBXHU2MzA5XHU5NEFFXG4gICAgICAgIHRoaXMuY29weUJ1dHRvbiA9IGJvdHRvbUNvbnRyb2xzR3JvdXAuY3JlYXRlRWwoJ2J1dHRvbicsIHsgXG4gICAgICAgICAgICB0ZXh0OiAnXHU1OTBEXHU1MjM2XHU0RTNBXHU1MTZDXHU0RjE3XHU1M0Y3XHU2ODNDXHU1RjBGJyxcbiAgICAgICAgICAgIGNsczogJ21wLWNvcHktYnV0dG9uJ1xuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCBuZXdCdXR0b24gPSBib3R0b21Db250cm9sc0dyb3VwLmNyZWF0ZUVsKCdidXR0b24nLCB7IFxuICAgICAgICAgICAgdGV4dDogJ1x1NjU2Q1x1OEJGN1x1NjcxRlx1NUY4NScsXG4gICAgICAgICAgICBjbHM6ICdtcC1uZXctYnV0dG9uJ1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBcdTZERkJcdTUyQTBcdTU5MERcdTUyMzZcdTYzMDlcdTk0QUVcdTcwQjlcdTUxRkJcdTRFOEJcdTRFRjZcbiAgICAgICAgdGhpcy5jb3B5QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgaWYgKHRoaXMucHJldmlld0VsKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jb3B5QnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB0aGlzLmNvcHlCdXR0b24uc2V0VGV4dCgnXHU1OTBEXHU1MjM2XHU0RTJELi4uJyk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgQ29weU1hbmFnZXIuY29weVRvQ2xpcGJvYXJkKHRoaXMucHJldmlld0VsKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb3B5QnV0dG9uLnNldFRleHQoJ1x1NTkwRFx1NTIzNlx1NjIxMFx1NTI5RicpO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvcHlCdXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29weUJ1dHRvbi5zZXRUZXh0KCdcdTU5MERcdTUyMzZcdTRFM0FcdTUxNkNcdTRGMTdcdTUzRjdcdTY4M0NcdTVGMEYnKTtcbiAgICAgICAgICAgICAgICAgICAgfSwgMjAwMCk7XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb3B5QnV0dG9uLnNldFRleHQoJ1x1NTkwRFx1NTIzNlx1NTkzMVx1OEQyNScpO1xuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29weUJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb3B5QnV0dG9uLnNldFRleHQoJ1x1NTkwRFx1NTIzNlx1NEUzQVx1NTE2Q1x1NEYxN1x1NTNGN1x1NjgzQ1x1NUYwRicpO1xuICAgICAgICAgICAgICAgICAgICB9LCAyMDAwKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIFx1NzZEMVx1NTQyQ1x1NjU4N1x1Njg2M1x1NTNEOFx1NTMxNlxuICAgICAgICB0aGlzLnJlZ2lzdGVyRXZlbnQoXG4gICAgICAgICAgICB0aGlzLmFwcC53b3Jrc3BhY2Uub24oJ2ZpbGUtb3BlbicsIHRoaXMub25GaWxlT3Blbi5iaW5kKHRoaXMpKVxuICAgICAgICApO1xuXG4gICAgICAgIC8vIFx1NzZEMVx1NTQyQ1x1NjU4N1x1Njg2M1x1NTE4NVx1NUJCOVx1NTNEOFx1NTMxNlxuICAgICAgICB0aGlzLnJlZ2lzdGVyRXZlbnQoXG4gICAgICAgICAgICB0aGlzLmFwcC52YXVsdC5vbignbW9kaWZ5JywgdGhpcy5vbkZpbGVNb2RpZnkuYmluZCh0aGlzKSlcbiAgICAgICAgKTtcblxuICAgICAgICAvLyBcdTY4QzBcdTY3RTVcdTVGNTNcdTUyNERcdTYyNTNcdTVGMDBcdTc2ODRcdTY1ODdcdTRFRjZcbiAgICAgICAgY29uc3QgY3VycmVudEZpbGUgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xuICAgICAgICBhd2FpdCB0aGlzLm9uRmlsZU9wZW4oY3VycmVudEZpbGUpO1xuICAgIH1cblxuICAgIHByaXZhdGUgdXBkYXRlQ29udHJvbHNTdGF0ZShlbmFibGVkOiBib29sZWFuKSB7XG4gICAgICAgIHRoaXMubG9ja0J1dHRvbi5kaXNhYmxlZCA9ICFlbmFibGVkO1xuICAgICAgICAvLyBcdTY2RjRcdTY1QjBcdTgxRUFcdTVCOUFcdTRFNDlcdTkwMDlcdTYyRTlcdTU2NjhcdTc2ODRcdTc5ODFcdTc1MjhcdTcyQjZcdTYwMDFcbiAgICAgICAgY29uc3QgdGVtcGxhdGVTZWxlY3QgPSB0aGlzLmN1c3RvbVRlbXBsYXRlU2VsZWN0LnF1ZXJ5U2VsZWN0b3IoJy5jdXN0b20tc2VsZWN0Jyk7XG4gICAgICAgIGNvbnN0IGZvbnRTZWxlY3QgPSB0aGlzLmN1c3RvbUZvbnRTZWxlY3QucXVlcnlTZWxlY3RvcignLmN1c3RvbS1zZWxlY3QnKTtcbiAgICAgICAgaWYgKHRlbXBsYXRlU2VsZWN0KSB7XG4gICAgICAgICAgICB0ZW1wbGF0ZVNlbGVjdC5jbGFzc0xpc3QudG9nZ2xlKCdkaXNhYmxlZCcsICFlbmFibGVkKTtcbiAgICAgICAgICAgIC8vIFx1NEY3Rlx1NzUyOHNldEF0dHJpYnV0ZVx1Njc2NVx1OEJCRVx1N0Y2RXN0eWxlXHU1QzVFXHU2MDI3XG4gICAgICAgICAgICB0ZW1wbGF0ZVNlbGVjdC5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywgYHBvaW50ZXItZXZlbnRzOiAke2VuYWJsZWQgPyAnYXV0bycgOiAnbm9uZSd9YCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGZvbnRTZWxlY3QpIHtcbiAgICAgICAgICAgIGZvbnRTZWxlY3QuY2xhc3NMaXN0LnRvZ2dsZSgnZGlzYWJsZWQnLCAhZW5hYmxlZCk7XG4gICAgICAgICAgICAvLyBcdTRGN0ZcdTc1MjhzZXRBdHRyaWJ1dGVcdTY3NjVcdThCQkVcdTdGNkVzdHlsZVx1NUM1RVx1NjAyN1xuICAgICAgICAgICAgZm9udFNlbGVjdC5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywgYHBvaW50ZXItZXZlbnRzOiAke2VuYWJsZWQgPyAnYXV0bycgOiAnbm9uZSd9YCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5mb250U2l6ZVNlbGVjdC5kaXNhYmxlZCA9ICFlbmFibGVkO1xuICAgICAgICB0aGlzLmNvcHlCdXR0b24uZGlzYWJsZWQgPSAhZW5hYmxlZDtcbiAgICAgICAgXG4gICAgICAgIC8vIFx1NkRGQlx1NTJBMFx1NUI1N1x1NTNGN1x1OEMwM1x1ODI4Mlx1NjMwOVx1OTRBRVx1NzY4NFx1NzJCNlx1NjAwMVx1NjNBN1x1NTIzNlxuICAgICAgICBjb25zdCBmb250U2l6ZUJ1dHRvbnMgPSB0aGlzLmNvbnRhaW5lckVsLnF1ZXJ5U2VsZWN0b3JBbGwoJy5tcC1mb250LXNpemUtYnRuJyk7XG4gICAgICAgIGZvbnRTaXplQnV0dG9ucy5mb3JFYWNoKGJ1dHRvbiA9PiB7XG4gICAgICAgICAgICAoYnV0dG9uIGFzIEhUTUxCdXR0b25FbGVtZW50KS5kaXNhYmxlZCA9ICFlbmFibGVkO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBhc3luYyBvbkZpbGVPcGVuKGZpbGU6IFRGaWxlIHwgbnVsbCkge1xuICAgICAgICB0aGlzLmN1cnJlbnRGaWxlID0gZmlsZTtcbiAgICAgICAgaWYgKCFmaWxlIHx8IGZpbGUuZXh0ZW5zaW9uICE9PSAnbWQnKSB7XG4gICAgICAgICAgICB0aGlzLnByZXZpZXdFbC5lbXB0eSgpO1xuICAgICAgICAgICAgdGhpcy5wcmV2aWV3RWwuY3JlYXRlRWwoJ2RpdicsIHtcbiAgICAgICAgICAgICAgICB0ZXh0OiAnXHU1M0VBXHU4MEZEXHU5ODg0XHU4OUM4IE1hcmtkb3duIFx1NjU4N1x1NjcyQ1x1NjU4N1x1Njg2MycsXG4gICAgICAgICAgICAgICAgY2xzOiAnbXAtZW1wdHktbWVzc2FnZSdcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVDb250cm9sc1N0YXRlKGZhbHNlKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMudXBkYXRlQ29udHJvbHNTdGF0ZSh0cnVlKTtcbiAgICAgICAgdGhpcy5pc1ByZXZpZXdMb2NrZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5sb2NrQnV0dG9uLmlubmVySFRNTCA9ICdcdUQ4M0RcdUREMTMnO1xuICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZVByZXZpZXcoKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFzeW5jIHRvZ2dsZVByZXZpZXdMb2NrKCkge1xuICAgICAgICB0aGlzLmlzUHJldmlld0xvY2tlZCA9ICF0aGlzLmlzUHJldmlld0xvY2tlZDtcbiAgICAgICAgY29uc3QgbG9ja0ljb24gPSB0aGlzLmlzUHJldmlld0xvY2tlZCA/ICdcdUQ4M0RcdUREMTInIDogJ1x1RDgzRFx1REQxMyc7XG4gICAgICAgIGNvbnN0IGxvY2tTdGF0dXMgPSB0aGlzLmlzUHJldmlld0xvY2tlZCA/ICdcdTVGMDBcdTU0MkZcdTVCOUVcdTY1RjZcdTk4ODRcdTg5QzhcdTcyQjZcdTYwMDEnIDogJ1x1NTE3M1x1OTVFRFx1NUI5RVx1NjVGNlx1OTg4NFx1ODlDOFx1NzJCNlx1NjAwMSc7XG4gICAgICAgIHRoaXMubG9ja0J1dHRvbi5pbm5lckhUTUwgPSBsb2NrSWNvbjtcbiAgICAgICAgdGhpcy5sb2NrQnV0dG9uLnNldEF0dHJpYnV0ZSgnYXJpYS1sYWJlbCcsIGxvY2tTdGF0dXMpO1xuICAgICAgICBcbiAgICAgICAgaWYgKCF0aGlzLmlzUHJldmlld0xvY2tlZCkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy51cGRhdGVQcmV2aWV3KCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBhc3luYyBvbkZpbGVNb2RpZnkoZmlsZTogVEZpbGUpIHtcbiAgICAgICAgaWYgKGZpbGUgPT09IHRoaXMuY3VycmVudEZpbGUgJiYgIXRoaXMuaXNQcmV2aWV3TG9ja2VkKSB7XG4gICAgICAgICAgICBpZiAodGhpcy51cGRhdGVUaW1lcikge1xuICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLnVwZGF0ZVRpbWVyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy51cGRhdGVUaW1lciA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlUHJldmlldygpO1xuICAgICAgICAgICAgfSwgNTAwKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFzeW5jIHVwZGF0ZVByZXZpZXcoKSB7XG4gICAgICAgIGlmICghdGhpcy5jdXJyZW50RmlsZSkgcmV0dXJuO1xuXG4gICAgICAgIHRoaXMucHJldmlld0VsLmVtcHR5KCk7XG4gICAgICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5yZWFkKHRoaXMuY3VycmVudEZpbGUpO1xuICAgICAgICBcbiAgICAgICAgLy8gMS4gXHU1MTQ4XHU4RjZDXHU2MzYyIE1hcmtkb3duIFx1NEUzQSBIVE1MXG4gICAgICAgIGF3YWl0IE1hcmtkb3duUmVuZGVyZXIucmVuZGVyTWFya2Rvd24oXG4gICAgICAgICAgICBjb250ZW50LFxuICAgICAgICAgICAgdGhpcy5wcmV2aWV3RWwsXG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRGaWxlLnBhdGgsXG4gICAgICAgICAgICB0aGlzXG4gICAgICAgICk7XG5cbiAgICAgICAgLy8gMi4gXHU2ODNDXHU1RjBGXHU1MzE2XHU1MTg1XHU1QkI5IChcdTUzRUFcdTU3MjhcdTUxODVcdTVCQjlcdTY2RjRcdTY1QjBcdTY1RjZcdTYyNjdcdTg4NEMpXG4gICAgICAgIE1QQ29udmVydGVyLmZvcm1hdENvbnRlbnQodGhpcy5wcmV2aWV3RWwpO1xuXG4gICAgICAgIC8vIDMuIFx1NUU5NFx1NzUyOFx1NkEyMVx1Njc3Rlx1NjgzN1x1NUYwRlxuICAgICAgICB0aGlzLnRlbXBsYXRlTWFuYWdlci5hcHBseVRlbXBsYXRlKHRoaXMucHJldmlld0VsKTtcbiAgICB9XG5cbiAgICAvLyBcdTZERkJcdTUyQTBcdTgxRUFcdTVCOUFcdTRFNDlcdTRFMEJcdTYyQzlcdTkwMDlcdTYyRTlcdTU2NjhcdTUyMUJcdTVFRkFcdTY1QjlcdTZDRDVcbiAgICBwcml2YXRlIGNyZWF0ZUN1c3RvbVNlbGVjdChcbiAgICAgICAgcGFyZW50OiBIVE1MRWxlbWVudCxcbiAgICAgICAgY2xhc3NOYW1lOiBzdHJpbmcsXG4gICAgICAgIG9wdGlvbnM6IHsgdmFsdWU6IHN0cmluZzsgbGFiZWw6IHN0cmluZyB9W11cbiAgICApIHtcbiAgICAgICAgY29uc3QgY29udGFpbmVyID0gcGFyZW50LmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ2N1c3RvbS1zZWxlY3QtY29udGFpbmVyJyB9KTtcbiAgICAgICAgY29uc3Qgc2VsZWN0ID0gY29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ2N1c3RvbS1zZWxlY3QnIH0pO1xuICAgICAgICBjb25zdCBzZWxlY3RlZFRleHQgPSBzZWxlY3QuY3JlYXRlRWwoJ3NwYW4nLCB7IGNsczogJ3NlbGVjdGVkLXRleHQnIH0pO1xuICAgICAgICBjb25zdCBhcnJvdyA9IHNlbGVjdC5jcmVhdGVFbCgnc3BhbicsIHsgY2xzOiAnc2VsZWN0LWFycm93JywgdGV4dDogJ1x1MjVCRScgfSk7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBkcm9wZG93biA9IGNvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdzZWxlY3QtZHJvcGRvd24nIH0pO1xuICAgICAgICBcbiAgICAgICAgb3B0aW9ucy5mb3JFYWNoKG9wdGlvbiA9PiB7XG4gICAgICAgICAgICBjb25zdCBpdGVtID0gZHJvcGRvd24uY3JlYXRlRWwoJ2RpdicsIHtcbiAgICAgICAgICAgICAgICBjbHM6ICdzZWxlY3QtaXRlbScsXG4gICAgICAgICAgICAgICAgdGV4dDogb3B0aW9uLmxhYmVsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaXRlbS5kYXRhc2V0LnZhbHVlID0gb3B0aW9uLnZhbHVlO1xuICAgICAgICAgICAgaXRlbS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgICAgICAvLyBcdTc5RkJcdTk2NjRcdTUxNzZcdTRFRDZcdTk4NzlcdTc2ODRcdTkwMDlcdTRFMkRcdTcyQjZcdTYwMDFcbiAgICAgICAgICAgICAgICBkcm9wZG93bi5xdWVyeVNlbGVjdG9yQWxsKCcuc2VsZWN0LWl0ZW0nKS5mb3JFYWNoKGVsID0+IFxuICAgICAgICAgICAgICAgICAgICBlbC5jbGFzc0xpc3QucmVtb3ZlKCdzZWxlY3RlZCcpKTtcbiAgICAgICAgICAgICAgICAvLyBcdTZERkJcdTUyQTBcdTVGNTNcdTUyNERcdTk4NzlcdTc2ODRcdTkwMDlcdTRFMkRcdTcyQjZcdTYwMDFcbiAgICAgICAgICAgICAgICBpdGVtLmNsYXNzTGlzdC5hZGQoJ3NlbGVjdGVkJyk7XG4gICAgICAgICAgICAgICAgc2VsZWN0ZWRUZXh0LnRleHRDb250ZW50ID0gb3B0aW9uLmxhYmVsO1xuICAgICAgICAgICAgICAgIHNlbGVjdC5kYXRhc2V0LnZhbHVlID0gb3B0aW9uLnZhbHVlO1xuICAgICAgICAgICAgICAgIGRyb3Bkb3duLmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnKTtcbiAgICAgICAgICAgICAgICBzZWxlY3QuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoJ2NoYW5nZScsIHtcbiAgICAgICAgICAgICAgICAgICAgZGV0YWlsOiB7IHZhbHVlOiBvcHRpb24udmFsdWUgfVxuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIFx1OEJCRVx1N0Y2RVx1OUVEOFx1OEJBNFx1NTAzQ1x1NTQ4Q1x1OTAwOVx1NEUyRFx1NzJCNlx1NjAwMVxuICAgICAgICBpZiAob3B0aW9ucy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBzZWxlY3RlZFRleHQudGV4dENvbnRlbnQgPSBvcHRpb25zWzBdLmxhYmVsO1xuICAgICAgICAgICAgc2VsZWN0LmRhdGFzZXQudmFsdWUgPSBvcHRpb25zWzBdLnZhbHVlO1xuICAgICAgICAgICAgZHJvcGRvd24ucXVlcnlTZWxlY3RvcignLnNlbGVjdC1pdGVtJyk/LmNsYXNzTGlzdC5hZGQoJ3NlbGVjdGVkJyk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIFx1NzBCOVx1NTFGQlx1NjYzRVx1NzkzQS9cdTk2OTBcdTg1Q0ZcdTRFMEJcdTYyQzlcdTUyMTdcdTg4NjhcbiAgICAgICAgc2VsZWN0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICBkcm9wZG93bi5jbGFzc0xpc3QudG9nZ2xlKCdzaG93Jyk7XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgLy8gXHU3MEI5XHU1MUZCXHU1MTc2XHU0RUQ2XHU1NzMwXHU2NUI5XHU1MTczXHU5NUVEXHU0RTBCXHU2MkM5XHU1MjE3XHU4ODY4XG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgZHJvcGRvd24uY2xhc3NMaXN0LnJlbW92ZSgnc2hvdycpO1xuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiBjb250YWluZXI7XG4gICAgfVxuXG4gICAgLy8gXHU4M0I3XHU1M0Q2XHU2QTIxXHU2NzdGXHU5MDA5XHU5ODc5XG4gICAgcHJpdmF0ZSBhc3luYyBnZXRUZW1wbGF0ZU9wdGlvbnMoKSB7XG4gICAgICAgIGF3YWl0IHRoaXMudGVtcGxhdGVNYW5hZ2VyLmxvYWRUZW1wbGF0ZXMoKTtcbiAgICAgICAgY29uc3QgdGVtcGxhdGVzID0gdGhpcy50ZW1wbGF0ZU1hbmFnZXIuZ2V0QWxsVGVtcGxhdGVzKCk7XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gdGVtcGxhdGVzLmxlbmd0aCA+IDBcbiAgICAgICAgICAgID8gdGVtcGxhdGVzLm1hcCh0ID0+ICh7IHZhbHVlOiB0LmlkLCBsYWJlbDogdC5uYW1lIH0pKVxuICAgICAgICAgICAgOiBbeyB2YWx1ZTogJ2RlZmF1bHQnLCBsYWJlbDogJ1x1OUVEOFx1OEJBNFx1NkEyMVx1Njc3RicgfV07XG4gICAgfVxuXG4gICAgLy8gXHU4M0I3XHU1M0Q2XHU1QjU3XHU0RjUzXHU5MDA5XHU5ODc5XG4gICAgcHJpdmF0ZSBnZXRGb250T3B0aW9ucygpIHtcbiAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgIHsgXG4gICAgICAgICAgICAgICAgdmFsdWU6ICdPcHRpbWEtUmVndWxhciwgT3B0aW1hLCBQaW5nRmFuZ1NDLWxpZ2h0LCBQaW5nRmFuZ1RDLWxpZ2h0LCBcIlBpbmdGYW5nIFNDXCIsIENhbWJyaWEsIENvY2hpbiwgR2VvcmdpYSwgVGltZXMsIFwiVGltZXMgTmV3IFJvbWFuXCIsIHNlcmlmJyxcbiAgICAgICAgICAgICAgICBsYWJlbDogJ1x1OUVEOFx1OEJBNFx1NUI1N1x1NEY1MydcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7IFxuICAgICAgICAgICAgICAgIHZhbHVlOiAnU2ltU3VuLCBcIlx1NUI4Qlx1NEY1M1wiLCBzZXJpZicsXG4gICAgICAgICAgICAgICAgbGFiZWw6ICdcdTVCOEJcdTRGNTMnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgeyBcbiAgICAgICAgICAgICAgICB2YWx1ZTogJ1NpbUhlaSwgXCJcdTlFRDFcdTRGNTNcIiwgc2Fucy1zZXJpZicsXG4gICAgICAgICAgICAgICAgbGFiZWw6ICdcdTlFRDFcdTRGNTMnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgeyBcbiAgICAgICAgICAgICAgICB2YWx1ZTogJ0thaVRpLCBcIlx1Njk3N1x1NEY1M1wiLCBzZXJpZicsXG4gICAgICAgICAgICAgICAgbGFiZWw6ICdcdTY5NzdcdTRGNTMnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgeyBcbiAgICAgICAgICAgICAgICB2YWx1ZTogJ1wiTWljcm9zb2Z0IFlhSGVpXCIsIFwiXHU1RkFFXHU4RjZGXHU5NkM1XHU5RUQxXCIsIHNhbnMtc2VyaWYnLFxuICAgICAgICAgICAgICAgIGxhYmVsOiAnXHU5NkM1XHU5RUQxJ1xuICAgICAgICAgICAgfVxuICAgICAgICBdO1xuICAgIH1cbn0iLCAiaW1wb3J0IHsgQXBwIH0gZnJvbSAnb2JzaWRpYW4nO1xuXG5leHBvcnQgY2xhc3MgTVBDb252ZXJ0ZXIge1xuICAgIHByaXZhdGUgc3RhdGljIGFwcDogQXBwO1xuXG4gICAgc3RhdGljIGluaXRpYWxpemUoYXBwOiBBcHApIHtcbiAgICAgICAgdGhpcy5hcHAgPSBhcHA7XG4gICAgfVxuXG4gICAgc3RhdGljIGZvcm1hdENvbnRlbnQoZWxlbWVudDogSFRNTEVsZW1lbnQpOiB2b2lkIHtcbiAgICAgICAgLy8gXHU1MjFCXHU1RUZBXHU4ODY4XHU2ODNDXHU1MzA1XHU4OEY5XG4gICAgICAgIGNvbnN0IHRhYmxlID0gdGhpcy5jcmVhdGVXcmFwcGVyVGFibGUoZWxlbWVudCk7XG4gICAgICAgIFxuICAgICAgICAvLyBcdTU5MDRcdTc0MDZcdTU0MDRcdTc5Q0QgTWFya2Rvd24gXHU1MTQzXHU3RDIwXG4gICAgICAgIHRoaXMucHJvY2Vzc0VsZW1lbnRzKHRhYmxlLnF1ZXJ5U2VsZWN0b3IoJ3RkJykpO1xuICAgIH1cblxuICAgIHByaXZhdGUgc3RhdGljIGNyZWF0ZVdyYXBwZXJUYWJsZShlbGVtZW50OiBIVE1MRWxlbWVudCk6IEhUTUxUYWJsZUVsZW1lbnQge1xuICAgICAgICBjb25zdCB0YWJsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RhYmxlJyk7XG4gICAgICAgIGNvbnN0IHRib2R5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGJvZHknKTtcbiAgICAgICAgY29uc3QgdHIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0cicpO1xuICAgICAgICBjb25zdCB0ZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RkJyk7XG5cbiAgICAgICAgdGFibGUuc3R5bGUud2lkdGggPSAnMTAwJSc7XG4gICAgICAgIHRhYmxlLnN0eWxlLmJvcmRlckNvbGxhcHNlID0gJ2NvbGxhcHNlJztcbiAgICAgICAgdGQuc3R5bGUud29yZEJyZWFrID0gJ2JyZWFrLWFsbCc7XG5cbiAgICAgICAgd2hpbGUgKGVsZW1lbnQuZmlyc3RDaGlsZCkge1xuICAgICAgICAgICAgdGQuYXBwZW5kQ2hpbGQoZWxlbWVudC5maXJzdENoaWxkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRyLmFwcGVuZENoaWxkKHRkKTtcbiAgICAgICAgdGJvZHkuYXBwZW5kQ2hpbGQodHIpO1xuICAgICAgICB0YWJsZS5hcHBlbmRDaGlsZCh0Ym9keSk7XG4gICAgICAgIGVsZW1lbnQuYXBwZW5kQ2hpbGQodGFibGUpO1xuXG4gICAgICAgIHJldHVybiB0YWJsZTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHN0YXRpYyBwcm9jZXNzRWxlbWVudHMoY29udGFpbmVyOiBIVE1MRWxlbWVudCB8IG51bGwpOiB2b2lkIHtcbiAgICAgICAgaWYgKCFjb250YWluZXIpIHJldHVybjtcblxuICAgICAgICAvLyBcdTU5MDRcdTc0MDZcdTVGM0FcdThDMDNcdTY1ODdcdTY3MkNcbiAgICAgICAgY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJ3N0cm9uZywgZW0nKS5mb3JFYWNoKGVsID0+IHtcbiAgICAgICAgICAgIChlbCBhcyBIVE1MRWxlbWVudCkuc3R5bGUuZGlzcGxheSA9ICdpbmxpbmUnO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBcdTU5MDRcdTc0MDZcdTk0RkVcdTYzQTVcbiAgICAgICAgY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJ2EnKS5mb3JFYWNoKGVsID0+IHtcbiAgICAgICAgICAgIChlbCBhcyBIVE1MRWxlbWVudCkuc3R5bGUuY29sb3IgPSAnIzU3NmI5NSc7XG4gICAgICAgICAgICAoZWwgYXMgSFRNTEVsZW1lbnQpLnN0eWxlLnRleHREZWNvcmF0aW9uID0gJ25vbmUnO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBcdTU5MDRcdTc0MDZcdTg4NjhcdTY4M0NcbiAgICAgICAgY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJ3RhYmxlJykuZm9yRWFjaChlbCA9PiB7XG4gICAgICAgICAgICBpZiAoZWwgPT09IGNvbnRhaW5lci5jbG9zZXN0KCd0YWJsZScpKSByZXR1cm47XG4gICAgICAgICAgICAoZWwgYXMgSFRNTFRhYmxlRWxlbWVudCkuc3R5bGUuYm9yZGVyQ29sbGFwc2UgPSAnY29sbGFwc2UnO1xuICAgICAgICAgICAgKGVsIGFzIEhUTUxUYWJsZUVsZW1lbnQpLnN0eWxlLm1hcmdpbiA9ICcxZW0gMCc7XG4gICAgICAgICAgICAoZWwgYXMgSFRNTFRhYmxlRWxlbWVudCkuc3R5bGUud2lkdGggPSAnMTAwJSc7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIFx1NTkwNFx1NzQwNlx1ODg2OFx1NjgzQ1x1NTM1NVx1NTE0M1x1NjgzQ1xuICAgICAgICBjb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgndGgsIHRkJykuZm9yRWFjaChlbCA9PiB7XG4gICAgICAgICAgICBpZiAoZWwgPT09IGNvbnRhaW5lci5jbG9zZXN0KCd0ZCcpKSByZXR1cm47XG4gICAgICAgICAgICAoZWwgYXMgSFRNTFRhYmxlQ2VsbEVsZW1lbnQpLnN0eWxlLmJvcmRlciA9ICcxcHggc29saWQgI2RmZGZkZic7XG4gICAgICAgICAgICAoZWwgYXMgSFRNTFRhYmxlQ2VsbEVsZW1lbnQpLnN0eWxlLnBhZGRpbmcgPSAnOHB4JztcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gXHU1OTA0XHU3NDA2XHU1MjA2XHU1MjcyXHU3RUJGXG4gICAgICAgIGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCdocicpLmZvckVhY2goZWwgPT4ge1xuICAgICAgICAgICAgKGVsIGFzIEhUTUxFbGVtZW50KS5zdHlsZS5ib3JkZXIgPSAnbm9uZSc7XG4gICAgICAgICAgICAoZWwgYXMgSFRNTEVsZW1lbnQpLnN0eWxlLmJvcmRlclRvcCA9ICcxcHggc29saWQgI2RmZGZkZic7XG4gICAgICAgICAgICAoZWwgYXMgSFRNTEVsZW1lbnQpLnN0eWxlLm1hcmdpbiA9ICcyMHB4IDAnO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBcdTU5MDRcdTc0MDZcdTUyMjBcdTk2NjRcdTdFQkZcbiAgICAgICAgY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJ2RlbCcpLmZvckVhY2goZWwgPT4ge1xuICAgICAgICAgICAgKGVsIGFzIEhUTUxFbGVtZW50KS5zdHlsZS50ZXh0RGVjb3JhdGlvbiA9ICdsaW5lLXRocm91Z2gnO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBcdTU5MDRcdTc0MDZcdTRFRkJcdTUyQTFcdTUyMTdcdTg4NjhcbiAgICAgICAgY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJy50YXNrLWxpc3QtaXRlbScpLmZvckVhY2goZWwgPT4ge1xuICAgICAgICAgICAgKGVsIGFzIEhUTUxFbGVtZW50KS5zdHlsZS5saXN0U3R5bGUgPSAnbm9uZSc7XG4gICAgICAgICAgICBjb25zdCBjaGVja2JveCA9IGVsLnF1ZXJ5U2VsZWN0b3IoJ2lucHV0W3R5cGU9XCJjaGVja2JveFwiXScpO1xuICAgICAgICAgICAgaWYgKGNoZWNrYm94KSB7XG4gICAgICAgICAgICAgICAgKGNoZWNrYm94IGFzIEhUTUxFbGVtZW50KS5zdHlsZS5tYXJnaW5SaWdodCA9ICc2cHgnO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBcdTU5MDRcdTc0MDZcdTgxMUFcdTZDRThcbiAgICAgICAgY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJy5mb290bm90ZS1yZWYsIC5mb290bm90ZS1iYWNrcmVmJykuZm9yRWFjaChlbCA9PiB7XG4gICAgICAgICAgICAoZWwgYXMgSFRNTEVsZW1lbnQpLnN0eWxlLmNvbG9yID0gJyM1NzZiOTUnO1xuICAgICAgICAgICAgKGVsIGFzIEhUTUxFbGVtZW50KS5zdHlsZS50ZXh0RGVjb3JhdGlvbiA9ICdub25lJztcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gXHU1OTA0XHU3NDA2XHU0RUUzXHU3ODAxXHU1NzU3XG4gICAgICAgIGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCdwcmUgY29kZScpLmZvckVhY2goZWwgPT4ge1xuICAgICAgICAgICAgY29uc3QgcHJlID0gZWwucGFyZW50RWxlbWVudDtcbiAgICAgICAgICAgIGlmIChwcmUpIHtcbiAgICAgICAgICAgICAgICAvLyBcdTZERkJcdTUyQTAgbWFjT1MgXHU5OENFXHU2ODNDXHU3Njg0XHU3QTk3XHU1M0UzXHU2MzA5XHU5NEFFXG4gICAgICAgICAgICAgICAgY29uc3QgZG90cyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgICAgIGRvdHMuc3R5bGUuY3NzVGV4dCA9IGBcbiAgICAgICAgICAgICAgICAgICAgbWFyZ2luOiA4cHggMCAxMnB4IDA7XG4gICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgICAgICAgICAgIGdhcDogNnB4O1xuICAgICAgICAgICAgICAgIGA7XG5cbiAgICAgICAgICAgICAgICBjb25zdCBjb2xvcnMgPSBbJyNmZjVmNTYnLCAnI2ZmYmQyZScsICcjMjdjOTNmJ107XG4gICAgICAgICAgICAgICAgY29sb3JzLmZvckVhY2goY29sb3IgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBkb3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICAgICAgICAgICAgICAgICAgIGRvdC5zdHlsZS5jc3NUZXh0ID0gYFxuICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDEycHg7XG4gICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IDEycHg7XG4gICAgICAgICAgICAgICAgICAgICAgICBib3JkZXItcmFkaXVzOiA1MCU7XG4gICAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAke2NvbG9yfTtcbiAgICAgICAgICAgICAgICAgICAgYDtcbiAgICAgICAgICAgICAgICAgICAgZG90cy5hcHBlbmRDaGlsZChkb3QpO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgLy8gXHU1QzA2XHU3RUEyXHU3RUZGXHU3MDZGXHU2M0QyXHU1MTY1XHU1MjMwXHU0RUUzXHU3ODAxXHU1NzU3XHU3Njg0XHU2NzAwXHU1MjREXHU5NzYyXG4gICAgICAgICAgICAgICAgcHJlLmluc2VydEJlZm9yZShkb3RzLCBwcmUuZmlyc3RDaGlsZCk7XG4gICAgICAgICAgICAgICAgcHJlLnN0eWxlLnBhZGRpbmdUb3AgPSAnMzJweCc7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gXHU3OUZCXHU5NjY0XHU1MzlGXHU2NzA5XHU3Njg0XHU1OTBEXHU1MjM2XHU2MzA5XHU5NEFFXG4gICAgICAgICAgICAgICAgY29uc3QgY29weUJ1dHRvbiA9IHByZS5xdWVyeVNlbGVjdG9yKCcuY29weS1jb2RlLWJ1dHRvbicpO1xuICAgICAgICAgICAgICAgIGlmIChjb3B5QnV0dG9uKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvcHlCdXR0b24ucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBcdTU5MDRcdTc0MDZcdTU2RkVcdTcyNDdcbiAgICAgICAgY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJ3NwYW4uaW50ZXJuYWwtZW1iZWRbYWx0XVtzcmNdJykuZm9yRWFjaChhc3luYyBlbCA9PiB7XG4gICAgICAgICAgICBjb25zdCBvcmlnaW5hbFNwYW4gPSBlbCBhcyBIVE1MRWxlbWVudDtcbiAgICAgICAgICAgIGNvbnN0IHNyYyA9IG9yaWdpbmFsU3Bhbi5nZXRBdHRyaWJ1dGUoJ3NyYycpO1xuICAgICAgICAgICAgY29uc3QgYWx0ID0gb3JpZ2luYWxTcGFuLmdldEF0dHJpYnV0ZSgnYWx0Jyk7XG4gICAgICAgICAgICBjb25zdCBwYXJlbnRQID0gb3JpZ2luYWxTcGFuLmNsb3Nlc3QoJ3AnKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKCFzcmMpIHJldHVybjtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCBuZXdJbWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcbiAgICAgICAgICAgICAgICBjb25zdCBmaWxlID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHNyYyk7XG4gICAgICAgICAgICAgICAgaWYgKGZpbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYWJzb2x1dGVQYXRoID0gdGhpcy5hcHAudmF1bHQuYWRhcHRlci5nZXRSZXNvdXJjZVBhdGgoc3JjKTtcbiAgICAgICAgICAgICAgICAgICAgbmV3SW1nLnNyYyA9IGFic29sdXRlUGF0aDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFsdCkgbmV3SW1nLmFsdCA9IGFsdDtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIC8vIFx1NUU5NFx1NzUyOFx1NjgzN1x1NUYwRlxuICAgICAgICAgICAgICAgICAgICBuZXdJbWcuc3R5bGUubWF4V2lkdGggPSAnMTAwJSc7XG4gICAgICAgICAgICAgICAgICAgIG5ld0ltZy5zdHlsZS5oZWlnaHQgPSAnYXV0byc7XG4gICAgICAgICAgICAgICAgICAgIG5ld0ltZy5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgICAgICAgICAgICAgICAgbmV3SW1nLnN0eWxlLm1hcmdpbiA9ICcxZW0gYXV0byc7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAvLyBcdTc2RjRcdTYzQTVcdTY2RkZcdTYzNjIgc3BhbiBcdTUxNDNcdTdEMjBcdUZGMENcdTRGRERcdTc1NTlcdTZCQjVcdTg0M0RcdTRFMkRcdTc2ODRcdTUxNzZcdTRFRDZcdTUxODVcdTVCQjlcbiAgICAgICAgICAgICAgICAgICAgb3JpZ2luYWxTcGFuLnBhcmVudE5vZGU/LnJlcGxhY2VDaGlsZChuZXdJbWcsIG9yaWdpbmFsU3Bhbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdcdTU2RkVcdTcyNDdcdTU5MDRcdTc0MDZcdTU5MzFcdThEMjU6JywgZXJyb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBcdTU5MDRcdTc0MDZcdTVGMTVcdTc1MjhcdTU3NTdcbiAgICAgICAgY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJ2Jsb2NrcXVvdGUnKS5mb3JFYWNoKGVsID0+IHtcbiAgICAgICAgICAgIC8vIFx1NkUwNVx1NzQwNlx1NUYxNVx1NzUyOFx1NTc1N1x1NTE4NVx1OTBFOFx1NkJCNVx1ODQzRFx1NzY4NFx1NjgzN1x1NUYwRlxuICAgICAgICAgICAgZWwucXVlcnlTZWxlY3RvckFsbCgncCcpLmZvckVhY2gocCA9PiB7XG4gICAgICAgICAgICAgICAgcC5zdHlsZS5tYXJnaW4gPSAnMCc7XG4gICAgICAgICAgICAgICAgcC5zdHlsZS5wYWRkaW5nID0gJzAnO1xuICAgICAgICAgICAgICAgIHAuc3R5bGUubGluZUhlaWdodCA9ICdpbmhlcml0JztcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG59IiwgImltcG9ydCB7IE5vdGljZSB9IGZyb20gJ29ic2lkaWFuJztcblxuZXhwb3J0IGNsYXNzIENvcHlNYW5hZ2VyIHtcbiAgICBwcml2YXRlIHN0YXRpYyBjbGVhbnVwSHRtbChodG1sOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgICAgICAvLyBcdTUyMUJcdTVFRkFcdTRFMDBcdTRFMkFcdTRFMzRcdTY1RjZcdTc2ODQgZGl2IFx1NTE0M1x1N0QyMFx1Njc2NVx1NTkwNFx1NzQwNiBIVE1MXG4gICAgICAgIGNvbnN0IHRlbXBEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgdGVtcERpdi5pbm5lckhUTUwgPSBodG1sO1xuXG4gICAgICAgIC8vIFx1NzlGQlx1OTY2NFx1NjI0MFx1NjcwOVx1NzY4NCBkYXRhLSogXHU1QzVFXHU2MDI3XG4gICAgICAgIHRlbXBEaXYucXVlcnlTZWxlY3RvckFsbCgnKicpLmZvckVhY2goZWwgPT4ge1xuICAgICAgICAgICAgQXJyYXkuZnJvbShlbC5hdHRyaWJ1dGVzKS5mb3JFYWNoKGF0dHIgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChhdHRyLm5hbWUuc3RhcnRzV2l0aCgnZGF0YS0nKSkge1xuICAgICAgICAgICAgICAgICAgICBlbC5yZW1vdmVBdHRyaWJ1dGUoYXR0ci5uYW1lKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gXHU3OUZCXHU5NjY0XHU2MjQwXHU2NzA5XHU3Njg0IGNsYXNzIFx1NUM1RVx1NjAyN1xuICAgICAgICB0ZW1wRGl2LnF1ZXJ5U2VsZWN0b3JBbGwoJyonKS5mb3JFYWNoKGVsID0+IHtcbiAgICAgICAgICAgIGVsLnJlbW92ZUF0dHJpYnV0ZSgnY2xhc3MnKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gXHU3OUZCXHU5NjY0XHU2MjQwXHU2NzA5XHU3Njg0IGlkIFx1NUM1RVx1NjAyN1xuICAgICAgICB0ZW1wRGl2LnF1ZXJ5U2VsZWN0b3JBbGwoJyonKS5mb3JFYWNoKGVsID0+IHtcbiAgICAgICAgICAgIGVsLnJlbW92ZUF0dHJpYnV0ZSgnaWQnKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIHRlbXBEaXYuaW5uZXJIVE1MO1xuICAgIH1cblxuICAgIHByaXZhdGUgc3RhdGljIGFzeW5jIHByb2Nlc3NJbWFnZXMoY29udGFpbmVyOiBIVE1MRWxlbWVudCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCBpbWFnZXMgPSBjb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnaW1nJyk7XG4gICAgICAgIGNvbnN0IGltYWdlQXJyYXkgPSBBcnJheS5mcm9tKGltYWdlcyk7XG4gICAgICAgIFxuICAgICAgICBmb3IgKGNvbnN0IGltZyBvZiBpbWFnZUFycmF5KSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goaW1nLnNyYyk7XG4gICAgICAgICAgICAgICAgY29uc3QgYmxvYiA9IGF3YWl0IHJlc3BvbnNlLmJsb2IoKTtcbiAgICAgICAgICAgICAgICBjb25zdCByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xuICAgICAgICAgICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmVhZGVyLm9ubG9hZCA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGltZy5zcmMgPSByZWFkZXIucmVzdWx0IGFzIHN0cmluZztcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUobnVsbCk7XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIHJlYWRlci5vbmVycm9yID0gcmVqZWN0O1xuICAgICAgICAgICAgICAgICAgICByZWFkZXIucmVhZEFzRGF0YVVSTChibG9iKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignXHU1NkZFXHU3MjQ3XHU4RjZDXHU2MzYyXHU1OTMxXHU4RDI1OicsIGVycm9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgYXN5bmMgY29weVRvQ2xpcGJvYXJkKGVsZW1lbnQ6IEhUTUxFbGVtZW50KTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgIGNvbnRhaW5lci5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XG4gICAgICAgICAgICBjb250YWluZXIuc3R5bGUubGVmdCA9ICctOTk5OXB4JztcbiAgICAgICAgICAgIGNvbnRhaW5lci5pbm5lckhUTUwgPSBlbGVtZW50LmlubmVySFRNTDtcbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoY29udGFpbmVyKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGVsZW1lbnQuaW5uZXJIVE1MKTtcbiAgICAgICAgICAgIC8vIFx1NTkwNFx1NzQwNlx1NTZGRVx1NzI0N1x1OEY2Q1x1NjM2Mlx1NEUzQSBiYXNlNjRcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucHJvY2Vzc0ltYWdlcyhjb250YWluZXIpO1xuXG4gICAgICAgICAgICAvLyBcdTZFMDVcdTc0MDYgSFRNTFxuICAgICAgICAgICAgY29uc3QgY2xlYW5IdG1sID0gdGhpcy5jbGVhbnVwSHRtbChjb250YWluZXIuaW5uZXJIVE1MKTtcblxuICAgICAgICAgICAgLy8gXHU1MjFCXHU1RUZBXHU1MjZBXHU4RDM0XHU2NzdGXHU2NTcwXHU2MzZFXG4gICAgICAgICAgICBjb25zdCBjbGlwRGF0YSA9IG5ldyBDbGlwYm9hcmRJdGVtKHtcbiAgICAgICAgICAgICAgICAndGV4dC9odG1sJzogbmV3IEJsb2IoW2NsZWFuSHRtbF0sIHsgdHlwZTogJ3RleHQvaHRtbCcgfSksXG4gICAgICAgICAgICAgICAgJ3RleHQvcGxhaW4nOiBuZXcgQmxvYihbY29udGFpbmVyLnRleHRDb250ZW50IHx8ICcnXSwgeyB0eXBlOiAndGV4dC9wbGFpbicgfSlcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGNvbnRhaW5lcik7XG4gICAgICAgICAgICBhd2FpdCBuYXZpZ2F0b3IuY2xpcGJvYXJkLndyaXRlKFtjbGlwRGF0YV0pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBuZXcgTm90aWNlKCdcdTVERjJcdTU5MERcdTUyMzZcdTUyMzBcdTUyNkFcdThEMzRcdTY3N0YnKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1NTkwRFx1NTIzNlx1NTkzMVx1OEQyNScpO1xuICAgICAgICB9XG4gICAgfVxufSIsICJleHBvcnQgY2xhc3MgRG9uYXRlTWFuYWdlciB7XG4gICAgcHJpdmF0ZSBzdGF0aWMgb3ZlcmxheTogSFRNTEVsZW1lbnQ7XG4gICAgcHJpdmF0ZSBzdGF0aWMgbW9kYWw6IEhUTUxFbGVtZW50O1xuXG4gICAgcHVibGljIHN0YXRpYyBzaG93RG9uYXRlTW9kYWwoY29udGFpbmVyOiBIVE1MRWxlbWVudCkge1xuICAgICAgICB0aGlzLm92ZXJsYXkgPSBjb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHtcbiAgICAgICAgICAgIGNsczogJ21wLWRvbmF0ZS1vdmVybGF5J1xuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLm1vZGFsID0gdGhpcy5vdmVybGF5LmNyZWF0ZUVsKCdkaXYnLCB7XG4gICAgICAgICAgICBjbHM6ICdtcC1kb25hdGUtbW9kYWwnXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IGNsb3NlQnV0dG9uID0gdGhpcy5tb2RhbC5jcmVhdGVFbCgnYnV0dG9uJywge1xuICAgICAgICAgICAgY2xzOiAnbXAtZG9uYXRlLWNsb3NlJyxcbiAgICAgICAgICAgIHRleHQ6ICdcdTAwRDcnXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMubW9kYWwuY3JlYXRlRWwoJ2gzJywge1xuICAgICAgICAgICAgdGV4dDogJ1x1OEJGN1x1NEY1Q1x1ODAwNVx1NTU5RFx1NTQ5Nlx1NTU2MScsXG4gICAgICAgICAgICBjbHM6ICdtcC1kb25hdGUtdGl0bGUnXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IGNvbnRlbnQgPSB0aGlzLm1vZGFsLmNyZWF0ZUVsKCdkaXYnLCB7XG4gICAgICAgICAgICBjbHM6ICdtcC1kb25hdGUtY29udGVudCdcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gXHU2REZCXHU1MkEwXHU2RTI5XHU5OUE4XHU2M0QwXHU3OTNBXG4gICAgICAgIGNvbnRlbnQuY3JlYXRlRWwoJ3AnLCB7XG4gICAgICAgICAgICB0ZXh0OiAnXHU2MEE4XHU3Njg0XHU2NTJGXHU2MzAxXHU2NjJGXHU2MjExXHU2MzAxXHU3RUVEXHU2NkY0XHU2NUIwXHU3Njg0XHU1MkE4XHU1MjlCIFx1Mjc2NFx1RkUwRicsXG4gICAgICAgICAgICBjbHM6ICdtcC1kb25hdGUtZGVzYydcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gXHU1MjFCXHU1RUZBXHU2NTJGXHU0RUQ4XHU2NUI5XHU1RjBGXHU5MDA5XHU2MkU5XG4gICAgICAgIGNvbnN0IHBheW1lbnRUYWJzID0gY29udGVudC5jcmVhdGVFbCgnZGl2Jywge1xuICAgICAgICAgICAgY2xzOiAnbXAtZG9uYXRlLXRhYnMnXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IHdlY2hhdFRhYiA9IHBheW1lbnRUYWJzLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICAgICAgICB0ZXh0OiAnXHU1RkFFXHU0RkUxXHU2NTJGXHU0RUQ4JyxcbiAgICAgICAgICAgIGNsczogJ21wLWRvbmF0ZS10YWIgYWN0aXZlJ1xuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCBhbGlwYXlUYWIgPSBwYXltZW50VGFicy5jcmVhdGVFbCgnYnV0dG9uJywge1xuICAgICAgICAgICAgdGV4dDogJ1x1NjUyRlx1NEVEOFx1NUI5RCcsXG4gICAgICAgICAgICBjbHM6ICdtcC1kb25hdGUtdGFiJ1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBcdTUyMUJcdTVFRkFcdTRFOENcdTdFRjRcdTc4MDFcdTY2M0VcdTc5M0FcdTUzM0FcdTU3REZcbiAgICAgICAgY29uc3QgcXJDb250YWluZXIgPSBjb250ZW50LmNyZWF0ZUVsKCdkaXYnLCB7XG4gICAgICAgICAgICBjbHM6ICdtcC1kb25hdGUtcXItY29udGFpbmVyJ1xuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCB3ZWNoYXRRUiA9IHFyQ29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7XG4gICAgICAgICAgICBjbHM6ICdtcC1kb25hdGUtcXIgYWN0aXZlJyxcbiAgICAgICAgICAgIGF0dHI6IHtcbiAgICAgICAgICAgICAgICAnZGF0YS10eXBlJzogJ3dlY2hhdCdcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHdlY2hhdFFSLmNyZWF0ZUVsKCdpbWcnLCB7XG4gICAgICAgICAgICBhdHRyOiB7XG4gICAgICAgICAgICAgICAgc3JjOiAnLi9hc3NldHMvaW1hZ2VzL3dlY2hhdC1xci5wbmcnLFxuICAgICAgICAgICAgICAgIGFsdDogJ1x1NUZBRVx1NEZFMVx1NjUyRlx1NEVEOCdcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3QgYWxpcGF5UVIgPSBxckNvbnRhaW5lci5jcmVhdGVFbCgnZGl2Jywge1xuICAgICAgICAgICAgY2xzOiAnbXAtZG9uYXRlLXFyJyxcbiAgICAgICAgICAgIGF0dHI6IHtcbiAgICAgICAgICAgICAgICAnZGF0YS10eXBlJzogJ2FsaXBheSdcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGFsaXBheVFSLmNyZWF0ZUVsKCdpbWcnLCB7XG4gICAgICAgICAgICBhdHRyOiB7XG4gICAgICAgICAgICAgICAgc3JjOiAnYXNzZXRzL2ltYWdlcy9hbGlwYXktcXIucG5nJyxcbiAgICAgICAgICAgICAgICBhbHQ6ICdcdTY1MkZcdTRFRDhcdTVCOUQnXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIFx1NkRGQlx1NTJBMFx1NjgwN1x1N0I3RVx1NTIwN1x1NjM2Mlx1NEU4Qlx1NEVGNlxuICAgICAgICB3ZWNoYXRUYWIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLnN3aXRjaFRhYignd2VjaGF0JywgcGF5bWVudFRhYnMsIHFyQ29udGFpbmVyKSk7XG4gICAgICAgIGFsaXBheVRhYi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuc3dpdGNoVGFiKCdhbGlwYXknLCBwYXltZW50VGFicywgcXJDb250YWluZXIpKTtcblxuICAgICAgICAvLyBcdTZERkJcdTUyQTBcdTUxNzNcdTk1RURcdTRFOEJcdTRFRjZcbiAgICAgICAgY2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLmNsb3NlRG9uYXRlTW9kYWwoKSk7XG4gICAgICAgIHRoaXMub3ZlcmxheS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICAgICAgICBpZiAoZS50YXJnZXQgPT09IHRoaXMub3ZlcmxheSkge1xuICAgICAgICAgICAgICAgIHRoaXMuY2xvc2VEb25hdGVNb2RhbCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHN0YXRpYyBzd2l0Y2hUYWIodHlwZTogc3RyaW5nLCB0YWJzQ29udGFpbmVyOiBIVE1MRWxlbWVudCwgcXJDb250YWluZXI6IEhUTUxFbGVtZW50KSB7XG4gICAgICAgIC8vIFx1NjZGNFx1NjVCMFx1NjgwN1x1N0I3RVx1NzJCNlx1NjAwMVxuICAgICAgICB0YWJzQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJy5tcC1kb25hdGUtdGFiJykuZm9yRWFjaCh0YWIgPT4ge1xuICAgICAgICAgICAgdGFiLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgaWYgKHRhYi50ZXh0Q29udGVudD8uaW5jbHVkZXModHlwZSA9PT0gJ3dlY2hhdCcgPyAnXHU1RkFFXHU0RkUxJyA6ICdcdTY1MkZcdTRFRDhcdTVCOUQnKSkge1xuICAgICAgICAgICAgICAgIHRhYi5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gXHU2NkY0XHU2NUIwXHU0RThDXHU3RUY0XHU3ODAxXHU2NjNFXHU3OTNBXG4gICAgICAgIHFyQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJy5tcC1kb25hdGUtcXInKS5mb3JFYWNoKHFyID0+IHtcbiAgICAgICAgICAgIHFyLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgaWYgKHFyLmdldEF0dHJpYnV0ZSgnZGF0YS10eXBlJykgPT09IHR5cGUpIHtcbiAgICAgICAgICAgICAgICBxci5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzdGF0aWMgY2xvc2VEb25hdGVNb2RhbCgpIHtcbiAgICAgICAgaWYgKHRoaXMub3ZlcmxheSkge1xuICAgICAgICAgICAgdGhpcy5vdmVybGF5LnJlbW92ZSgpO1xuICAgICAgICB9XG4gICAgfVxufSIsICJpbXBvcnQgeyBBcHAgfSBmcm9tICdvYnNpZGlhbic7XG5cbmludGVyZmFjZSBUZW1wbGF0ZSB7XG4gICAgaWQ6IHN0cmluZztcbiAgICBuYW1lOiBzdHJpbmc7XG4gICAgc3R5bGVzOiB7XG4gICAgICAgIGNvbnRhaW5lcjogc3RyaW5nO1xuICAgICAgICB0aXRsZToge1xuICAgICAgICAgICAgaDE6IHN0cmluZztcbiAgICAgICAgICAgIGgyOiBzdHJpbmc7XG4gICAgICAgICAgICBoMzogc3RyaW5nO1xuICAgICAgICAgICAgYmFzZTogc3RyaW5nO1xuICAgICAgICB9O1xuICAgICAgICBwYXJhZ3JhcGg6IHN0cmluZztcbiAgICAgICAgbGlzdDoge1xuICAgICAgICAgICAgY29udGFpbmVyOiBzdHJpbmc7XG4gICAgICAgICAgICBpdGVtOiBzdHJpbmc7XG4gICAgICAgICAgICB0YXNrTGlzdDogc3RyaW5nO1xuICAgICAgICB9O1xuICAgICAgICBxdW90ZTogc3RyaW5nO1xuICAgICAgICBjb2RlOiB7XG4gICAgICAgICAgICBibG9jazogc3RyaW5nO1xuICAgICAgICAgICAgaW5saW5lOiBzdHJpbmc7XG4gICAgICAgIH07XG4gICAgICAgIGltYWdlOiBzdHJpbmc7XG4gICAgICAgIGxpbms6IHN0cmluZztcbiAgICAgICAgZW1waGFzaXM6IHtcbiAgICAgICAgICAgIHN0cm9uZzogc3RyaW5nO1xuICAgICAgICAgICAgZW06IHN0cmluZztcbiAgICAgICAgICAgIGRlbDogc3RyaW5nO1xuICAgICAgICB9O1xuICAgICAgICB0YWJsZToge1xuICAgICAgICAgICAgY29udGFpbmVyOiBzdHJpbmc7XG4gICAgICAgICAgICBoZWFkZXI6IHN0cmluZztcbiAgICAgICAgICAgIGNlbGw6IHN0cmluZztcbiAgICAgICAgfTtcbiAgICAgICAgaHI6IHN0cmluZztcbiAgICAgICAgZm9vdG5vdGU6IHtcbiAgICAgICAgICAgIHJlZjogc3RyaW5nO1xuICAgICAgICAgICAgYmFja3JlZjogc3RyaW5nO1xuICAgICAgICB9O1xuICAgIH07XG59XG5cbmV4cG9ydCBjbGFzcyBUZW1wbGF0ZU1hbmFnZXIge1xuICAgIHByaXZhdGUgdGVtcGxhdGVzOiBNYXA8c3RyaW5nLCBUZW1wbGF0ZT4gPSBuZXcgTWFwKCk7XG4gICAgcHJpdmF0ZSBjdXJyZW50VGVtcGxhdGU6IFRlbXBsYXRlO1xuICAgIHByaXZhdGUgY3VycmVudEZvbnQ6IHN0cmluZyA9ICctYXBwbGUtc3lzdGVtJztcbiAgICBwcml2YXRlIGN1cnJlbnRGb250U2l6ZTogbnVtYmVyID0gMTY7XG4gICAgcHJpdmF0ZSBhcHA6IEFwcDtcblxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwKSB7XG4gICAgICAgIHRoaXMuYXBwID0gYXBwO1xuICAgICAgICB0aGlzLmxvYWRUZW1wbGF0ZXMoKTsgLy8gXHU1MkEwXHU4RjdEXHU2QTIxXHU2NzdGXG4gICAgfVxuXG4gICAgcHVibGljIGFzeW5jIGxvYWRUZW1wbGF0ZXMoKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBjb25maWdEaXIgPSB0aGlzLmFwcC52YXVsdC5jb25maWdEaXI7XG4gICAgICAgICAgICBjb25zdCB0ZW1wbGF0ZXNQYXRoID0gYCR7Y29uZmlnRGlyfS9wbHVnaW5zL29ic2lkaWFuLXRvLW1wL3RlbXBsYXRlc2A7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFx1NTJBMFx1OEY3RFx1OUVEOFx1OEJBNFx1NkEyMVx1Njc3RlxuICAgICAgICAgICAgY29uc3QgZGVmYXVsdFRlbXBsYXRlID0gSlNPTi5wYXJzZShcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLnJlYWQoYCR7dGVtcGxhdGVzUGF0aH0vZGVmYXVsdC5qc29uYClcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICB0aGlzLnRlbXBsYXRlcy5zZXQoZGVmYXVsdFRlbXBsYXRlLmlkLCBkZWZhdWx0VGVtcGxhdGUpO1xuICAgICAgICAgICAgdGhpcy5jdXJyZW50VGVtcGxhdGUgPSBkZWZhdWx0VGVtcGxhdGU7XG5cbiAgICAgICAgICAgIC8vIFx1NTJBMFx1OEY3RFx1Njc4MVx1N0I4MFx1NEUzQlx1OTg5OFxuICAgICAgICAgICAgY29uc3QgbWluaW1hbFRlbXBsYXRlID0gSlNPTi5wYXJzZShcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLnJlYWQoYCR7dGVtcGxhdGVzUGF0aH0vbWluaW1hbC5qc29uYClcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICB0aGlzLnRlbXBsYXRlcy5zZXQobWluaW1hbFRlbXBsYXRlLmlkLCBtaW5pbWFsVGVtcGxhdGUpO1xuXG4gICAgICAgICAgICAvLyBcdTUyQTBcdThGN0RcdTRGMThcdTk2QzVcdTRFM0JcdTk4OThcbiAgICAgICAgICAgIGNvbnN0IGVsZWdhbnRUZW1wbGF0ZSA9IEpTT04ucGFyc2UoXG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5yZWFkKGAke3RlbXBsYXRlc1BhdGh9L2VsZWdhbnQuanNvbmApXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgdGhpcy50ZW1wbGF0ZXMuc2V0KGVsZWdhbnRUZW1wbGF0ZS5pZCwgZWxlZ2FudFRlbXBsYXRlKTtcblxuICAgICAgICAgICAgLy8gXHU1MkEwXHU4RjdEXHU2REYxXHU4MjcyXHU0RTNCXHU5ODk4XG4gICAgICAgICAgICBjb25zdCBkYXJrVGVtcGxhdGUgPSBKU09OLnBhcnNlKFxuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIucmVhZChgJHt0ZW1wbGF0ZXNQYXRofS9kYXJrLmpzb25gKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIHRoaXMudGVtcGxhdGVzLnNldChkYXJrVGVtcGxhdGUuaWQsIGRhcmtUZW1wbGF0ZSk7XG5cbiAgICAgICAgICAgIC8vIFx1NTJBMFx1OEY3RFx1NUI2Nlx1NjcyRlx1NEUzQlx1OTg5OFxuICAgICAgICAgICAgY29uc3QgYWNhZGVtaWNUZW1wbGF0ZSA9IEpTT04ucGFyc2UoXG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5yZWFkKGAke3RlbXBsYXRlc1BhdGh9L2FjYWRlbWljLmpzb25gKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIHRoaXMudGVtcGxhdGVzLnNldChhY2FkZW1pY1RlbXBsYXRlLmlkLCBhY2FkZW1pY1RlbXBsYXRlKTtcbiAgICAgICAgICAgIFxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignXHU1MkEwXHU4RjdEXHU2QTIxXHU2NzdGXHU1OTMxXHU4RDI1OicsIGVycm9yKTtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignXHU2NUUwXHU2Q0Q1XHU1MkEwXHU4RjdEXHU2QTIxXHU2NzdGXHU2NTg3XHU0RUY2Jyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0VGVtcGxhdGUoaWQ6IHN0cmluZyk6IFRlbXBsYXRlIHwgdW5kZWZpbmVkIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudGVtcGxhdGVzLmdldChpZCk7XG4gICAgfVxuXG4gICAgcHVibGljIGdldEN1cnJlbnRUZW1wbGF0ZSgpOiBUZW1wbGF0ZSB7XG4gICAgICAgIHJldHVybiB0aGlzLmN1cnJlbnRUZW1wbGF0ZTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc2V0Q3VycmVudFRlbXBsYXRlKGlkOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICAgICAgY29uc3QgdGVtcGxhdGUgPSB0aGlzLnRlbXBsYXRlcy5nZXQoaWQpO1xuICAgICAgICBpZiAodGVtcGxhdGUpIHtcbiAgICAgICAgICAgIHRoaXMuY3VycmVudFRlbXBsYXRlID0gdGVtcGxhdGU7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgcHVibGljIGdldEFsbFRlbXBsYXRlcygpOiBUZW1wbGF0ZVtdIHtcbiAgICAgICAgcmV0dXJuIEFycmF5LmZyb20odGhpcy50ZW1wbGF0ZXMudmFsdWVzKCkpO1xuICAgIH1cblxuICAgIHB1YmxpYyBzZXRGb250KGZvbnRGYW1pbHk6IHN0cmluZykge1xuICAgICAgICB0aGlzLmN1cnJlbnRGb250ID0gZm9udEZhbWlseTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc2V0Rm9udFNpemUoc2l6ZTogbnVtYmVyKSB7XG4gICAgICAgIHRoaXMuY3VycmVudEZvbnRTaXplID0gc2l6ZTtcbiAgICB9XG5cbiAgICBwdWJsaWMgYXBwbHlUZW1wbGF0ZShlbGVtZW50OiBIVE1MRWxlbWVudCk6IHZvaWQge1xuICAgICAgICBjb25zdCBzdHlsZXMgPSB0aGlzLmN1cnJlbnRUZW1wbGF0ZS5zdHlsZXM7XG4gICAgICAgIGNvbnN0IHRhYmxlID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yKCd0YWJsZScpO1xuICAgICAgICBjb25zdCB0ZCA9IGVsZW1lbnQucXVlcnlTZWxlY3RvcigndGQnKTtcbiAgICAgICAgXG4gICAgICAgIGlmICghdGFibGUgfHwgIXRkKSByZXR1cm47XG5cbiAgICAgICAgLy8gXHU1RTk0XHU3NTI4XHU1QkI5XHU1NjY4XHU2ODM3XHU1RjBGXHU1MjMwXHU4ODY4XHU2ODNDXG4gICAgICAgIHRhYmxlLnNldEF0dHJpYnV0ZSgnc3R5bGUnLCBzdHlsZXMuY29udGFpbmVyKTtcbiAgICAgICAgdGFibGUuc2V0QXR0cmlidXRlKCdjZWxscGFkZGluZycsICcwJyk7XG4gICAgICAgIHRhYmxlLnNldEF0dHJpYnV0ZSgnY2VsbHNwYWNpbmcnLCAnMCcpO1xuICAgICAgICBcbiAgICAgICAgLy8gXHU1RTk0XHU3NTI4XHU1N0ZBXHU3ODQwXHU2ODM3XHU1RjBGXHU1MjMwXHU1MzU1XHU1MTQzXHU2ODNDXG4gICAgICAgIHRkLnN0eWxlLmNzc1RleHQgPSBgXG4gICAgICAgICAgICB3b3JkLWJyZWFrOiBicmVhay1hbGw7XG4gICAgICAgICAgICBwYWRkaW5nOiAwO1xuICAgICAgICAgICAgbWFyZ2luOiAwO1xuICAgICAgICAgICAgbGluZS1oZWlnaHQ6IDEuNztcbiAgICAgICAgICAgIG92ZXJmbG93LXdyYXA6IGJyZWFrLXdvcmQ7XG4gICAgICAgICAgICB3aGl0ZS1zcGFjZTogbm9ybWFsO1xuICAgICAgICAgICAgYm9yZGVyOiBub25lO1xuICAgICAgICAgICAgZm9udC1mYW1pbHk6ICR7dGhpcy5jdXJyZW50Rm9udH07XG4gICAgICAgIGA7XG4gICAgICAgIFxuICAgICAgICAvLyBcdTVFOTRcdTc1MjhcdTY4MDdcdTk4OThcdTY4MzdcdTVGMEZcbiAgICAgICAgdGQucXVlcnlTZWxlY3RvckFsbCgnaDEnKS5mb3JFYWNoKGVsID0+IHtcbiAgICAgICAgICAgIGVsLnNldEF0dHJpYnV0ZSgnc3R5bGUnLCBgJHtzdHlsZXMudGl0bGUuaDF9OyBmb250LWZhbWlseTogJHt0aGlzLmN1cnJlbnRGb250fTtgKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRkLnF1ZXJ5U2VsZWN0b3JBbGwoJ2gyJykuZm9yRWFjaChlbCA9PiB7XG4gICAgICAgICAgICBlbC5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywgYCR7c3R5bGVzLnRpdGxlLmgyfTsgZm9udC1mYW1pbHk6ICR7dGhpcy5jdXJyZW50Rm9udH07YCk7XG4gICAgICAgIH0pO1xuICAgICAgICB0ZC5xdWVyeVNlbGVjdG9yQWxsKCdoMycpLmZvckVhY2goZWwgPT4ge1xuICAgICAgICAgICAgZWwuc2V0QXR0cmlidXRlKCdzdHlsZScsIGAke3N0eWxlcy50aXRsZS5oM307IGZvbnQtZmFtaWx5OiAke3RoaXMuY3VycmVudEZvbnR9O2ApO1xuICAgICAgICB9KTtcbiAgICAgICAgdGQucXVlcnlTZWxlY3RvckFsbCgnaDQsIGg1LCBoNicpLmZvckVhY2goZWwgPT4ge1xuICAgICAgICAgICAgZWwuc2V0QXR0cmlidXRlKCdzdHlsZScsIGAke3N0eWxlcy50aXRsZS5iYXNlfTsgZm9udC1mYW1pbHk6ICR7dGhpcy5jdXJyZW50Rm9udH07YCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIFx1NUU5NFx1NzUyOFx1NkJCNVx1ODQzRFx1NjgzN1x1NUYwRlxuICAgICAgICB0ZC5xdWVyeVNlbGVjdG9yQWxsKCdwJykuZm9yRWFjaChlbCA9PiB7XG4gICAgICAgICAgICAvLyBcdTY4QzBcdTY3RTVcdTY2MkZcdTU0MjZcdTRFM0FcdTY3MDBcdTU5MTZcdTVDNDJcdTZCQjVcdTg0M0RcbiAgICAgICAgICAgIGlmICghZWwucGFyZW50RWxlbWVudD8uY2xvc2VzdCgncCcpICYmICFlbC5wYXJlbnRFbGVtZW50Py5jbG9zZXN0KCdibG9ja3F1b3RlJykpIHtcbiAgICAgICAgICAgICAgICBlbC5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywgYCR7c3R5bGVzLnBhcmFncmFwaH07IGZvbnQtZmFtaWx5OiAke3RoaXMuY3VycmVudEZvbnR9OyBmb250LXNpemU6ICR7dGhpcy5jdXJyZW50Rm9udFNpemV9cHg7YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIFx1NUU5NFx1NzUyOFx1NTIxN1x1ODg2OFx1NjgzN1x1NUYwRlxuICAgICAgICB0ZC5xdWVyeVNlbGVjdG9yQWxsKCd1bCwgb2wnKS5mb3JFYWNoKGVsID0+IHtcbiAgICAgICAgICAgIGVsLnNldEF0dHJpYnV0ZSgnc3R5bGUnLCBzdHlsZXMubGlzdC5jb250YWluZXIpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGQucXVlcnlTZWxlY3RvckFsbCgnbGknKS5mb3JFYWNoKGVsID0+IHtcbiAgICAgICAgICAgIGVsLnNldEF0dHJpYnV0ZSgnc3R5bGUnLCBgJHtzdHlsZXMubGlzdC5pdGVtfTsgZm9udC1mYW1pbHk6ICR7dGhpcy5jdXJyZW50Rm9udH07IGZvbnQtc2l6ZTogJHt0aGlzLmN1cnJlbnRGb250U2l6ZX1weDtgKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRkLnF1ZXJ5U2VsZWN0b3JBbGwoJy50YXNrLWxpc3QtaXRlbScpLmZvckVhY2goZWwgPT4ge1xuICAgICAgICAgICAgZWwuc2V0QXR0cmlidXRlKCdzdHlsZScsIGAke3N0eWxlcy5saXN0LnRhc2tMaXN0fTsgZm9udC1mYW1pbHk6ICR7dGhpcy5jdXJyZW50Rm9udH07IGZvbnQtc2l6ZTogJHt0aGlzLmN1cnJlbnRGb250U2l6ZX1weDtgKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gXHU1RTk0XHU3NTI4XHU1RjE1XHU3NTI4XHU2ODM3XHU1RjBGXG4gICAgICAgIHRkLnF1ZXJ5U2VsZWN0b3JBbGwoJ2Jsb2NrcXVvdGUnKS5mb3JFYWNoKGVsID0+IHtcbiAgICAgICAgICAgIGVsLnNldEF0dHJpYnV0ZSgnc3R5bGUnLCBgJHtzdHlsZXMucXVvdGV9OyBmb250LWZhbWlseTogJHt0aGlzLmN1cnJlbnRGb250fTsgZm9udC1zaXplOiAke3RoaXMuY3VycmVudEZvbnRTaXplfXB4O2ApO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBcdTVFOTRcdTc1MjhcdTRFRTNcdTc4MDFcdTY4MzdcdTVGMEZcbiAgICAgICAgdGQucXVlcnlTZWxlY3RvckFsbCgncHJlJykuZm9yRWFjaChlbCA9PiB7XG4gICAgICAgICAgICBlbC5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywgYCR7c3R5bGVzLmNvZGUuYmxvY2t9OyBmb250LXNpemU6ICR7dGhpcy5jdXJyZW50Rm9udFNpemV9cHg7YCk7XG4gICAgICAgIH0pO1xuICAgICAgICB0ZC5xdWVyeVNlbGVjdG9yQWxsKCdjb2RlOm5vdChwcmUgY29kZSknKS5mb3JFYWNoKGVsID0+IHtcbiAgICAgICAgICAgIGVsLnNldEF0dHJpYnV0ZSgnc3R5bGUnLCBgJHtzdHlsZXMuY29kZS5pbmxpbmV9OyBmb250LXNpemU6ICR7dGhpcy5jdXJyZW50Rm9udFNpemV9cHg7YCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIFx1NUU5NFx1NzUyOFx1OTRGRVx1NjNBNVx1NjgzN1x1NUYwRlxuICAgICAgICB0ZC5xdWVyeVNlbGVjdG9yQWxsKCdhJykuZm9yRWFjaChlbCA9PiB7XG4gICAgICAgICAgICBlbC5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywgc3R5bGVzLmxpbmspO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBcdTVFOTRcdTc1MjhcdTVGM0FcdThDMDNcdTY4MzdcdTVGMEZcbiAgICAgICAgdGQucXVlcnlTZWxlY3RvckFsbCgnc3Ryb25nJykuZm9yRWFjaChlbCA9PiB7XG4gICAgICAgICAgICBlbC5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywgc3R5bGVzLmVtcGhhc2lzLnN0cm9uZyk7XG4gICAgICAgIH0pO1xuICAgICAgICB0ZC5xdWVyeVNlbGVjdG9yQWxsKCdlbScpLmZvckVhY2goZWwgPT4ge1xuICAgICAgICAgICAgZWwuc2V0QXR0cmlidXRlKCdzdHlsZScsIHN0eWxlcy5lbXBoYXNpcy5lbSk7XG4gICAgICAgIH0pO1xuICAgICAgICB0ZC5xdWVyeVNlbGVjdG9yQWxsKCdkZWwnKS5mb3JFYWNoKGVsID0+IHtcbiAgICAgICAgICAgIGVsLnNldEF0dHJpYnV0ZSgnc3R5bGUnLCBzdHlsZXMuZW1waGFzaXMuZGVsKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gXHU1RTk0XHU3NTI4XHU4ODY4XHU2ODNDXHU2ODM3XHU1RjBGXG4gICAgICAgIHRkLnF1ZXJ5U2VsZWN0b3JBbGwoJ3RhYmxlJykuZm9yRWFjaChlbCA9PiB7XG4gICAgICAgICAgICBpZiAoZWwgPT09IHRhYmxlKSByZXR1cm47IC8vIFx1OERGM1x1OEZDN1x1NTMwNVx1ODhGOVx1ODg2OFx1NjgzQ1xuICAgICAgICAgICAgZWwuc2V0QXR0cmlidXRlKCdzdHlsZScsIHN0eWxlcy50YWJsZS5jb250YWluZXIpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGQucXVlcnlTZWxlY3RvckFsbCgndGgnKS5mb3JFYWNoKGVsID0+IHtcbiAgICAgICAgICAgIGVsLnNldEF0dHJpYnV0ZSgnc3R5bGUnLCBgJHtzdHlsZXMudGFibGUuaGVhZGVyfTsgZm9udC1mYW1pbHk6ICR7dGhpcy5jdXJyZW50Rm9udH07IGZvbnQtc2l6ZTogJHt0aGlzLmN1cnJlbnRGb250U2l6ZX1weDtgKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRkLnF1ZXJ5U2VsZWN0b3JBbGwoJ3RkJykuZm9yRWFjaChlbCA9PiB7XG4gICAgICAgICAgICBpZiAoZWwgPT09IHRkKSByZXR1cm47IC8vIFx1OERGM1x1OEZDN1x1NTMwNVx1ODhGOVx1NTM1NVx1NTE0M1x1NjgzQ1xuICAgICAgICAgICAgZWwuc2V0QXR0cmlidXRlKCdzdHlsZScsIGAke3N0eWxlcy50YWJsZS5jZWxsfTsgZm9udC1mYW1pbHk6ICR7dGhpcy5jdXJyZW50Rm9udH07IGZvbnQtc2l6ZTogJHt0aGlzLmN1cnJlbnRGb250U2l6ZX1weDtgKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gXHU1RTk0XHU3NTI4XHU1MjA2XHU1MjcyXHU3RUJGXHU2ODM3XHU1RjBGXG4gICAgICAgIHRkLnF1ZXJ5U2VsZWN0b3JBbGwoJ2hyJykuZm9yRWFjaChlbCA9PiB7XG4gICAgICAgICAgICBlbC5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywgc3R5bGVzLmhyKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gXHU1RTk0XHU3NTI4XHU4MTFBXHU2Q0U4XHU2ODM3XHU1RjBGXG4gICAgICAgIHRkLnF1ZXJ5U2VsZWN0b3JBbGwoJy5mb290bm90ZS1yZWYnKS5mb3JFYWNoKGVsID0+IHtcbiAgICAgICAgICAgIGVsLnNldEF0dHJpYnV0ZSgnc3R5bGUnLCBzdHlsZXMuZm9vdG5vdGUucmVmKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRkLnF1ZXJ5U2VsZWN0b3JBbGwoJy5mb290bm90ZS1iYWNrcmVmJykuZm9yRWFjaChlbCA9PiB7XG4gICAgICAgICAgICBlbC5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywgc3R5bGVzLmZvb3Rub3RlLmJhY2tyZWYpO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBcdTVFOTRcdTc1MjhcdTU2RkVcdTcyNDdcdTY4MzdcdTVGMEZcbiAgICAgICAgdGQucXVlcnlTZWxlY3RvckFsbCgnaW1nJykuZm9yRWFjaChlbCA9PiB7XG4gICAgICAgICAgICBjb25zdCBpbWcgPSBlbCBhcyBIVE1MSW1hZ2VFbGVtZW50O1xuICAgICAgICAgICAgLy8gXHU1RTk0XHU3NTI4XHU1N0ZBXHU3ODQwXHU2ODM3XHU1RjBGXG4gICAgICAgICAgICBlbC5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywgYCR7c3R5bGVzLmltYWdlfTsgZm9udC1mYW1pbHk6ICR7dGhpcy5jdXJyZW50Rm9udH07YCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFx1NTk4Mlx1Njc5Q1x1NTZGRVx1NzI0N1x1NjYyRlx1NkJCNVx1ODQzRFx1NEUyRFx1NTUyRlx1NEUwMFx1NzY4NFx1NTE0M1x1N0QyMFx1RkYwQ1x1NjI0RFx1OEJCRVx1N0Y2RVx1NUM0NVx1NEUyRFxuICAgICAgICAgICAgY29uc3QgcGFyZW50ID0gaW1nLnBhcmVudEVsZW1lbnQ7XG4gICAgICAgICAgICBpZiAocGFyZW50ICYmIHBhcmVudC50YWdOYW1lLnRvTG93ZXJDYXNlKCkgPT09ICdwJykge1xuICAgICAgICAgICAgICAgIGlmIChwYXJlbnQuY2hpbGROb2Rlcy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50LnN0eWxlLnRleHRBbGlnbiA9ICdjZW50ZXInO1xuICAgICAgICAgICAgICAgICAgICBwYXJlbnQuc3R5bGUubWFyZ2luID0gJzFlbSAwJztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIFx1NjZGNFx1NjVCMFx1NEVFM1x1NzgwMVx1NTc1N1x1NjgzN1x1NUYwRlx1NUU5NFx1NzUyOFxuICAgICAgICB0ZC5xdWVyeVNlbGVjdG9yQWxsKCdwcmUnKS5mb3JFYWNoKGVsID0+IHtcbiAgICAgICAgICAgIGVsLnNldEF0dHJpYnV0ZSgnc3R5bGUnLCBgJHtzdHlsZXMuY29kZS5ibG9ja307YCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIFx1NjZGNFx1NjVCMFx1NUYxNVx1NzUyOFx1NTc1N1x1NjgzN1x1NUYwRlx1NUU5NFx1NzUyOFxuICAgICAgICB0ZC5xdWVyeVNlbGVjdG9yQWxsKCdibG9ja3F1b3RlJykuZm9yRWFjaChlbCA9PiB7XG4gICAgICAgICAgICBlbC5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywgYCR7c3R5bGVzLnF1b3RlfTtgKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gXHU2NkY0XHU2NUIwXHU1MjE3XHU4ODY4XHU2ODM3XHU1RjBGXHU1RTk0XHU3NTI4XG4gICAgICAgIHRkLnF1ZXJ5U2VsZWN0b3JBbGwoJ3VsLCBvbCcpLmZvckVhY2goZWwgPT4ge1xuICAgICAgICAgICAgZWwuc2V0QXR0cmlidXRlKCdzdHlsZScsIGAke3N0eWxlcy5saXN0LmNvbnRhaW5lcn07IGZvbnQtZmFtaWx5OiAke3RoaXMuY3VycmVudEZvbnR9O2ApO1xuICAgICAgICB9KTtcbiAgICAgICAgdGQucXVlcnlTZWxlY3RvckFsbCgnbGknKS5mb3JFYWNoKGVsID0+IHtcbiAgICAgICAgICAgIGVsLnNldEF0dHJpYnV0ZSgnc3R5bGUnLCBgJHtzdHlsZXMubGlzdC5pdGVtfTsgZm9udC1mYW1pbHk6ICR7dGhpcy5jdXJyZW50Rm9udH07IGZvbnQtc2l6ZTogJHt0aGlzLmN1cnJlbnRGb250U2l6ZX1weDtgKTtcbiAgICAgICAgfSk7XG4gICAgfVxufVxuXG5leHBvcnQgY29uc3QgdGVtcGxhdGVNYW5hZ2VyID0gKGFwcDogQXBwKSA9PiBuZXcgVGVtcGxhdGVNYW5hZ2VyKGFwcCk7XG4iLCAiaW50ZXJmYWNlIE1QU2V0dGluZ3Mge1xuICAgIHRlbXBsYXRlSWQ6IHN0cmluZztcbiAgICBmb250RmFtaWx5OiBzdHJpbmc7XG4gICAgZm9udFNpemU6IG51bWJlcjtcbn1cblxuY29uc3QgREVGQVVMVF9TRVRUSU5HUzogTVBTZXR0aW5ncyA9IHtcbiAgICB0ZW1wbGF0ZUlkOiAnZGVmYXVsdCcsXG4gICAgZm9udEZhbWlseTogJy1hcHBsZS1zeXN0ZW0nLFxuICAgIGZvbnRTaXplOiAxNlxufTtcblxuZXhwb3J0IGNsYXNzIFNldHRpbmdzTWFuYWdlciB7XG4gICAgcHJpdmF0ZSBwbHVnaW46IGFueTtcbiAgICBwcml2YXRlIHNldHRpbmdzOiBNUFNldHRpbmdzO1xuXG4gICAgY29uc3RydWN0b3IocGx1Z2luOiBhbnkpIHtcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gICAgICAgIHRoaXMuc2V0dGluZ3MgPSBERUZBVUxUX1NFVFRJTkdTO1xuICAgIH1cblxuICAgIGFzeW5jIGxvYWRTZXR0aW5ncygpIHtcbiAgICAgICAgdGhpcy5zZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfU0VUVElOR1MsIGF3YWl0IHRoaXMucGx1Z2luLmxvYWREYXRhKCkpO1xuICAgIH1cblxuICAgIGFzeW5jIHNhdmVTZXR0aW5ncygpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZURhdGEodGhpcy5zZXR0aW5ncyk7XG4gICAgfVxuXG4gICAgZ2V0U2V0dGluZ3MoKTogTVBTZXR0aW5ncyB7XG4gICAgICAgIHJldHVybiB0aGlzLnNldHRpbmdzO1xuICAgIH1cblxuICAgIGFzeW5jIHVwZGF0ZVNldHRpbmdzKHNldHRpbmdzOiBQYXJ0aWFsPE1QU2V0dGluZ3M+KSB7XG4gICAgICAgIHRoaXMuc2V0dGluZ3MgPSB7IC4uLnRoaXMuc2V0dGluZ3MsIC4uLnNldHRpbmdzIH07XG4gICAgICAgIGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XG4gICAgfVxufSJdLAogICJtYXBwaW5ncyI6ICI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsSUFBQUEsbUJBQStCOzs7QUNBL0IsSUFBQUMsbUJBQWlFOzs7QUNFMUQsSUFBTSxjQUFOLE1BQWtCO0FBQUEsRUFHckIsT0FBTyxXQUFXLEtBQVU7QUFDeEIsU0FBSyxNQUFNO0FBQUEsRUFDZjtBQUFBLEVBRUEsT0FBTyxjQUFjLFNBQTRCO0FBRTdDLFVBQU0sUUFBUSxLQUFLLG1CQUFtQixPQUFPO0FBRzdDLFNBQUssZ0JBQWdCLE1BQU0sY0FBYyxJQUFJLENBQUM7QUFBQSxFQUNsRDtBQUFBLEVBRUEsT0FBZSxtQkFBbUIsU0FBd0M7QUFDdEUsVUFBTSxRQUFRLFNBQVMsY0FBYyxPQUFPO0FBQzVDLFVBQU0sUUFBUSxTQUFTLGNBQWMsT0FBTztBQUM1QyxVQUFNLEtBQUssU0FBUyxjQUFjLElBQUk7QUFDdEMsVUFBTSxLQUFLLFNBQVMsY0FBYyxJQUFJO0FBRXRDLFVBQU0sTUFBTSxRQUFRO0FBQ3BCLFVBQU0sTUFBTSxpQkFBaUI7QUFDN0IsT0FBRyxNQUFNLFlBQVk7QUFFckIsV0FBTyxRQUFRLFlBQVk7QUFDdkIsU0FBRyxZQUFZLFFBQVEsVUFBVTtBQUFBLElBQ3JDO0FBRUEsT0FBRyxZQUFZ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LFlBQU0sS0FBSyxPQUFPLFNBQVMsS0FBSyxRQUFRO0FBQUEsSUFDNUM7QUFBQTtBQUFBLEVBRUEsY0FBMEI7QUFDdEIsV0FBTyxLQUFLO0FBQUEsRUFDaEI7QUFBQSxFQUVNLGVBQWUsVUFBK0I7QUFBQTtBQUNoRCxXQUFLLFdBQVcsa0NBQUssS0FBSyxXQUFhO0FBQ3ZDLFlBQU0sS0FBSyxhQUFhO0FBQUEsSUFDNUI7QUFBQTtBQUNKOzs7QU4vQkEsSUFBcUIsV0FBckIsY0FBc0Msd0JBQU87QUFBQSxFQUduQyxTQUFTO0FBQUE7QUFFWCxXQUFLLGtCQUFrQixJQUFJLGdCQUFnQixJQUFJO0FBQy9DLFlBQU0sS0FBSyxnQkFBZ0IsYUFBYTtBQUd4QyxZQUFNLGtCQUFrQixJQUFJLGdCQUFnQixLQUFLLEdBQUc7QUFHcEQsa0JBQVksV0FBVyxLQUFLLEdBQUc7QUFHL0IsV0FBSztBQUFBLFFBQ0Q7QUFBQSxRQUNBLENBQUMsU0FBUyxJQUFJLE9BQU8sTUFBTSxpQkFBaUIsS0FBSyxlQUFlO0FBQUEsTUFDcEU7QUFHQSxXQUFLLFdBQVc7QUFBQSxRQUNaLElBQUk7QUFBQSxRQUNKLE1BQU07QUFBQSxRQUNOLFVBQVUsTUFBWTtBQUNsQixnQkFBTSxLQUFLLGFBQWE7QUFBQSxRQUM1QjtBQUFBLE1BQ0osQ0FBQztBQUdELFdBQUssSUFBSSxVQUFVLGNBQWMsTUFBTTtBQUNuQyxhQUFLLGFBQWE7QUFBQSxNQUN0QixDQUFDO0FBQ0Qsa0JBQVksV0FBVyxLQUFLLEdBQUc7QUFBQSxJQUNuQztBQUFBO0FBQUEsRUFFTSxXQUFXO0FBQUE7QUFFYixXQUFLLElBQUksVUFBVSxtQkFBbUIsWUFBWTtBQUFBLElBQ3REO0FBQUE7QUFBQSxFQUVNLGVBQWU7QUFBQTtBQUVqQixZQUFNLFNBQVMsS0FBSyxJQUFJLFVBQVUsZ0JBQWdCLFlBQVk7QUFDOUQsVUFBSSxPQUFPLFNBQVMsR0FBRztBQUNuQixhQUFLLElBQUksVUFBVSxXQUFXLE9BQU8sQ0FBQyxDQUFDO0FBQ3ZDO0FBQUEsTUFDSjtBQUdBLFlBQU0sWUFBWSxLQUFLLElBQUksVUFBVSxhQUFhLEtBQUs7QUFDdkQsVUFBSSxXQUFXO0FBQ1gsY0FBTSxVQUFVLGFBQWE7QUFBQSxVQUN6QixNQUFNO0FBQUEsVUFDTixRQUFRO0FBQUEsUUFDWixDQUFDO0FBQUEsTUFDTCxPQUFPO0FBRUgsWUFBSSx3QkFBTyxrREFBVTtBQUFBLE1BQ3pCO0FBQUEsSUFDSjtBQUFBO0FBQ0o7IiwKICAibmFtZXMiOiBbImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iXQp9Cg==
